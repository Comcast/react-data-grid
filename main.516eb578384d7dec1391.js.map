{"version":3,"file":"main.516eb578384d7dec1391.js","mappings":"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","sources":["webpack://react-data-grid/webpack/runtime/chunk loaded","webpack://react-data-grid/webpack/runtime/create fake namespace object","webpack://react-data-grid/webpack/runtime/load script","webpack://react-data-grid/website/Nav.tsx","webpack://react-data-grid/./src/hooks/useLayoutEffect.ts","webpack://react-data-grid/./src/hooks/useFocusRef.ts","webpack://react-data-grid/src/formatters/SelectCellFormatter.tsx","webpack://react-data-grid/./src/hooks/useRowSelection.ts","webpack://react-data-grid/./src/utils/domUtils.ts","webpack://react-data-grid/./src/Columns.tsx","webpack://react-data-grid/src/editors/TextEditor.tsx","webpack://react-data-grid/./src/formatters/ValueFormatter.tsx","webpack://react-data-grid/src/formatters/ToggleGroupFormatter.tsx","webpack://react-data-grid/./src/utils/index.ts","webpack://react-data-grid/src/style/cell.ts","webpack://react-data-grid/./src/hooks/useCalculatedColumns.ts","webpack://react-data-grid/./src/utils/colSpanUtils.ts","webpack://react-data-grid/./src/hooks/useLatestFunc.ts","webpack://react-data-grid/src/headerCells/SortableHeaderCell.tsx","webpack://react-data-grid/./src/hooks/useRovingCellRef.ts","webpack://react-data-grid/src/HeaderCell.tsx","webpack://react-data-grid/src/style/row.ts","webpack://react-data-grid/src/HeaderRow.tsx","webpack://react-data-grid/./src/utils/selectedCellUtils.ts","webpack://react-data-grid/src/Cell.tsx","webpack://react-data-grid/./src/Row.tsx","webpack://react-data-grid/./src/GroupCell.tsx","webpack://react-data-grid/src/GroupRow.tsx","webpack://react-data-grid/src/SummaryCell.tsx","webpack://react-data-grid/src/SummaryRow.tsx","webpack://react-data-grid/./src/utils/keyboardUtils.ts","webpack://react-data-grid/src/EditCell.tsx","webpack://react-data-grid/src/DragHandle.tsx","webpack://react-data-grid/./src/DataGrid.tsx","webpack://react-data-grid/./src/hooks/useGridDimensions.ts","webpack://react-data-grid/./src/hooks/useViewportRows.ts","webpack://react-data-grid/./src/hooks/useViewportColumns.ts","webpack://react-data-grid/src/style/core.ts","webpack://react-data-grid/./website/demos/exportUtils.tsx","webpack://react-data-grid/website/demos/CommonFeatures.tsx","webpack://react-data-grid/./website/demos/components/Editors/DropDownEditor.tsx","webpack://react-data-grid/website/demos/components/Formatters/ImageFormatter.tsx","webpack://react-data-grid/website/demos/AllFeatures.tsx","webpack://react-data-grid/./website/demos/CellNavigation.tsx","webpack://react-data-grid/website/demos/ColumnSpanning.tsx","webpack://react-data-grid/./website/demos/components/HeaderRenderers/DraggableHeaderRenderer.tsx","webpack://react-data-grid/./website/demos/ColumnsReordering.tsx","webpack://react-data-grid/website/demos/ContextMenu.tsx","webpack://react-data-grid/website/demos/Grouping.tsx","webpack://react-data-grid/website/demos/HeaderFilters.tsx","webpack://react-data-grid/website/demos/InfiniteScrolling.tsx","webpack://react-data-grid/website/demos/components/Formatters/CellExpanderFormatter.tsx","webpack://react-data-grid/website/demos/MasterDetail.tsx","webpack://react-data-grid/./website/demos/MillionCells.tsx","webpack://react-data-grid/./website/demos/NoRows.tsx","webpack://react-data-grid/./website/demos/Resizable.tsx","webpack://react-data-grid/website/demos/components/RowRenderers/DraggableRowRenderer.tsx","webpack://react-data-grid/./website/demos/RowsReordering.tsx","webpack://react-data-grid/./website/demos/ScrollToRow.tsx","webpack://react-data-grid/website/demos/components/Formatters/ChildRowDeleteButton.tsx","webpack://react-data-grid/./website/demos/TreeView.tsx","webpack://react-data-grid/./website/demos/VariableRowHeight.tsx","webpack://react-data-grid/website/root.tsx","webpack://react-data-grid/webpack/bootstrap","webpack://react-data-grid/webpack/runtime/compat get default export","webpack://react-data-grid/webpack/runtime/define property getters","webpack://react-data-grid/webpack/runtime/ensure chunk","webpack://react-data-grid/webpack/runtime/get javascript chunk filename","webpack://react-data-grid/webpack/runtime/get mini-css chunk filename","webpack://react-data-grid/webpack/runtime/global","webpack://react-data-grid/webpack/runtime/hasOwnProperty shorthand","webpack://react-data-grid/webpack/runtime/make namespace object","webpack://react-data-grid/webpack/runtime/publicPath","webpack://react-data-grid/webpack/runtime/jsonp chunk loading","webpack://react-data-grid/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"react-data-grid:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { NavLink } from 'react-router-dom';\nimport { css } from '@linaria/core';\n\nconst navClassname = css`\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n\n  @media (prefers-color-scheme: light) {\n    border-left: 4px solid hsl(210deg 50% 80%);\n  }\n  @media (prefers-color-scheme: dark) {\n    border-left: 4px solid hsl(210deg 50% 40%);\n  }\n\n  h1,\n  h2 {\n    margin: 8px;\n  }\n\n  a {\n    color: inherit;\n    font-size: 14px;\n    line-height: 22px;\n    text-decoration: none;\n    padding: 0 16px;\n    transition: 0.1s background-color;\n\n    &:hover {\n      @media (prefers-color-scheme: light) {\n        background-color: hsl(210deg 50% 90%);\n      }\n      @media (prefers-color-scheme: dark) {\n        background-color: hsl(210deg 50% 30%);\n      }\n    }\n  }\n`;\n\nconst activeNavClassname = css`\n  font-weight: 500;\n\n  @media (prefers-color-scheme: light) {\n    background-color: hsl(210deg 50% 80%);\n  }\n  @media (prefers-color-scheme: dark) {\n    background-color: hsl(210deg 50% 40%);\n  }\n\n  a&:hover {\n    @media (prefers-color-scheme: light) {\n      background-color: hsl(210deg 50% 70%);\n    }\n    @media (prefers-color-scheme: dark) {\n      background-color: hsl(210deg 50% 50%);\n    }\n  }\n`;\n\nexport default function Nav() {\n  return (\n    <nav className={navClassname}>\n      <h1>react-data-grid</h1>\n\n      <h2>Demos</h2>\n      <NavLink to=\"/common-features\" exact activeClassName={activeNavClassname}>\n        Common Features\n      </NavLink>\n      <NavLink to=\"/all-features\" exact activeClassName={activeNavClassname}>\n        All Features\n      </NavLink>\n      <NavLink to=\"/cell-navigation\" exact activeClassName={activeNavClassname}>\n        Cell Navigation\n      </NavLink>\n      <NavLink to=\"/column-spanning\" exact activeClassName={activeNavClassname}>\n        Column Spanning\n      </NavLink>\n      <NavLink to=\"/columns-reordering\" exact activeClassName={activeNavClassname}>\n        Columns Reordering\n      </NavLink>\n      <NavLink to=\"/context-menu\" exact activeClassName={activeNavClassname}>\n        Context Menu\n      </NavLink>\n      <NavLink to=\"/grouping\" exact activeClassName={activeNavClassname}>\n        Grouping\n      </NavLink>\n      <NavLink to=\"/header-filters\" exact activeClassName={activeNavClassname}>\n        Header Filters\n      </NavLink>\n      <NavLink to=\"/infinite-scrolling\" exact activeClassName={activeNavClassname}>\n        Infinite Scrolling\n      </NavLink>\n      <NavLink to=\"/master-detail\" exact activeClassName={activeNavClassname}>\n        Master Detail\n      </NavLink>\n      <NavLink to=\"/million-cells\" exact activeClassName={activeNavClassname}>\n        A Million Cells\n      </NavLink>\n      <NavLink to=\"/no-rows\" exact activeClassName={activeNavClassname}>\n        No Rows\n      </NavLink>\n      <NavLink to=\"/resizable-grid\" exact activeClassName={activeNavClassname}>\n        Resizable Grid\n      </NavLink>\n      <NavLink to=\"/rows-reordering\" exact activeClassName={activeNavClassname}>\n        Rows Reordering\n      </NavLink>\n      <NavLink to=\"/scroll-to-row\" exact activeClassName={activeNavClassname}>\n        Scroll To Row\n      </NavLink>\n      <NavLink to=\"/tree-view\" exact activeClassName={activeNavClassname}>\n        Tree View\n      </NavLink>\n      <NavLink to=\"/variable-row-height\" exact activeClassName={activeNavClassname}>\n        Variable Row Height\n      </NavLink>\n\n      <h2>Links</h2>\n      <a\n        href=\"https://github.com/adazzle/react-data-grid/blob/main/README.md\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        Documentation\n      </a>\n      <a\n        href=\"https://github.com/adazzle/react-data-grid/blob/main/CHANGELOG.md\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        Changelog\n      </a>\n      <a\n        href=\"https://github.com/adazzle/react-data-grid/discussions\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        Discussions\n      </a>\n      <a href=\"https://github.com/adazzle/react-data-grid/issues\" target=\"_blank\" rel=\"noreferrer\">\n        Issues\n      </a>\n    </nav>\n  );\n}\n","// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport { useEffect, useLayoutEffect as useOriginalLayoutEffect } from 'react';\n\n// Silence silly warning\n// https://reactjs.org/link/uselayouteffect-ssr\nexport const useLayoutEffect = typeof window === 'undefined' ? useEffect : useOriginalLayoutEffect;\n","import { useRef } from 'react';\nimport { useLayoutEffect } from './useLayoutEffect';\n\nexport function useFocusRef<T extends HTMLOrSVGElement>(isSelected: boolean) {\n  const ref = useRef<T>(null);\n\n  useLayoutEffect(() => {\n    if (!isSelected) return;\n    ref.current?.focus({ preventScroll: true });\n  }, [isSelected]);\n\n  return {\n    ref,\n    tabIndex: isSelected ? 0 : -1\n  };\n}\n","import clsx from 'clsx';\nimport { css } from '@linaria/core';\nimport { useFocusRef } from '../hooks/useFocusRef';\n\nconst checkboxLabel = css`\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  inset: 0;\n  margin-right: 1px; /* align checkbox in row group cell */\n`;\n\nconst checkboxLabelClassname = `rdg-checkbox-label ${checkboxLabel}`;\n\nconst checkboxInput = css`\n  all: unset;\n  width: 0;\n  margin: 0;\n`;\n\nconst checkboxInputClassname = `rdg-checkbox-input ${checkboxInput}`;\n\nconst checkbox = css`\n  content: '';\n  width: 20px;\n  height: 20px;\n  border: 2px solid var(--rdg-border-color);\n  background-color: var(--rdg-background-color);\n\n  .${checkboxInput}:checked + & {\n    background-color: var(--rdg-checkbox-color);\n    box-shadow: inset 0px 0px 0px 4px var(--rdg-background-color);\n  }\n\n  .${checkboxInput}:focus + & {\n    border-color: var(--rdg-checkbox-focus-color);\n  }\n`;\n\nconst checkboxClassname = `rdg-checkbox ${checkbox}`;\n\nconst checkboxLabelDisabled = css`\n  cursor: default;\n\n  .${checkbox} {\n    border-color: var(--rdg-checkbox-disabled-border-color);\n    background-color: var(--rdg-checkbox-disabled-background-color);\n  }\n`;\n\nconst checkboxLabelDisabledClassname = `rdg-checkbox-label-disabled ${checkboxLabelDisabled}`;\n\ntype SharedInputProps = Pick<\n  React.InputHTMLAttributes<HTMLInputElement>,\n  'disabled' | 'onClick' | 'aria-label' | 'aria-labelledby'\n>;\n\ninterface SelectCellFormatterProps extends SharedInputProps {\n  isCellSelected: boolean;\n  value: boolean;\n  onChange: (value: boolean, isShiftClick: boolean) => void;\n}\n\nexport function SelectCellFormatter({\n  value,\n  isCellSelected,\n  disabled,\n  onClick,\n  onChange,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledBy\n}: SelectCellFormatterProps) {\n  const { ref, tabIndex } = useFocusRef<HTMLInputElement>(isCellSelected);\n\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    onChange(e.target.checked, (e.nativeEvent as MouseEvent).shiftKey);\n  }\n\n  return (\n    <label className={clsx(checkboxLabelClassname, { [checkboxLabelDisabledClassname]: disabled })}>\n      <input\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledBy}\n        ref={ref}\n        type=\"checkbox\"\n        tabIndex={tabIndex}\n        className={checkboxInputClassname}\n        disabled={disabled}\n        checked={value}\n        onChange={handleChange}\n        onClick={onClick}\n      />\n      <div className={checkboxClassname} />\n    </label>\n  );\n}\n","import { createContext, useContext } from 'react';\nimport type { SelectRowEvent } from '../types';\n\nconst RowSelectionContext = createContext<boolean | undefined>(undefined);\n\nexport const RowSelectionProvider = RowSelectionContext.Provider;\n\nconst RowSelectionChangeContext = createContext<\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ((selectRowEvent: SelectRowEvent<any>) => void) | undefined\n>(undefined);\n\nexport const RowSelectionChangeProvider = RowSelectionChangeContext.Provider;\n\nexport function useRowSelection<R>(): [boolean, (selectRowEvent: SelectRowEvent<R>) => void] {\n  const rowSelectionContext = useContext(RowSelectionContext);\n  const rowSelectionChangeContext = useContext(RowSelectionChangeContext);\n\n  if (rowSelectionContext === undefined || rowSelectionChangeContext === undefined) {\n    throw new Error('useRowSelection must be used within DataGrid cells');\n  }\n\n  return [rowSelectionContext, rowSelectionChangeContext];\n}\n","export function stopPropagation(event: React.SyntheticEvent) {\n  event.stopPropagation();\n}\n","import { SelectCellFormatter } from './formatters';\nimport { useRowSelection } from './hooks/useRowSelection';\nimport type { Column, FormatterProps, GroupFormatterProps } from './types';\nimport { stopPropagation } from './utils';\n\nexport const SELECT_COLUMN_KEY = 'select-row';\n\nfunction SelectFormatter(props: FormatterProps<unknown>) {\n  const [isRowSelected, onRowSelectionChange] = useRowSelection();\n\n  return (\n    <SelectCellFormatter\n      aria-label=\"Select\"\n      isCellSelected={props.isCellSelected}\n      value={isRowSelected}\n      onClick={stopPropagation}\n      onChange={(checked, isShiftClick) => {\n        onRowSelectionChange({ row: props.row, checked, isShiftClick });\n      }}\n    />\n  );\n}\n\nfunction SelectGroupFormatter(props: GroupFormatterProps<unknown>) {\n  const [isRowSelected, onRowSelectionChange] = useRowSelection();\n\n  return (\n    <SelectCellFormatter\n      aria-label=\"Select Group\"\n      isCellSelected={props.isCellSelected}\n      value={isRowSelected}\n      onChange={(checked) => {\n        onRowSelectionChange({ row: props.row, checked, isShiftClick: false });\n      }}\n      // Stop propagation to prevent row selection\n      onClick={stopPropagation}\n    />\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const SelectColumn: Column<any, any> = {\n  key: SELECT_COLUMN_KEY,\n  name: '',\n  width: 35,\n  maxWidth: 35,\n  resizable: false,\n  sortable: false,\n  frozen: true,\n  headerRenderer(props) {\n    return (\n      <SelectCellFormatter\n        aria-label=\"Select All\"\n        isCellSelected={props.isCellSelected}\n        value={props.allRowsSelected}\n        onChange={props.onAllRowsSelectionChange}\n        // Stop propagation to prevent row selection\n        onClick={stopPropagation}\n      />\n    );\n  },\n  formatter: SelectFormatter,\n  groupFormatter: SelectGroupFormatter\n};\n","import { css } from '@linaria/core';\nimport type { EditorProps } from '../types';\n\nconst textEditor = css`\n  appearance: none;\n\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  padding: 0px 6px 0 6px;\n  border: 2px solid #ccc;\n  vertical-align: top;\n  color: var(--rdg-color);\n  background-color: var(--rdg-background-color);\n\n  font-family: inherit;\n  font-size: var(--rdg-font-size);\n\n  &:focus {\n    border-color: var(--rdg-selection-color);\n    outline: none;\n  }\n\n  &::placeholder {\n    color: #999;\n    opacity: 1;\n  }\n`;\n\nexport const textEditorClassname = `rdg-text-editor ${textEditor}`;\n\nfunction autoFocusAndSelect(input: HTMLInputElement | null) {\n  input?.focus();\n  input?.select();\n}\n\nexport default function TextEditor<TRow, TSummaryRow>({\n  row,\n  column,\n  onRowChange,\n  onClose\n}: EditorProps<TRow, TSummaryRow>) {\n  return (\n    <input\n      className={textEditorClassname}\n      ref={autoFocusAndSelect}\n      value={row[column.key as keyof TRow] as unknown as string}\n      onChange={(event) => onRowChange({ ...row, [column.key]: event.target.value })}\n      onBlur={() => onClose(true)}\n    />\n  );\n}\n","import type { FormatterProps } from '../types';\n\nexport function ValueFormatter<R, SR>(props: FormatterProps<R, SR>) {\n  try {\n    return <>{props.row[props.column.key as keyof R]}</>;\n  } catch {\n    return null;\n  }\n}\n","import { css } from '@linaria/core';\nimport type { GroupFormatterProps } from '../types';\nimport { useFocusRef } from '../hooks/useFocusRef';\n\nconst groupCellContent = css`\n  outline: none;\n`;\n\nconst groupCellContentClassname = `rdg-group-cell-content ${groupCellContent}`;\n\nconst caret = css`\n  margin-left: 4px;\n  stroke: currentColor;\n  stroke-width: 1.5px;\n  fill: transparent;\n  vertical-align: middle;\n\n  > path {\n    transition: d 0.1s;\n  }\n`;\n\nconst caretClassname = `rdg-caret ${caret}`;\n\nexport function ToggleGroupFormatter<R, SR>({\n  groupKey,\n  isExpanded,\n  isCellSelected,\n  toggleGroup\n}: GroupFormatterProps<R, SR>) {\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown({ key }: React.KeyboardEvent<HTMLSpanElement>) {\n    if (key === 'Enter') {\n      toggleGroup();\n    }\n  }\n\n  const d = isExpanded ? 'M1 1 L 7 7 L 13 1' : 'M1 7 L 7 1 L 13 7';\n\n  return (\n    <span\n      ref={ref}\n      className={groupCellContentClassname}\n      tabIndex={tabIndex}\n      onKeyDown={handleKeyDown}\n    >\n      {groupKey}\n      <svg viewBox=\"0 0 14 8\" width=\"14\" height=\"8\" className={caretClassname} aria-hidden>\n        <path d={d} />\n      </svg>\n    </span>\n  );\n}\n","import type { CSSProperties } from 'react';\nimport clsx from 'clsx';\n\nimport type { CalculatedColumn } from '../types';\nimport { cellClassname, cellFrozenClassname, cellFrozenLastClassname } from '../style';\n\nexport * from './colSpanUtils';\nexport * from './domUtils';\nexport * from './keyboardUtils';\nexport * from './selectedCellUtils';\n\nexport const { min, max, round, floor, sign } = Math;\n\nexport function assertIsValidKeyGetter<R, K extends React.Key>(\n  keyGetter: unknown\n): asserts keyGetter is (row: R) => K {\n  if (typeof keyGetter !== 'function') {\n    throw new Error('Please specify the rowKeyGetter prop to use selection');\n  }\n}\n\nexport function getRowStyle(rowIdx: number, height?: number): CSSProperties {\n  if (height !== undefined) {\n    return {\n      '--rdg-grid-row-start': rowIdx,\n      '--rdg-row-height': `${height}px`\n    } as unknown as CSSProperties;\n  }\n  return { '--rdg-grid-row-start': rowIdx } as unknown as CSSProperties;\n}\n\nexport function getCellStyle<R, SR>(\n  column: CalculatedColumn<R, SR>,\n  colSpan?: number\n): React.CSSProperties {\n  return {\n    gridColumnStart: column.idx + 1,\n    gridColumnEnd: colSpan !== undefined ? `span ${colSpan}` : undefined,\n    left: column.frozen ? `var(--rdg-frozen-left-${column.idx})` : undefined\n  };\n}\n\nexport function getCellClassname<R, SR>(\n  column: CalculatedColumn<R, SR>,\n  ...extraClasses: Parameters<typeof clsx>\n): string {\n  return clsx(\n    cellClassname,\n    {\n      [cellFrozenClassname]: column.frozen,\n      [cellFrozenLastClassname]: column.isLastFrozenColumn\n    },\n    ...extraClasses\n  );\n}\n","import { css } from '@linaria/core';\n\nexport const cell = css`\n  contain: strict;\n  contain: size layout style paint;\n  padding: 0 8px;\n  border-right: 1px solid var(--rdg-border-color);\n  border-bottom: 1px solid var(--rdg-border-color);\n  grid-row-start: var(--rdg-grid-row-start);\n  background-color: inherit;\n\n  white-space: nowrap;\n  overflow: hidden;\n  overflow: clip;\n  text-overflow: ellipsis;\n  outline: none;\n\n  &[aria-selected='true'] {\n    box-shadow: inset 0 0 0 2px var(--rdg-selection-color);\n  }\n`;\n\nexport const cellClassname = `rdg-cell ${cell}`;\n\n// max-content does not calculate width when contain is set to style or size\nexport const cellAutoResizeClassname = css`\n  .${cell} {\n    contain: content;\n  }\n`;\n\nexport const cellFrozen = css`\n  position: sticky;\n  /* Should have a higher value than 0 to show up above unfrozen cells */\n  z-index: 1;\n`;\n\nexport const cellFrozenClassname = `rdg-cell-frozen ${cellFrozen}`;\n\nexport const cellFrozenLast = css`\n  box-shadow: var(--rdg-frozen-cell-box-shadow);\n`;\n\nexport const cellFrozenLastClassname = `rdg-cell-frozen-last ${cellFrozenLast}`;\n","import { useMemo } from 'react';\n\nimport type { CalculatedColumn, Column, Maybe } from '../types';\nimport type { DataGridProps } from '../DataGrid';\nimport { ValueFormatter, ToggleGroupFormatter } from '../formatters';\nimport { SELECT_COLUMN_KEY } from '../Columns';\nimport { floor, max, min, round } from '../utils';\n\ntype Mutable<T> = {\n  -readonly [P in keyof T]: T[P];\n};\n\ninterface ColumnMetric {\n  width: number;\n  left: number;\n}\n\ninterface CalculatedColumnsArgs<R, SR> extends Pick<DataGridProps<R, SR>, 'defaultColumnOptions'> {\n  rawColumns: readonly Column<R, SR>[];\n  rawGroupBy: Maybe<readonly string[]>;\n  viewportWidth: number;\n  scrollLeft: number;\n  columnWidths: ReadonlyMap<string, number>;\n  enableVirtualization: boolean;\n}\n\nexport function useCalculatedColumns<R, SR>({\n  rawColumns,\n  columnWidths,\n  viewportWidth,\n  scrollLeft,\n  defaultColumnOptions,\n  rawGroupBy,\n  enableVirtualization\n}: CalculatedColumnsArgs<R, SR>) {\n  const minColumnWidth = defaultColumnOptions?.minWidth ?? 80;\n  const defaultFormatter = defaultColumnOptions?.formatter ?? ValueFormatter;\n  const defaultSortable = defaultColumnOptions?.sortable ?? false;\n  const defaultResizable = defaultColumnOptions?.resizable ?? false;\n\n  const { columns, colSpanColumns, lastFrozenColumnIndex, groupBy } = useMemo((): {\n    columns: readonly CalculatedColumn<R, SR>[];\n    colSpanColumns: readonly CalculatedColumn<R, SR>[];\n    lastFrozenColumnIndex: number;\n    groupBy: readonly string[];\n  } => {\n    // Filter rawGroupBy and ignore keys that do not match the columns prop\n    const groupBy: string[] = [];\n    let lastFrozenColumnIndex = -1;\n\n    const columns = rawColumns.map((rawColumn) => {\n      const rowGroup = rawGroupBy?.includes(rawColumn.key) ?? false;\n      // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n      const frozen = rowGroup || rawColumn.frozen || false;\n\n      const column: Mutable<CalculatedColumn<R, SR>> = {\n        ...rawColumn,\n        idx: 0,\n        frozen,\n        isLastFrozenColumn: false,\n        rowGroup,\n        sortable: rawColumn.sortable ?? defaultSortable,\n        resizable: rawColumn.resizable ?? defaultResizable,\n        formatter: rawColumn.formatter ?? defaultFormatter\n      };\n\n      if (rowGroup) {\n        column.groupFormatter ??= ToggleGroupFormatter;\n      }\n\n      if (frozen) {\n        lastFrozenColumnIndex++;\n      }\n\n      return column;\n    });\n\n    columns.sort(({ key: aKey, frozen: frozenA }, { key: bKey, frozen: frozenB }) => {\n      // Sort select column first:\n      if (aKey === SELECT_COLUMN_KEY) return -1;\n      if (bKey === SELECT_COLUMN_KEY) return 1;\n\n      // Sort grouped columns second, following the groupBy order:\n      if (rawGroupBy?.includes(aKey)) {\n        if (rawGroupBy.includes(bKey)) {\n          return rawGroupBy.indexOf(aKey) - rawGroupBy.indexOf(bKey);\n        }\n        return -1;\n      }\n      if (rawGroupBy?.includes(bKey)) return 1;\n\n      // Sort frozen columns third:\n      if (frozenA) {\n        if (frozenB) return 0;\n        return -1;\n      }\n      if (frozenB) return 1;\n\n      // Sort other columns last:\n      return 0;\n    });\n\n    const colSpanColumns: CalculatedColumn<R, SR>[] = [];\n    columns.forEach((column, idx) => {\n      column.idx = idx;\n\n      if (column.rowGroup) {\n        groupBy.push(column.key);\n      }\n\n      if (column.colSpan != null) {\n        colSpanColumns.push(column);\n      }\n    });\n\n    if (lastFrozenColumnIndex !== -1) {\n      columns[lastFrozenColumnIndex].isLastFrozenColumn = true;\n    }\n\n    return {\n      columns,\n      colSpanColumns,\n      lastFrozenColumnIndex,\n      groupBy\n    };\n  }, [rawColumns, defaultFormatter, defaultResizable, defaultSortable, rawGroupBy]);\n\n  const { layoutCssVars, totalColumnWidth, totalFrozenColumnWidth, columnMetrics } = useMemo((): {\n    layoutCssVars: Readonly<Record<string, string>>;\n    totalColumnWidth: number;\n    totalFrozenColumnWidth: number;\n    columnMetrics: ReadonlyMap<CalculatedColumn<R, SR>, ColumnMetric>;\n  } => {\n    const columnMetrics = new Map<CalculatedColumn<R, SR>, ColumnMetric>();\n    let left = 0;\n    let totalColumnWidth = 0;\n    let totalFrozenColumnWidth = 0;\n    let templateColumns = '';\n    let allocatedWidth = 0;\n    let unassignedColumnsCount = 0;\n\n    for (const column of columns) {\n      let width = getSpecifiedWidth(column, columnWidths, viewportWidth);\n\n      if (width === undefined) {\n        unassignedColumnsCount++;\n      } else {\n        width = clampColumnWidth(width, column, minColumnWidth);\n        allocatedWidth += width;\n        columnMetrics.set(column, { width, left: 0 });\n      }\n    }\n\n    for (const column of columns) {\n      let width: number;\n      if (columnMetrics.has(column)) {\n        const columnMetric = columnMetrics.get(column)!;\n        columnMetric.left = left;\n        ({ width } = columnMetric);\n      } else {\n        // avoid decimals as subpixel positioning can lead to cell borders not being displayed\n        const unallocatedWidth = viewportWidth - allocatedWidth;\n        const unallocatedColumnWidth = round(unallocatedWidth / unassignedColumnsCount);\n        width = clampColumnWidth(unallocatedColumnWidth, column, minColumnWidth);\n        allocatedWidth += width;\n        unassignedColumnsCount--;\n        columnMetrics.set(column, { width, left });\n      }\n      totalColumnWidth += width;\n      left += width;\n      templateColumns += `${width}px `;\n    }\n\n    if (lastFrozenColumnIndex !== -1) {\n      const columnMetric = columnMetrics.get(columns[lastFrozenColumnIndex])!;\n      totalFrozenColumnWidth = columnMetric.left + columnMetric.width;\n    }\n\n    const layoutCssVars: Record<string, string> = {\n      gridTemplateColumns: templateColumns\n    };\n\n    for (let i = 0; i <= lastFrozenColumnIndex; i++) {\n      const column = columns[i];\n      layoutCssVars[`--rdg-frozen-left-${column.idx}`] = `${columnMetrics.get(column)!.left}px`;\n    }\n\n    return { layoutCssVars, totalColumnWidth, totalFrozenColumnWidth, columnMetrics };\n  }, [columnWidths, columns, viewportWidth, minColumnWidth, lastFrozenColumnIndex]);\n\n  const [colOverscanStartIdx, colOverscanEndIdx] = useMemo((): [number, number] => {\n    if (!enableVirtualization) {\n      return [0, columns.length - 1];\n    }\n    // get the viewport's left side and right side positions for non-frozen columns\n    const viewportLeft = scrollLeft + totalFrozenColumnWidth;\n    const viewportRight = scrollLeft + viewportWidth;\n    // get first and last non-frozen column indexes\n    const lastColIdx = columns.length - 1;\n    const firstUnfrozenColumnIdx = min(lastFrozenColumnIndex + 1, lastColIdx);\n\n    // skip rendering non-frozen columns if the frozen columns cover the entire viewport\n    if (viewportLeft >= viewportRight) {\n      return [firstUnfrozenColumnIdx, firstUnfrozenColumnIdx];\n    }\n\n    // get the first visible non-frozen column index\n    let colVisibleStartIdx = firstUnfrozenColumnIdx;\n    while (colVisibleStartIdx < lastColIdx) {\n      const { left, width } = columnMetrics.get(columns[colVisibleStartIdx])!;\n      // if the right side of the columnn is beyond the left side of the available viewport,\n      // then it is the first column that's at least partially visible\n      if (left + width > viewportLeft) {\n        break;\n      }\n      colVisibleStartIdx++;\n    }\n\n    // get the last visible non-frozen column index\n    let colVisibleEndIdx = colVisibleStartIdx;\n    while (colVisibleEndIdx < lastColIdx) {\n      const { left, width } = columnMetrics.get(columns[colVisibleEndIdx])!;\n      // if the right side of the column is beyond or equal to the right side of the available viewport,\n      // then it the last column that's at least partially visible, as the previous column's right side is not beyond the viewport.\n      if (left + width >= viewportRight) {\n        break;\n      }\n      colVisibleEndIdx++;\n    }\n\n    const colOverscanStartIdx = max(firstUnfrozenColumnIdx, colVisibleStartIdx - 1);\n    const colOverscanEndIdx = min(lastColIdx, colVisibleEndIdx + 1);\n\n    return [colOverscanStartIdx, colOverscanEndIdx];\n  }, [\n    columnMetrics,\n    columns,\n    lastFrozenColumnIndex,\n    scrollLeft,\n    totalFrozenColumnWidth,\n    viewportWidth,\n    enableVirtualization\n  ]);\n\n  return {\n    columns,\n    colSpanColumns,\n    colOverscanStartIdx,\n    colOverscanEndIdx,\n    layoutCssVars,\n    columnMetrics,\n    totalColumnWidth,\n    lastFrozenColumnIndex,\n    totalFrozenColumnWidth,\n    groupBy\n  };\n}\n\nfunction getSpecifiedWidth<R, SR>(\n  { key, width }: Column<R, SR>,\n  columnWidths: ReadonlyMap<string, number>,\n  viewportWidth: number\n): number | undefined {\n  if (columnWidths.has(key)) {\n    // Use the resized width if available\n    return columnWidths.get(key);\n  }\n  if (typeof width === 'number') {\n    return width;\n  }\n  if (typeof width === 'string' && /^\\d+%$/.test(width)) {\n    return floor((viewportWidth * parseInt(width, 10)) / 100);\n  }\n  return undefined;\n}\n\nfunction clampColumnWidth<R, SR>(\n  width: number,\n  { minWidth, maxWidth }: Column<R, SR>,\n  minColumnWidth: number\n): number {\n  width = max(width, minWidth ?? minColumnWidth);\n\n  if (typeof maxWidth === 'number') {\n    return min(width, maxWidth);\n  }\n\n  return width;\n}\n","import type { CalculatedColumn, ColSpanArgs } from '../types';\n\nexport function getColSpan<R, SR>(\n  column: CalculatedColumn<R, SR>,\n  lastFrozenColumnIndex: number,\n  args: ColSpanArgs<R, SR>\n): number | undefined {\n  const colSpan = typeof column.colSpan === 'function' ? column.colSpan(args) : 1;\n  if (\n    Number.isInteger(colSpan) &&\n    colSpan! > 1 &&\n    // ignore colSpan if it spans over both frozen and regular columns\n    (!column.frozen || column.idx + colSpan! - 1 <= lastFrozenColumnIndex)\n  ) {\n    return colSpan!;\n  }\n  return undefined;\n}\n","import { useRef, useEffect, useCallback } from 'react';\n\n// https://reactjs.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useLatestFunc<T extends (...args: any[]) => any>(fn: T) {\n  const ref = useRef(fn);\n\n  useEffect(() => {\n    ref.current = fn;\n  });\n\n  return useCallback((...args: Parameters<T>) => {\n    ref.current(...args);\n  }, []);\n}\n","import { css } from '@linaria/core';\nimport { useFocusRef } from '../hooks';\nimport type { HeaderRendererProps } from '../types';\n\nconst headerSortCell = css`\n  cursor: pointer;\n  display: flex;\n\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst headerSortCellClassname = `rdg-header-sort-cell ${headerSortCell}`;\n\nconst headerSortName = css`\n  flex-grow: 1;\n  overflow: hidden;\n  overflow: clip;\n  text-overflow: ellipsis;\n`;\n\nconst headerSortNameClassname = `rdg-header-sort-name ${headerSortName}`;\n\nconst arrow = css`\n  fill: currentColor;\n\n  > path {\n    transition: d 0.1s;\n  }\n`;\n\nconst arrowClassname = `rdg-sort-arrow ${arrow}`;\n\ntype SharedHeaderCellProps<R, SR> = Pick<\n  HeaderRendererProps<R, SR>,\n  'sortDirection' | 'onSort' | 'priority' | 'isCellSelected'\n>;\n\ninterface Props<R, SR> extends SharedHeaderCellProps<R, SR> {\n  children: React.ReactNode;\n}\n\nexport default function SortableHeaderCell<R, SR>({\n  onSort,\n  sortDirection,\n  priority,\n  children,\n  isCellSelected\n}: Props<R, SR>) {\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown(event: React.KeyboardEvent<HTMLSpanElement>) {\n    if (event.key === ' ' || event.key === 'Enter') {\n      // stop propagation to prevent scrolling\n      event.preventDefault();\n      onSort(event.ctrlKey || event.metaKey);\n    }\n  }\n\n  function handleClick(event: React.MouseEvent<HTMLSpanElement>) {\n    onSort(event.ctrlKey || event.metaKey);\n  }\n\n  return (\n    <span\n      ref={ref}\n      tabIndex={tabIndex}\n      className={headerSortCellClassname}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      <span className={headerSortNameClassname}>{children}</span>\n      <span>\n        {sortDirection !== undefined && (\n          <svg viewBox=\"0 0 12 8\" width=\"12\" height=\"8\" className={arrowClassname} aria-hidden>\n            <path d={sortDirection === 'ASC' ? 'M0 8 6 0 12 8' : 'M0 0 6 8 12 0'} />\n          </svg>\n        )}\n        {priority}\n      </span>\n    </span>\n  );\n}\n","import { useRef, useState } from 'react';\nimport { useLayoutEffect } from './useLayoutEffect';\n\n// https://www.w3.org/TR/wai-aria-practices-1.1/#kbd_roving_tabindex\nexport function useRovingCellRef(isSelected: boolean) {\n  const ref = useRef<HTMLDivElement>(null);\n  // https://www.w3.org/TR/wai-aria-practices-1.1/#gridNav_focus\n  const isChildFocused = useRef(false);\n  const [, forceRender] = useState<unknown>({});\n\n  useLayoutEffect(() => {\n    if (!isSelected) {\n      isChildFocused.current = false;\n      return;\n    }\n\n    if (isChildFocused.current) {\n      // When the child is focused, we need to rerender\n      // the cell again so tabIndex is updated to -1\n      forceRender({});\n      return;\n    }\n    ref.current?.focus({ preventScroll: true });\n  }, [isSelected]);\n\n  function onFocus(event: React.FocusEvent<HTMLDivElement>) {\n    if (event.target !== ref.current) {\n      isChildFocused.current = true;\n    }\n  }\n\n  const isFocused = isSelected && !isChildFocused.current;\n\n  return {\n    ref,\n    tabIndex: isFocused ? 0 : -1,\n    onFocus\n  };\n}\n","import { css } from '@linaria/core';\n\nimport type { CalculatedColumn, SortColumn } from './types';\nimport type { HeaderRowProps } from './HeaderRow';\nimport SortableHeaderCell from './headerCells/SortableHeaderCell';\nimport { getCellStyle, getCellClassname } from './utils';\nimport { useRovingCellRef } from './hooks';\n\nconst cellResizable = css`\n  touch-action: none;\n\n  &::after {\n    content: '';\n    cursor: col-resize;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    width: 10px;\n  }\n`;\n\nconst cellResizableClassname = `rdg-cell-resizable ${cellResizable}`;\n\ntype SharedHeaderRowProps<R, SR> = Pick<\n  HeaderRowProps<R, SR, React.Key>,\n  | 'sortColumns'\n  | 'onSortColumnsChange'\n  | 'allRowsSelected'\n  | 'onAllRowsSelectionChange'\n  | 'selectCell'\n  | 'onColumnResize'\n  | 'shouldFocusGrid'\n>;\n\nexport interface HeaderCellProps<R, SR> extends SharedHeaderRowProps<R, SR> {\n  column: CalculatedColumn<R, SR>;\n  colSpan: number | undefined;\n  isCellSelected: boolean;\n}\n\nexport default function HeaderCell<R, SR>({\n  column,\n  colSpan,\n  isCellSelected,\n  onColumnResize,\n  allRowsSelected,\n  onAllRowsSelectionChange,\n  sortColumns,\n  onSortColumnsChange,\n  selectCell,\n  shouldFocusGrid\n}: HeaderCellProps<R, SR>) {\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected);\n  const sortIndex = sortColumns?.findIndex((sort) => sort.columnKey === column.key);\n  const sortColumn =\n    sortIndex !== undefined && sortIndex > -1 ? sortColumns![sortIndex] : undefined;\n  const sortDirection = sortColumn?.direction;\n  const priority = sortColumn !== undefined && sortColumns!.length > 1 ? sortIndex! + 1 : undefined;\n  const ariaSort =\n    sortDirection && !priority ? (sortDirection === 'ASC' ? 'ascending' : 'descending') : undefined;\n\n  const className = getCellClassname(column, column.headerCellClass, {\n    [cellResizableClassname]: column.resizable\n  });\n\n  function onPointerDown(event: React.PointerEvent<HTMLDivElement>) {\n    if (event.pointerType === 'mouse' && event.buttons !== 1) {\n      return;\n    }\n\n    const { currentTarget, pointerId } = event;\n    const { right } = currentTarget.getBoundingClientRect();\n    const offset = right - event.clientX;\n\n    if (offset > 11) {\n      // +1px to account for the border size\n      return;\n    }\n\n    function onPointerMove(event: PointerEvent) {\n      const width = event.clientX + offset - currentTarget.getBoundingClientRect().left;\n      if (width > 0) {\n        onColumnResize(column, width);\n      }\n    }\n\n    function onLostPointerCapture() {\n      currentTarget.removeEventListener('pointermove', onPointerMove);\n      currentTarget.removeEventListener('lostpointercapture', onLostPointerCapture);\n    }\n\n    currentTarget.setPointerCapture(pointerId);\n    currentTarget.addEventListener('pointermove', onPointerMove);\n    currentTarget.addEventListener('lostpointercapture', onLostPointerCapture);\n  }\n\n  function onSort(ctrlClick: boolean) {\n    if (onSortColumnsChange == null) return;\n    const { sortDescendingFirst } = column;\n    if (sortColumn === undefined) {\n      // not currently sorted\n      const nextSort: SortColumn = {\n        columnKey: column.key,\n        direction: sortDescendingFirst ? 'DESC' : 'ASC'\n      };\n      onSortColumnsChange(sortColumns && ctrlClick ? [...sortColumns, nextSort] : [nextSort]);\n    } else {\n      let nextSortColumn: SortColumn | undefined;\n      if (\n        (sortDescendingFirst && sortDirection === 'DESC') ||\n        (!sortDescendingFirst && sortDirection === 'ASC')\n      ) {\n        nextSortColumn = {\n          columnKey: column.key,\n          direction: sortDirection === 'ASC' ? 'DESC' : 'ASC'\n        };\n      }\n      if (ctrlClick) {\n        const nextSortColumns = [...sortColumns!];\n        if (nextSortColumn) {\n          // swap direction\n          nextSortColumns[sortIndex!] = nextSortColumn;\n        } else {\n          // remove sort\n          nextSortColumns.splice(sortIndex!, 1);\n        }\n        onSortColumnsChange(nextSortColumns);\n      } else {\n        onSortColumnsChange(nextSortColumn ? [nextSortColumn] : []);\n      }\n    }\n  }\n\n  function onClick() {\n    selectCell(column.idx);\n  }\n\n  function onDoubleClick(event: React.MouseEvent<HTMLDivElement>) {\n    const { right } = event.currentTarget.getBoundingClientRect();\n    const offset = right - event.clientX;\n\n    if (offset > 11) {\n      // +1px to account for the border size\n      return;\n    }\n\n    onColumnResize(column, 'auto');\n  }\n\n  function handleFocus(event: React.FocusEvent<HTMLDivElement>) {\n    onFocus(event);\n    if (shouldFocusGrid) {\n      // Select the first header cell if there is no selected cell\n      selectCell(0);\n    }\n  }\n\n  function getCell() {\n    if (column.headerRenderer) {\n      return (\n        <column.headerRenderer\n          column={column}\n          sortDirection={sortDirection}\n          priority={priority}\n          onSort={onSort}\n          allRowsSelected={allRowsSelected}\n          onAllRowsSelectionChange={onAllRowsSelectionChange}\n          isCellSelected={isCellSelected}\n        />\n      );\n    }\n\n    if (column.sortable) {\n      return (\n        <SortableHeaderCell\n          onSort={onSort}\n          sortDirection={sortDirection}\n          priority={priority}\n          isCellSelected={isCellSelected}\n        >\n          {column.name}\n        </SortableHeaderCell>\n      );\n    }\n\n    return column.name;\n  }\n\n  return (\n    <div\n      role=\"columnheader\"\n      aria-colindex={column.idx + 1}\n      aria-selected={isCellSelected}\n      aria-sort={ariaSort}\n      aria-colspan={colSpan}\n      ref={ref}\n      // set the tabIndex to 0 when there is no selected cell so grid can receive focus\n      tabIndex={shouldFocusGrid ? 0 : tabIndex}\n      className={className}\n      style={{\n        ...getCellStyle(column, colSpan),\n        minWidth: column.minWidth ?? undefined,\n        maxWidth: column.maxWidth ?? undefined\n      }}\n      onFocus={handleFocus}\n      onClick={onClick}\n      onDoubleClick={column.resizable ? onDoubleClick : undefined}\n      onPointerDown={column.resizable ? onPointerDown : undefined}\n    >\n      {getCell()}\n    </div>\n  );\n}\n","import { css } from '@linaria/core';\n\nimport { cell, cellFrozenLast } from '../style';\n\nexport const row = css`\n  display: contents;\n  line-height: var(--rdg-row-height);\n  background-color: var(--rdg-background-color);\n\n  &:hover {\n    background-color: var(--rdg-row-hover-background-color);\n  }\n\n  &[aria-selected='true'] {\n    background-color: var(--rdg-row-selected-background-color);\n\n    &:hover {\n      background-color: var(--row-selected-hover-background-color);\n    }\n  }\n`;\n\nexport const rowClassname = `rdg-row ${row}`;\n\nconst topBoxShadow = 'inset 0 2px 0 0 var(--rdg-selection-color)';\nconst rightBoxShadow = 'inset -2px 0 0 0 var(--rdg-selection-color)';\nconst bottomBoxShadow = 'inset 0 -2px 0 0 var(--rdg-selection-color)';\nconst leftBoxShadow = 'inset 2px 0 0 0 var(--rdg-selection-color)';\n\nconst rowSelected = css`\n  outline: none;\n\n  > .${cell} {\n    box-shadow: ${topBoxShadow}, ${bottomBoxShadow};\n    &:first-child {\n      box-shadow: ${topBoxShadow}, ${bottomBoxShadow}, ${leftBoxShadow};\n    }\n    &:last-child {\n      box-shadow: ${topBoxShadow}, ${bottomBoxShadow}, ${rightBoxShadow};\n    }\n  }\n\n  > .${cellFrozenLast} {\n    box-shadow: ${topBoxShadow}, ${bottomBoxShadow}, var(--rdg-frozen-cell-box-shadow);\n  }\n`;\n\nexport const rowSelectedClassname = `rdg-row-selected ${rowSelected}`;\n","import { memo } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport HeaderCell from './HeaderCell';\nimport type { CalculatedColumn } from './types';\nimport { getColSpan, getRowStyle } from './utils';\nimport type { DataGridProps } from './DataGrid';\nimport { cell, cellFrozen, rowSelectedClassname } from './style';\n\ntype SharedDataGridProps<R, SR, K extends React.Key> = Pick<\n  DataGridProps<R, SR, K>,\n  'sortColumns' | 'onSortColumnsChange'\n>;\n\nexport interface HeaderRowProps<R, SR, K extends React.Key> extends SharedDataGridProps<R, SR, K> {\n  columns: readonly CalculatedColumn<R, SR>[];\n  allRowsSelected: boolean;\n  onAllRowsSelectionChange: (checked: boolean) => void;\n  onColumnResize: (column: CalculatedColumn<R, SR>, width: number | 'auto') => void;\n  selectCell: (columnIdx: number) => void;\n  lastFrozenColumnIndex: number;\n  selectedCellIdx: number | undefined;\n  shouldFocusGrid: boolean;\n}\n\nconst headerRow = css`\n  display: contents;\n  line-height: var(--rdg-header-row-height);\n  background-color: var(--rdg-header-background-color);\n  font-weight: bold;\n\n  > .${cell} {\n    /* Should have a higher value than 1 to show up above frozen cells */\n    z-index: 2;\n    position: sticky;\n    top: 0;\n  }\n\n  > .${cellFrozen} {\n    z-index: 3;\n  }\n`;\n\nconst headerRowClassname = `rdg-header-row ${headerRow}`;\n\nfunction HeaderRow<R, SR, K extends React.Key>({\n  columns,\n  allRowsSelected,\n  onAllRowsSelectionChange,\n  onColumnResize,\n  sortColumns,\n  onSortColumnsChange,\n  lastFrozenColumnIndex,\n  selectedCellIdx,\n  selectCell,\n  shouldFocusGrid\n}: HeaderRowProps<R, SR, K>) {\n  const cells = [];\n  for (let index = 0; index < columns.length; index++) {\n    const column = columns[index];\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'HEADER' });\n    if (colSpan !== undefined) {\n      index += colSpan - 1;\n    }\n\n    cells.push(\n      <HeaderCell<R, SR>\n        key={column.key}\n        column={column}\n        colSpan={colSpan}\n        isCellSelected={selectedCellIdx === column.idx}\n        onColumnResize={onColumnResize}\n        allRowsSelected={allRowsSelected}\n        onAllRowsSelectionChange={onAllRowsSelectionChange}\n        onSortColumnsChange={onSortColumnsChange}\n        sortColumns={sortColumns}\n        selectCell={selectCell}\n        shouldFocusGrid={shouldFocusGrid && index === 0}\n      />\n    );\n  }\n\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={1} // aria-rowindex is 1 based\n      className={clsx(headerRowClassname, {\n        [rowSelectedClassname]: selectedCellIdx === -1\n      })}\n      style={getRowStyle(1)}\n    >\n      {cells}\n    </div>\n  );\n}\n\nexport default memo(HeaderRow) as <R, SR, K extends React.Key>(\n  props: HeaderRowProps<R, SR, K>\n) => JSX.Element;\n","import type { CalculatedColumn, Position, GroupRow, CellNavigationMode, Maybe } from '../types';\nimport { getColSpan } from './colSpanUtils';\n\ninterface IsSelectedCellEditableOpts<R, SR> {\n  selectedPosition: Position;\n  columns: readonly CalculatedColumn<R, SR>[];\n  rows: readonly (R | GroupRow<R>)[];\n  isGroupRow: (row: R | GroupRow<R>) => row is GroupRow<R>;\n}\n\nexport function isSelectedCellEditable<R, SR>({\n  selectedPosition,\n  columns,\n  rows,\n  isGroupRow\n}: IsSelectedCellEditableOpts<R, SR>): boolean {\n  const column = columns[selectedPosition.idx];\n  const row = rows[selectedPosition.rowIdx];\n  return !isGroupRow(row) && isCellEditable(column, row);\n}\n\nexport function isCellEditable<R, SR>(column: CalculatedColumn<R, SR>, row: R): boolean {\n  return (\n    column.editor != null &&\n    !column.rowGroup &&\n    (typeof column.editable === 'function' ? column.editable(row) : column.editable) !== false\n  );\n}\n\ninterface GetNextSelectedCellPositionOpts<R, SR> {\n  cellNavigationMode: CellNavigationMode;\n  columns: readonly CalculatedColumn<R, SR>[];\n  colSpanColumns: readonly CalculatedColumn<R, SR>[];\n  rows: readonly (R | GroupRow<R>)[];\n  summaryRows: Maybe<readonly SR[]>;\n  minRowIdx: number;\n  maxRowIdx: number;\n  currentPosition: Position;\n  nextPosition: Position;\n  lastFrozenColumnIndex: number;\n  isCellWithinBounds: (position: Position) => boolean;\n  isGroupRow: (row: R | GroupRow<R>) => row is GroupRow<R>;\n}\n\nexport function getSelectedCellColSpan<R, SR>({\n  rows,\n  summaryRows,\n  rowIdx,\n  lastFrozenColumnIndex,\n  column,\n  isGroupRow\n}: Pick<\n  GetNextSelectedCellPositionOpts<R, SR>,\n  'rows' | 'summaryRows' | 'isGroupRow' | 'lastFrozenColumnIndex'\n> & {\n  rowIdx: number;\n  column: CalculatedColumn<R, SR>;\n}) {\n  if (rowIdx === -1) {\n    return getColSpan(column, lastFrozenColumnIndex, { type: 'HEADER' });\n  }\n\n  if (rowIdx >= 0 && rowIdx < rows.length) {\n    const row = rows[rowIdx];\n    if (!isGroupRow(row)) {\n      return getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row });\n    }\n    return undefined;\n  }\n\n  if (summaryRows) {\n    return getColSpan(column, lastFrozenColumnIndex, {\n      type: 'SUMMARY',\n      row: summaryRows[rowIdx - rows.length]\n    });\n  }\n\n  return undefined;\n}\n\nexport function getNextSelectedCellPosition<R, SR>({\n  cellNavigationMode,\n  columns,\n  colSpanColumns,\n  rows,\n  summaryRows,\n  minRowIdx,\n  maxRowIdx,\n  currentPosition: { idx: currentIdx },\n  nextPosition,\n  lastFrozenColumnIndex,\n  isCellWithinBounds,\n  isGroupRow\n}: GetNextSelectedCellPositionOpts<R, SR>): Position {\n  let { idx: nextIdx, rowIdx: nextRowIdx } = nextPosition;\n\n  const setColSpan = (moveRight: boolean) => {\n    if (nextRowIdx >= 0 && nextRowIdx < rows.length) {\n      const row = rows[nextRowIdx];\n      if (isGroupRow(row)) return;\n    }\n    // If a cell within the colspan range is selected then move to the\n    // previous or the next cell depending on the navigation direction\n    for (const column of colSpanColumns) {\n      const colIdx = column.idx;\n      if (colIdx > nextIdx) break;\n      const colSpan = getSelectedCellColSpan({\n        rows,\n        summaryRows,\n        rowIdx: nextRowIdx,\n        lastFrozenColumnIndex,\n        column,\n        isGroupRow\n      });\n\n      if (colSpan && nextIdx > colIdx && nextIdx < colSpan + colIdx) {\n        nextIdx = colIdx + (moveRight ? colSpan : 0);\n        break;\n      }\n    }\n  };\n\n  if (isCellWithinBounds(nextPosition)) {\n    setColSpan(nextIdx - currentIdx > 0);\n  }\n\n  if (cellNavigationMode !== 'NONE') {\n    const columnsCount = columns.length;\n    const isAfterLastColumn = nextIdx === columnsCount;\n    const isBeforeFirstColumn = nextIdx === -1;\n\n    if (isAfterLastColumn) {\n      if (cellNavigationMode === 'CHANGE_ROW') {\n        const isLastRow = nextRowIdx === maxRowIdx;\n        if (!isLastRow) {\n          nextIdx = 0;\n          nextRowIdx += 1;\n        }\n      } else {\n        nextIdx = 0;\n      }\n    } else if (isBeforeFirstColumn) {\n      if (cellNavigationMode === 'CHANGE_ROW') {\n        const isFirstRow = nextRowIdx === minRowIdx;\n        if (!isFirstRow) {\n          nextRowIdx -= 1;\n          nextIdx = columnsCount - 1;\n        }\n      } else {\n        nextIdx = columnsCount - 1;\n      }\n      setColSpan(false);\n    }\n  }\n\n  return { idx: nextIdx, rowIdx: nextRowIdx };\n}\n\ninterface CanExitGridOpts {\n  cellNavigationMode: CellNavigationMode;\n  maxColIdx: number;\n  minRowIdx: number;\n  maxRowIdx: number;\n  selectedPosition: Position;\n  shiftKey: boolean;\n}\n\nexport function canExitGrid({\n  cellNavigationMode,\n  maxColIdx,\n  minRowIdx,\n  maxRowIdx,\n  selectedPosition: { rowIdx, idx },\n  shiftKey\n}: CanExitGridOpts): boolean {\n  // When the cellNavigationMode is 'none' or 'changeRow', you can exit the grid if you're at the first or last cell of the grid\n  // When the cellNavigationMode is 'loopOverRow', there is no logical exit point so you can't exit the grid\n  if (cellNavigationMode === 'NONE' || cellNavigationMode === 'CHANGE_ROW') {\n    const atLastCellInRow = idx === maxColIdx;\n    const atFirstCellInRow = idx === 0;\n    const atLastRow = rowIdx === maxRowIdx;\n    const atFirstRow = rowIdx === minRowIdx;\n\n    return shiftKey ? atFirstCellInRow && atFirstRow : atLastCellInRow && atLastRow;\n  }\n\n  return false;\n}\n","import { memo } from 'react';\nimport { css } from '@linaria/core';\n\nimport { getCellStyle, getCellClassname, isCellEditable } from './utils';\nimport type { CellRendererProps } from './types';\nimport { useRovingCellRef } from './hooks';\n\nconst cellCopied = css`\n  background-color: #ccccff;\n`;\n\nconst cellCopiedClassname = `rdg-cell-copied ${cellCopied}`;\n\nconst cellDraggedOver = css`\n  background-color: #ccccff;\n\n  &.${cellCopied} {\n    background-color: #9999ff;\n  }\n`;\n\nconst cellDraggedOverClassname = `rdg-cell-dragged-over ${cellDraggedOver}`;\n\nfunction Cell<R, SR>({\n  column,\n  colSpan,\n  isCellSelected,\n  isCopied,\n  isDraggedOver,\n  row,\n  dragHandle,\n  onRowClick,\n  onRowDoubleClick,\n  onRowChange,\n  selectCell,\n  ...props\n}: CellRendererProps<R, SR>) {\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected);\n\n  const { cellClass } = column;\n  const className = getCellClassname(\n    column,\n    {\n      [cellCopiedClassname]: isCopied,\n      [cellDraggedOverClassname]: isDraggedOver\n    },\n    typeof cellClass === 'function' ? cellClass(row) : cellClass\n  );\n\n  function selectCellWrapper(openEditor?: boolean | null) {\n    selectCell(row, column, openEditor);\n  }\n\n  function handleClick() {\n    selectCellWrapper(column.editorOptions?.editOnClick);\n    onRowClick?.(row, column);\n  }\n\n  function handleContextMenu() {\n    selectCellWrapper();\n  }\n\n  function handleDoubleClick() {\n    selectCellWrapper(true);\n    onRowDoubleClick?.(row, column);\n  }\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1} // aria-colindex is 1-based\n      aria-selected={isCellSelected}\n      aria-colspan={colSpan}\n      aria-readonly={!isCellEditable(column, row) || undefined}\n      ref={ref}\n      tabIndex={tabIndex}\n      className={className}\n      style={getCellStyle(column, colSpan)}\n      onClick={handleClick}\n      onDoubleClick={handleDoubleClick}\n      onContextMenu={handleContextMenu}\n      onFocus={onFocus}\n      {...props}\n    >\n      {!column.rowGroup && (\n        <>\n          <column.formatter\n            column={column}\n            row={row}\n            isCellSelected={isCellSelected}\n            onRowChange={onRowChange}\n          />\n          {dragHandle}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Cell) as <R, SR>(props: CellRendererProps<R, SR>) => JSX.Element;\n","import { memo, forwardRef } from 'react';\nimport type { RefAttributes } from 'react';\nimport clsx from 'clsx';\n\nimport Cell from './Cell';\nimport { RowSelectionProvider, useLatestFunc } from './hooks';\nimport { getColSpan, getRowStyle } from './utils';\nimport { rowClassname, rowSelectedClassname } from './style';\nimport type { RowRendererProps } from './types';\n\nfunction Row<R, SR>(\n  {\n    className,\n    rowIdx,\n    gridRowStart,\n    height,\n    selectedCellIdx,\n    isRowSelected,\n    copiedCellIdx,\n    draggedOverCellIdx,\n    lastFrozenColumnIndex,\n    row,\n    viewportColumns,\n    selectedCellEditor,\n    selectedCellDragHandle,\n    onRowClick,\n    onRowDoubleClick,\n    rowClass,\n    setDraggedOverRowIdx,\n    onMouseEnter,\n    onRowChange,\n    selectCell,\n    ...props\n  }: RowRendererProps<R, SR>,\n  ref: React.Ref<HTMLDivElement>\n) {\n  const handleRowChange = useLatestFunc((newRow: R) => {\n    onRowChange(rowIdx, newRow);\n  });\n\n  function handleDragEnter(event: React.MouseEvent<HTMLDivElement>) {\n    setDraggedOverRowIdx?.(rowIdx);\n    onMouseEnter?.(event);\n  }\n\n  className = clsx(\n    rowClassname,\n    `rdg-row-${rowIdx % 2 === 0 ? 'even' : 'odd'}`,\n    {\n      [rowSelectedClassname]: selectedCellIdx === -1\n    },\n    rowClass?.(row),\n    className\n  );\n\n  const cells = [];\n\n  for (let index = 0; index < viewportColumns.length; index++) {\n    const column = viewportColumns[index];\n    const { idx } = column;\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row });\n    if (colSpan !== undefined) {\n      index += colSpan - 1;\n    }\n\n    const isCellSelected = selectedCellIdx === idx;\n\n    if (isCellSelected && selectedCellEditor) {\n      cells.push(selectedCellEditor);\n    } else {\n      cells.push(\n        <Cell\n          key={column.key}\n          column={column}\n          colSpan={colSpan}\n          row={row}\n          isCopied={copiedCellIdx === idx}\n          isDraggedOver={draggedOverCellIdx === idx}\n          isCellSelected={isCellSelected}\n          dragHandle={isCellSelected ? selectedCellDragHandle : undefined}\n          onRowClick={onRowClick}\n          onRowDoubleClick={onRowDoubleClick}\n          onRowChange={handleRowChange}\n          selectCell={selectCell}\n        />\n      );\n    }\n  }\n\n  return (\n    <RowSelectionProvider value={isRowSelected}>\n      <div\n        role=\"row\"\n        ref={ref}\n        className={className}\n        onMouseEnter={handleDragEnter}\n        style={getRowStyle(gridRowStart, height)}\n        {...props}\n      >\n        {cells}\n      </div>\n    </RowSelectionProvider>\n  );\n}\n\nexport default memo(forwardRef(Row)) as <R, SR>(\n  props: RowRendererProps<R, SR> & RefAttributes<HTMLDivElement>\n) => JSX.Element;\n","import { memo } from 'react';\n\nimport { getCellStyle, getCellClassname } from './utils';\nimport type { CalculatedColumn, GroupRow } from './types';\nimport type { GroupRowRendererProps } from './GroupRow';\nimport { useRovingCellRef } from './hooks';\n\ntype SharedGroupRowRendererProps<R, SR> = Pick<\n  GroupRowRendererProps<R, SR>,\n  'id' | 'groupKey' | 'childRows' | 'isExpanded' | 'toggleGroup'\n>;\n\ninterface GroupCellProps<R, SR> extends SharedGroupRowRendererProps<R, SR> {\n  column: CalculatedColumn<R, SR>;\n  row: GroupRow<R>;\n  isCellSelected: boolean;\n  groupColumnIndex: number;\n}\n\nfunction GroupCell<R, SR>({\n  id,\n  groupKey,\n  childRows,\n  isExpanded,\n  isCellSelected,\n  column,\n  row,\n  groupColumnIndex,\n  toggleGroup: toggleGroupWrapper\n}: GroupCellProps<R, SR>) {\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected);\n\n  function toggleGroup() {\n    toggleGroupWrapper(id);\n  }\n\n  // Only make the cell clickable if the group level matches\n  const isLevelMatching = column.rowGroup && groupColumnIndex === column.idx;\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1}\n      aria-selected={isCellSelected}\n      ref={ref}\n      tabIndex={tabIndex}\n      key={column.key}\n      className={getCellClassname(column)}\n      style={{\n        ...getCellStyle(column),\n        cursor: isLevelMatching ? 'pointer' : 'default'\n      }}\n      onClick={isLevelMatching ? toggleGroup : undefined}\n      onFocus={onFocus}\n    >\n      {(!column.rowGroup || groupColumnIndex === column.idx) && column.groupFormatter && (\n        <column.groupFormatter\n          groupKey={groupKey}\n          childRows={childRows}\n          column={column}\n          row={row}\n          isExpanded={isExpanded}\n          isCellSelected={isCellSelected}\n          toggleGroup={toggleGroup}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(GroupCell) as <R, SR>(props: GroupCellProps<R, SR>) => JSX.Element;\n","import { memo } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport { cell, cellFrozenLast, rowClassname, rowSelectedClassname } from './style';\nimport { SELECT_COLUMN_KEY } from './Columns';\nimport GroupCell from './GroupCell';\nimport type { CalculatedColumn, GroupRow, Omit } from './types';\nimport { RowSelectionProvider } from './hooks';\nimport { getRowStyle } from './utils';\n\nexport interface GroupRowRendererProps<R, SR>\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, 'style' | 'children'> {\n  id: string;\n  groupKey: unknown;\n  viewportColumns: readonly CalculatedColumn<R, SR>[];\n  childRows: readonly R[];\n  rowIdx: number;\n  row: GroupRow<R>;\n  gridRowStart: number;\n  height: number;\n  level: number;\n  selectedCellIdx: number | undefined;\n  isExpanded: boolean;\n  isRowSelected: boolean;\n  selectGroup: (rowIdx: number) => void;\n  toggleGroup: (expandedGroupId: unknown) => void;\n}\n\nconst groupRow = css`\n  &:not([aria-selected='true']) {\n    background-color: var(--rdg-header-background-color);\n  }\n\n  > .${cell}:not(:last-child):not(.${cellFrozenLast}) {\n    border-right: none;\n  }\n`;\n\nconst groupRowClassname = `rdg-group-row ${groupRow}`;\n\nfunction GroupedRow<R, SR>({\n  id,\n  groupKey,\n  viewportColumns,\n  childRows,\n  rowIdx,\n  row,\n  gridRowStart,\n  height,\n  level,\n  isExpanded,\n  selectedCellIdx,\n  isRowSelected,\n  selectGroup,\n  toggleGroup,\n  ...props\n}: GroupRowRendererProps<R, SR>) {\n  // Select is always the first column\n  const idx = viewportColumns[0].key === SELECT_COLUMN_KEY ? level + 1 : level;\n\n  function handleSelectGroup() {\n    selectGroup(rowIdx);\n  }\n\n  return (\n    <RowSelectionProvider value={isRowSelected}>\n      <div\n        role=\"row\"\n        aria-level={level}\n        aria-expanded={isExpanded}\n        className={clsx(\n          rowClassname,\n          groupRowClassname,\n          `rdg-row-${rowIdx % 2 === 0 ? 'even' : 'odd'}`,\n          {\n            [rowSelectedClassname]: selectedCellIdx === -1\n          }\n        )}\n        onClick={handleSelectGroup}\n        style={getRowStyle(gridRowStart, height)}\n        {...props}\n      >\n        {viewportColumns.map((column) => (\n          <GroupCell\n            key={column.key}\n            id={id}\n            groupKey={groupKey}\n            childRows={childRows}\n            isExpanded={isExpanded}\n            isCellSelected={selectedCellIdx === column.idx}\n            column={column}\n            row={row}\n            groupColumnIndex={idx}\n            toggleGroup={toggleGroup}\n          />\n        ))}\n      </div>\n    </RowSelectionProvider>\n  );\n}\n\nexport default memo(GroupedRow) as <R, SR>(props: GroupRowRendererProps<R, SR>) => JSX.Element;\n","import { memo } from 'react';\nimport { css } from '@linaria/core';\n\nimport { getCellStyle, getCellClassname } from './utils';\nimport type { CalculatedColumn, CellRendererProps } from './types';\nimport { useRovingCellRef } from './hooks';\n\nexport const summaryCellClassname = css`\n  top: var(--rdg-summary-row-top);\n  bottom: var(--rdg-summary-row-bottom);\n`;\n\ninterface SharedCellRendererProps<R, SR>\n  extends Pick<CellRendererProps<R, SR>, 'column' | 'colSpan' | 'isCellSelected'> {\n  selectCell: (row: SR, column: CalculatedColumn<R, SR>) => void;\n}\n\ninterface SummaryCellProps<R, SR> extends SharedCellRendererProps<R, SR> {\n  row: SR;\n}\n\nfunction SummaryCell<R, SR>({\n  column,\n  colSpan,\n  row,\n  isCellSelected,\n  selectCell\n}: SummaryCellProps<R, SR>) {\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected);\n  const { summaryFormatter: SummaryFormatter, summaryCellClass } = column;\n  const className = getCellClassname(\n    column,\n    summaryCellClassname,\n    typeof summaryCellClass === 'function' ? summaryCellClass(row) : summaryCellClass\n  );\n\n  function onClick() {\n    selectCell(row, column);\n  }\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1}\n      aria-colspan={colSpan}\n      aria-selected={isCellSelected}\n      ref={ref}\n      tabIndex={tabIndex}\n      className={className}\n      style={getCellStyle(column, colSpan)}\n      onClick={onClick}\n      onFocus={onFocus}\n    >\n      {SummaryFormatter && (\n        <SummaryFormatter column={column} row={row} isCellSelected={isCellSelected} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(SummaryCell) as <R, SR>(props: SummaryCellProps<R, SR>) => JSX.Element;\n","import { memo } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport { cell, row, rowClassname, rowSelectedClassname } from './style';\nimport { getColSpan, getRowStyle } from './utils';\nimport SummaryCell from './SummaryCell';\nimport type { CalculatedColumn, RowRendererProps } from './types';\n\ntype SharedRowRendererProps<R, SR> = Pick<RowRendererProps<R, SR>, 'viewportColumns' | 'rowIdx'>;\n\ninterface SummaryRowProps<R, SR> extends SharedRowRendererProps<R, SR> {\n  'aria-rowindex': number;\n  row: SR;\n  top: number | undefined;\n  bottom: number | undefined;\n  lastFrozenColumnIndex: number;\n  selectedCellIdx: number | undefined;\n  selectCell: (row: SR, column: CalculatedColumn<R, SR>) => void;\n}\n\nconst summaryRow = css`\n  line-height: var(--rdg-summary-row-height);\n\n  &.${row} > .${cell} {\n    position: sticky;\n  }\n`;\n\nconst summaryRowBorderClassname = css`\n  & > .${cell} {\n    border-top: 2px solid var(--rdg-summary-border-color);\n  }\n`;\n\nconst summaryRowClassname = `rdg-summary-row ${summaryRow}`;\n\nfunction SummaryRow<R, SR>({\n  rowIdx,\n  row,\n  viewportColumns,\n  top,\n  bottom,\n  lastFrozenColumnIndex,\n  selectedCellIdx,\n  selectCell,\n  'aria-rowindex': ariaRowIndex\n}: SummaryRowProps<R, SR>) {\n  const cells = [];\n  for (let index = 0; index < viewportColumns.length; index++) {\n    const column = viewportColumns[index];\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'SUMMARY', row });\n    if (colSpan !== undefined) {\n      index += colSpan - 1;\n    }\n\n    const isCellSelected = selectedCellIdx === column.idx;\n\n    cells.push(\n      <SummaryCell<R, SR>\n        key={column.key}\n        column={column}\n        colSpan={colSpan}\n        row={row}\n        isCellSelected={isCellSelected}\n        selectCell={selectCell}\n      />\n    );\n  }\n\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={ariaRowIndex}\n      className={clsx(\n        rowClassname,\n        `rdg-row-${rowIdx % 2 === 0 ? 'even' : 'odd'}`,\n        summaryRowClassname,\n        { [summaryRowBorderClassname]: rowIdx === 0 },\n        {\n          [rowSelectedClassname]: selectedCellIdx === -1\n        }\n      )}\n      style={\n        {\n          ...getRowStyle(ariaRowIndex),\n          '--rdg-summary-row-top': top !== undefined ? `${top}px` : undefined,\n          '--rdg-summary-row-bottom': bottom !== undefined ? `${bottom}px` : undefined\n        } as unknown as React.CSSProperties\n      }\n    >\n      {cells}\n    </div>\n  );\n}\n\nexport default memo(SummaryRow) as <R, SR>(props: SummaryRowProps<R, SR>) => JSX.Element;\n","// https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\nconst nonInputKeys = new Set([\n  // Special keys\n  'Unidentified',\n  // Modifier keys\n  'Alt',\n  'AltGraph',\n  'CapsLock',\n  'Control',\n  'Fn',\n  'FnLock',\n  'Meta',\n  'NumLock',\n  'ScrollLock',\n  'Shift',\n  // Whitespace keys\n  'Tab',\n  // Navigation keys\n  'ArrowDown',\n  'ArrowLeft',\n  'ArrowRight',\n  'ArrowUp',\n  'End',\n  'Home',\n  'PageDown',\n  'PageUp',\n  // Editing\n  'Insert',\n  // UI keys\n  'ContextMenu',\n  'Escape',\n  'Pause',\n  'Play',\n  // Device keys\n  'PrintScreen',\n  // Function keys\n  'F1',\n  // 'F2', /!\\ specifically allowed, do not edit\n  'F3',\n  'F4',\n  'F5',\n  'F6',\n  'F7',\n  'F8',\n  'F9',\n  'F10',\n  'F11',\n  'F12'\n]);\n\nexport function isCtrlKeyHeldDown(e: React.KeyboardEvent): boolean {\n  return (e.ctrlKey || e.metaKey) && e.key !== 'Control';\n}\n\nexport function isDefaultCellInput(event: React.KeyboardEvent<HTMLDivElement>): boolean {\n  return !nonInputKeys.has(event.key);\n}\n\n/**\n * By default, the following navigation keys are enabled while an editor is open, under specific conditions:\n * - Tab:\n *   - The editor must be an <input>, a <textarea>, or a <select> element.\n *   - The editor element must be the only immediate child of the editor container/a label.\n */\nexport function onEditorNavigation({ key, target }: React.KeyboardEvent<HTMLDivElement>): boolean {\n  if (\n    key === 'Tab' &&\n    (target instanceof HTMLInputElement ||\n      target instanceof HTMLTextAreaElement ||\n      target instanceof HTMLSelectElement)\n  ) {\n    return target.matches(\n      '.rdg-editor-container > :only-child, .rdg-editor-container > label:only-child > :only-child'\n    );\n  }\n  return false;\n}\n","import { useEffect, useRef } from 'react';\nimport { css } from '@linaria/core';\n\nimport { useLatestFunc } from './hooks';\nimport { getCellStyle, getCellClassname, onEditorNavigation } from './utils';\nimport type { CellRendererProps, EditorProps, Omit } from './types';\n\n/*\n * To check for outside `mousedown` events, we listen to all `mousedown` events at their birth,\n * i.e. on the window during the capture phase, and at their death, i.e. on the window during the bubble phase.\n *\n * We schedule a check at the birth of the event, cancel the check when the event reaches the \"inside\" container,\n * and trigger the \"outside\" callback when the event bubbles back up to the window.\n *\n * The event can be `stopPropagation()`ed halfway through, so they may not always bubble back up to the window,\n * so an alternative check must be used. The check must happen after the event can reach the \"inside\" container,\n * and not before it run to completion. `requestAnimationFrame` is the best way we know how to achieve this.\n * Usually we want click event handlers from parent components to access the latest commited values,\n * so `mousedown` is used instead of `click`.\n *\n * We must also rely on React's event capturing/bubbling to handle elements rendered in a portal.\n */\n\nconst cellEditing = css`\n  &.rdg-cell {\n    padding: 0;\n  }\n`;\n\ntype SharedCellRendererProps<R, SR> = Pick<CellRendererProps<R, SR>, 'colSpan'>;\n\ninterface EditCellProps<R, SR>\n  extends Omit<EditorProps<R, SR>, 'onClose'>,\n    SharedCellRendererProps<R, SR> {\n  closeEditor: () => void;\n  scrollToCell: () => void;\n}\n\nexport default function EditCell<R, SR>({\n  column,\n  colSpan,\n  row,\n  onRowChange,\n  closeEditor,\n  scrollToCell\n}: EditCellProps<R, SR>) {\n  const frameRequestRef = useRef<number | undefined>();\n  const commitOnOutsideClick = column.editorOptions?.commitOnOutsideClick !== false;\n\n  // We need to prevent the `useEffect` from cleaning up between re-renders,\n  // as `onWindowCaptureMouseDown` might otherwise miss valid mousedown events.\n  // To that end we instead access the latest props via useLatestFunc.\n  const commitOnOutsideMouseDown = useLatestFunc(() => {\n    onClose(true);\n  });\n\n  useEffect(() => {\n    if (!commitOnOutsideClick) return;\n\n    function onWindowCaptureMouseDown() {\n      frameRequestRef.current = requestAnimationFrame(commitOnOutsideMouseDown);\n    }\n\n    addEventListener('mousedown', onWindowCaptureMouseDown, { capture: true });\n\n    return () => {\n      removeEventListener('mousedown', onWindowCaptureMouseDown, { capture: true });\n      cancelFrameRequest();\n    };\n  }, [commitOnOutsideClick, commitOnOutsideMouseDown]);\n\n  function cancelFrameRequest() {\n    cancelAnimationFrame(frameRequestRef.current!);\n  }\n\n  function onKeyDown(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (event.key === 'Escape') {\n      event.stopPropagation();\n      // Discard changes\n      onClose();\n    } else if (event.key === 'Enter') {\n      event.stopPropagation();\n      onClose(true);\n      scrollToCell();\n    } else {\n      const onNavigation = column.editorOptions?.onNavigation ?? onEditorNavigation;\n      if (!onNavigation(event)) {\n        event.stopPropagation();\n      }\n    }\n  }\n\n  function onClose(commitChanges?: boolean) {\n    if (commitChanges) {\n      onRowChange(row, true);\n    } else {\n      closeEditor();\n    }\n  }\n\n  const { cellClass } = column;\n  const className = getCellClassname(\n    column,\n    'rdg-editor-container',\n    !column.editorOptions?.renderFormatter && cellEditing,\n    typeof cellClass === 'function' ? cellClass(row) : cellClass\n  );\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1} // aria-colindex is 1-based\n      aria-colspan={colSpan}\n      aria-selected\n      className={className}\n      style={getCellStyle(column, colSpan)}\n      onKeyDown={onKeyDown}\n      onMouseDownCapture={commitOnOutsideClick ? cancelFrameRequest : undefined}\n    >\n      {column.editor != null && (\n        <>\n          <column.editor column={column} row={row} onRowChange={onRowChange} onClose={onClose} />\n          {column.editorOptions?.renderFormatter && (\n            <column.formatter column={column} row={row} isCellSelected onRowChange={onRowChange} />\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","import { css } from '@linaria/core';\n\nimport type { CalculatedColumn, FillEvent, Position } from './types';\nimport type { DataGridProps, SelectCellState } from './DataGrid';\n\nconst cellDragHandle = css`\n  cursor: move;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 8px;\n  height: 8px;\n  background-color: var(--rdg-selection-color);\n\n  &:hover {\n    width: 16px;\n    height: 16px;\n    border: 2px solid var(--rdg-selection-color);\n    background-color: var(--rdg-background-color);\n  }\n`;\n\nconst cellDragHandleClassname = `rdg-cell-drag-handle ${cellDragHandle}`;\n\ninterface Props<R, SR> extends Pick<DataGridProps<R, SR>, 'rows' | 'onRowsChange'> {\n  columns: readonly CalculatedColumn<R, SR>[];\n  selectedPosition: SelectCellState;\n  latestDraggedOverRowIdx: React.MutableRefObject<number | undefined>;\n  isCellEditable: (position: Position) => boolean;\n  onFill: (event: FillEvent<R>) => R;\n  setDragging: (isDragging: boolean) => void;\n  setDraggedOverRowIdx: (overRowIdx: number | undefined) => void;\n}\n\nexport default function DragHandle<R, SR>({\n  rows,\n  columns,\n  selectedPosition,\n  latestDraggedOverRowIdx,\n  isCellEditable,\n  onRowsChange,\n  onFill,\n  setDragging,\n  setDraggedOverRowIdx\n}: Props<R, SR>) {\n  function handleMouseDown(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n    if (event.buttons !== 1) return;\n    setDragging(true);\n    window.addEventListener('mouseover', onMouseOver);\n    window.addEventListener('mouseup', onMouseUp);\n\n    function onMouseOver(event: MouseEvent) {\n      // Trigger onMouseup in edge cases where we release the mouse button but `mouseup` isn't triggered,\n      // for example when releasing the mouse button outside the iframe the grid is rendered in.\n      // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n      if (event.buttons !== 1) onMouseUp();\n    }\n\n    function onMouseUp() {\n      window.removeEventListener('mouseover', onMouseOver);\n      window.removeEventListener('mouseup', onMouseUp);\n      setDragging(false);\n      handleDragEnd();\n    }\n  }\n\n  function handleDragEnd() {\n    const overRowIdx = latestDraggedOverRowIdx.current;\n    if (overRowIdx === undefined) return;\n\n    const { rowIdx } = selectedPosition;\n    const startRowIndex = rowIdx < overRowIdx ? rowIdx + 1 : overRowIdx;\n    const endRowIndex = rowIdx < overRowIdx ? overRowIdx + 1 : rowIdx;\n    updateRows(startRowIndex, endRowIndex);\n    setDraggedOverRowIdx(undefined);\n  }\n\n  function handleDoubleClick(event: React.MouseEvent<HTMLDivElement>) {\n    event.stopPropagation();\n    updateRows(selectedPosition.rowIdx + 1, rows.length);\n  }\n\n  function updateRows(startRowIdx: number, endRowIdx: number) {\n    const { idx, rowIdx } = selectedPosition;\n    const column = columns[idx];\n    const sourceRow = rows[rowIdx];\n    const updatedRows = [...rows];\n    const indexes: number[] = [];\n    for (let i = startRowIdx; i < endRowIdx; i++) {\n      if (isCellEditable({ rowIdx: i, idx })) {\n        const updatedRow = onFill({ columnKey: column.key, sourceRow, targetRow: rows[i] });\n        if (updatedRow !== rows[i]) {\n          updatedRows[i] = updatedRow;\n          indexes.push(i);\n        }\n      }\n    }\n\n    if (indexes.length > 0) {\n      onRowsChange?.(updatedRows, { indexes, column });\n    }\n  }\n\n  return (\n    <div\n      className={cellDragHandleClassname}\n      onMouseDown={handleMouseDown}\n      onDoubleClick={handleDoubleClick}\n    />\n  );\n}\n","import { forwardRef, useState, useRef, useImperativeHandle, useCallback, useMemo } from 'react';\nimport type { Key, RefAttributes } from 'react';\nimport clsx from 'clsx';\n\nimport {\n  rootClassname,\n  viewportDraggingClassname,\n  focusSinkClassname,\n  cellAutoResizeClassname\n} from './style';\nimport {\n  useLayoutEffect,\n  useGridDimensions,\n  useCalculatedColumns,\n  useViewportColumns,\n  useViewportRows,\n  useLatestFunc,\n  RowSelectionChangeProvider\n} from './hooks';\nimport HeaderRow from './HeaderRow';\nimport Row from './Row';\nimport GroupRowRenderer from './GroupRow';\nimport SummaryRow from './SummaryRow';\nimport EditCell from './EditCell';\nimport DragHandle from './DragHandle';\nimport {\n  assertIsValidKeyGetter,\n  getNextSelectedCellPosition,\n  isSelectedCellEditable,\n  canExitGrid,\n  isCtrlKeyHeldDown,\n  isDefaultCellInput,\n  getColSpan,\n  max,\n  sign,\n  getSelectedCellColSpan\n} from './utils';\n\nimport type {\n  CalculatedColumn,\n  Column,\n  Position,\n  RowRendererProps,\n  RowsChangeData,\n  SelectRowEvent,\n  FillEvent,\n  PasteEvent,\n  CellNavigationMode,\n  SortColumn,\n  RowHeightArgs,\n  Maybe\n} from './types';\n\nexport interface SelectCellState extends Position {\n  readonly mode: 'SELECT';\n}\n\ninterface EditCellState<R> extends Position {\n  readonly mode: 'EDIT';\n  readonly row: R;\n  readonly originalRow: R;\n}\n\ntype DefaultColumnOptions<R, SR> = Pick<\n  Column<R, SR>,\n  'formatter' | 'minWidth' | 'resizable' | 'sortable'\n>;\n\nconst initialPosition: SelectCellState = {\n  idx: -1,\n  rowIdx: -2,\n  mode: 'SELECT'\n};\n\nexport interface DataGridHandle {\n  element: HTMLDivElement | null;\n  scrollToColumn: (colIdx: number) => void;\n  scrollToRow: (rowIdx: number) => void;\n  selectCell: (position: Position, enableEditor?: Maybe<boolean>) => void;\n}\n\ntype SharedDivProps = Pick<\n  React.HTMLAttributes<HTMLDivElement>,\n  'aria-label' | 'aria-labelledby' | 'aria-describedby' | 'className' | 'style'\n>;\n\nexport interface DataGridProps<R, SR = unknown, K extends Key = Key> extends SharedDivProps {\n  /**\n   * Grid and data Props\n   */\n  /** An array of objects representing each column on the grid */\n  columns: readonly Column<R, SR>[];\n  /** A function called for each rendered row that should return a plain key/value pair object */\n  rows: readonly R[];\n  /**\n   * Rows to be pinned at the bottom of the rows view for summary, the vertical scroll bar will not scroll these rows.\n   * Bottom horizontal scroll bar can move the row left / right. Or a customized row renderer can be used to disabled the scrolling support.\n   */\n  summaryRows?: Maybe<readonly SR[]>;\n  /** The getter should return a unique key for each row */\n  rowKeyGetter?: Maybe<(row: R) => K>;\n  onRowsChange?: Maybe<(rows: R[], data: RowsChangeData<R, SR>) => void>;\n\n  /**\n   * Dimensions props\n   */\n  /**\n   * The height of each row in pixels\n   * @default 35\n   */\n  rowHeight?: Maybe<number | ((args: RowHeightArgs<R>) => number)>;\n  /**\n   * The height of the header row in pixels\n   * @default 35\n   */\n  headerRowHeight?: Maybe<number>;\n  /**\n   * The height of each summary row in pixels\n   * @default 35\n   */\n  summaryRowHeight?: Maybe<number>;\n\n  /**\n   * Feature props\n   */\n  /** Set of selected row keys */\n  selectedRows?: Maybe<ReadonlySet<K>>;\n  /** Function called whenever row selection is changed */\n  onSelectedRowsChange?: Maybe<(selectedRows: Set<K>) => void>;\n  /** Used for multi column sorting */\n  sortColumns?: Maybe<readonly SortColumn[]>;\n  onSortColumnsChange?: Maybe<(sortColumns: SortColumn[]) => void>;\n  defaultColumnOptions?: Maybe<DefaultColumnOptions<R, SR>>;\n  groupBy?: Maybe<readonly string[]>;\n  rowGrouper?: Maybe<(rows: readonly R[], columnKey: string) => Record<string, readonly R[]>>;\n  expandedGroupIds?: Maybe<ReadonlySet<unknown>>;\n  onExpandedGroupIdsChange?: Maybe<(expandedGroupIds: Set<unknown>) => void>;\n  onFill?: Maybe<(event: FillEvent<R>) => R>;\n  onPaste?: Maybe<(event: PasteEvent<R>) => R>;\n\n  /**\n   * Event props\n   */\n  /** Function called whenever a row is clicked */\n  onRowClick?: Maybe<(row: R, column: CalculatedColumn<R, SR>) => void>;\n  /** Function called whenever a row is double clicked */\n  onRowDoubleClick?: Maybe<(row: R, column: CalculatedColumn<R, SR>) => void>;\n  /** Called when the grid is scrolled */\n  onScroll?: Maybe<(event: React.UIEvent<HTMLDivElement>) => void>;\n  /** Called when a column is resized */\n  onColumnResize?: Maybe<(idx: number, width: number) => void>;\n\n  /**\n   * Toggles and modes\n   */\n  /** @default 'NONE' */\n  cellNavigationMode?: Maybe<CellNavigationMode>;\n  /** @default true */\n  enableVirtualization?: Maybe<boolean>;\n\n  /**\n   * Miscellaneous\n   */\n  rowRenderer?: Maybe<React.ComponentType<RowRendererProps<R, SR>>>;\n  noRowsFallback?: React.ReactNode;\n  rowClass?: Maybe<(row: R) => Maybe<string>>;\n  'data-testid'?: Maybe<string>;\n}\n\n/**\n * Main API Component to render a data grid of rows and columns\n *\n * @example\n *\n * <DataGrid columns={columns} rows={rows} />\n */\nfunction DataGrid<R, SR, K extends Key>(\n  {\n    // Grid and data Props\n    columns: rawColumns,\n    rows: rawRows,\n    summaryRows,\n    rowKeyGetter,\n    onRowsChange,\n    // Dimensions props\n    rowHeight,\n    headerRowHeight: rawHeaderRowHeight,\n    summaryRowHeight: rawSummaryRowHeight,\n    // Feature props\n    selectedRows,\n    onSelectedRowsChange,\n    sortColumns,\n    onSortColumnsChange,\n    defaultColumnOptions,\n    groupBy: rawGroupBy,\n    rowGrouper,\n    expandedGroupIds,\n    onExpandedGroupIdsChange,\n    // Event props\n    onRowClick,\n    onRowDoubleClick,\n    onScroll,\n    onColumnResize,\n    onFill,\n    onPaste,\n    // Toggles and modes\n    cellNavigationMode: rawCellNavigationMode,\n    enableVirtualization,\n    // Miscellaneous\n    rowRenderer,\n    noRowsFallback,\n    className,\n    style,\n    rowClass,\n    // ARIA\n    'aria-label': ariaLabel,\n    'aria-labelledby': ariaLabelledBy,\n    'aria-describedby': ariaDescribedBy,\n    'data-testid': testId\n  }: DataGridProps<R, SR, K>,\n  ref: React.Ref<DataGridHandle>\n) {\n  /**\n   * defaults\n   */\n  rowHeight ??= 35;\n  const headerRowHeight = rawHeaderRowHeight ?? (typeof rowHeight === 'number' ? rowHeight : 35);\n  const summaryRowHeight = rawSummaryRowHeight ?? (typeof rowHeight === 'number' ? rowHeight : 35);\n  const RowRenderer = rowRenderer ?? Row;\n  const cellNavigationMode = rawCellNavigationMode ?? 'NONE';\n  enableVirtualization ??= true;\n\n  /**\n   * states\n   */\n  const [scrollTop, setScrollTop] = useState(0);\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [columnWidths, setColumnWidths] = useState<ReadonlyMap<string, number>>(() => new Map());\n  const [selectedPosition, setSelectedPosition] = useState<SelectCellState | EditCellState<R>>(\n    initialPosition\n  );\n  const [copiedCell, setCopiedCell] = useState<{ row: R; columnKey: string } | null>(null);\n  const [isDragging, setDragging] = useState(false);\n  const [draggedOverRowIdx, setOverRowIdx] = useState<number | undefined>(undefined);\n  const [autoResizeColumn, setAutoResizeColumn] = useState<CalculatedColumn<R, SR> | null>(null);\n\n  /**\n   * refs\n   */\n  const prevSelectedPosition = useRef(selectedPosition);\n  const latestDraggedOverRowIdx = useRef(draggedOverRowIdx);\n  const lastSelectedRowIdx = useRef(-1);\n  const rowRef = useRef<HTMLDivElement>(null);\n\n  /**\n   * computed values\n   */\n  const [gridRef, gridWidth, gridHeight] = useGridDimensions();\n  const headerRowsCount = 1;\n  const summaryRowsCount = summaryRows?.length ?? 0;\n  const clientHeight = gridHeight - headerRowHeight - summaryRowsCount * summaryRowHeight;\n  const isSelectable = selectedRows != null && onSelectedRowsChange != null;\n  const isHeaderRowSelected = selectedPosition.rowIdx === -1;\n\n  const allRowsSelected = useMemo((): boolean => {\n    // no rows to select = explicitely unchecked\n    const { length } = rawRows;\n    return (\n      length !== 0 &&\n      selectedRows != null &&\n      rowKeyGetter != null &&\n      selectedRows.size >= length &&\n      rawRows.every((row) => selectedRows.has(rowKeyGetter(row)))\n    );\n  }, [rawRows, selectedRows, rowKeyGetter]);\n\n  const {\n    columns,\n    colSpanColumns,\n    colOverscanStartIdx,\n    colOverscanEndIdx,\n    layoutCssVars,\n    columnMetrics,\n    totalColumnWidth,\n    lastFrozenColumnIndex,\n    totalFrozenColumnWidth,\n    groupBy\n  } = useCalculatedColumns({\n    rawColumns,\n    columnWidths,\n    scrollLeft,\n    viewportWidth: gridWidth,\n    defaultColumnOptions,\n    rawGroupBy: rowGrouper ? rawGroupBy : undefined,\n    enableVirtualization\n  });\n\n  const {\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    rowsCount,\n    totalRowHeight,\n    gridTemplateRows,\n    isGroupRow,\n    getRowTop,\n    getRowHeight,\n    findRowIdx\n  } = useViewportRows({\n    rawRows,\n    groupBy,\n    rowGrouper,\n    rowHeight,\n    clientHeight,\n    scrollTop,\n    expandedGroupIds,\n    enableVirtualization\n  });\n\n  const viewportColumns = useViewportColumns({\n    columns,\n    colSpanColumns,\n    colOverscanStartIdx,\n    colOverscanEndIdx,\n    lastFrozenColumnIndex,\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    summaryRows,\n    isGroupRow\n  });\n\n  const hasGroups = groupBy.length > 0 && typeof rowGrouper === 'function';\n  const minColIdx = hasGroups ? -1 : 0;\n  const maxColIdx = columns.length - 1;\n  const minRowIdx = -1; // change it to 0?\n  const maxRowIdx = headerRowsCount + rows.length + summaryRowsCount - 2;\n  const selectedCellIsWithinSelectionBounds = isCellWithinSelectionBounds(selectedPosition);\n  const selectedCellIsWithinViewportBounds = isCellWithinViewportBounds(selectedPosition);\n\n  /**\n   * The identity of the wrapper function is stable so it won't break memoization\n   */\n  const selectRowLatest = useLatestFunc(selectRow);\n  const selectAllRowsLatest = useLatestFunc(selectAllRows);\n  const handleFormatterRowChangeLatest = useLatestFunc(updateRow);\n  const selectViewportCellLatest = useLatestFunc(\n    (row: R, column: CalculatedColumn<R, SR>, enableEditor: Maybe<boolean>) => {\n      const rowIdx = rows.indexOf(row);\n      selectCell({ rowIdx, idx: column.idx }, enableEditor);\n    }\n  );\n  const selectGroupLatest = useLatestFunc((rowIdx: number) => {\n    selectCell({ rowIdx, idx: -1 });\n  });\n  const selectHeaderCellLatest = useLatestFunc((idx: number) => {\n    selectCell({ rowIdx: -1, idx });\n  });\n  const selectSummaryCellLatest = useLatestFunc(\n    (summaryRow: SR, column: CalculatedColumn<R, SR>) => {\n      const rowIdx = summaryRows!.indexOf(summaryRow) + headerRowsCount + rows.length - 1;\n      selectCell({ rowIdx, idx: column.idx });\n    }\n  );\n  const toggleGroupLatest = useLatestFunc(toggleGroup);\n\n  /**\n   * effects\n   */\n  useLayoutEffect(() => {\n    if (\n      !selectedCellIsWithinSelectionBounds ||\n      isSamePosition(selectedPosition, prevSelectedPosition.current)\n    ) {\n      prevSelectedPosition.current = selectedPosition;\n      return;\n    }\n\n    prevSelectedPosition.current = selectedPosition;\n    scrollToCell(selectedPosition);\n\n    if (selectedPosition.idx === -1) {\n      rowRef.current!.focus({ preventScroll: true });\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (autoResizeColumn === null) return;\n    const columnElement = gridRef.current!.querySelector(\n      `[aria-colindex=\"${autoResizeColumn.idx + 1}\"]`\n    )!;\n    const width = columnElement.clientWidth + 2;\n    setColumnWidths((columnWidths) => {\n      const newColumnWidths = new Map(columnWidths);\n      newColumnWidths.set(autoResizeColumn.key, width);\n      return newColumnWidths;\n    });\n    setAutoResizeColumn(null);\n    onColumnResize?.(autoResizeColumn.idx, width);\n  }, [autoResizeColumn, gridRef, onColumnResize]);\n\n  useImperativeHandle(ref, () => ({\n    element: gridRef.current,\n    scrollToColumn(idx: number) {\n      scrollToCell({ idx });\n    },\n    scrollToRow(rowIdx: number) {\n      const { current } = gridRef;\n      if (!current) return;\n      current.scrollTo({\n        top: getRowTop(rowIdx),\n        behavior: 'smooth'\n      });\n    },\n    selectCell\n  }));\n\n  /**\n   * callbacks\n   */\n  const handleColumnResize = useCallback(\n    (column: CalculatedColumn<R, SR>, width: number | 'auto') => {\n      if (width === 'auto') {\n        setAutoResizeColumn(column);\n        return;\n      }\n      setColumnWidths((columnWidths) => {\n        const newColumnWidths = new Map(columnWidths);\n        newColumnWidths.set(column.key, width);\n        return newColumnWidths;\n      });\n\n      onColumnResize?.(column.idx, width);\n    },\n    [onColumnResize]\n  );\n\n  const setDraggedOverRowIdx = useCallback((rowIdx?: number) => {\n    setOverRowIdx(rowIdx);\n    latestDraggedOverRowIdx.current = rowIdx;\n  }, []);\n\n  /**\n   * event handlers\n   */\n  function selectRow({ row, checked, isShiftClick }: SelectRowEvent<R>) {\n    if (!onSelectedRowsChange) return;\n\n    assertIsValidKeyGetter<R, K>(rowKeyGetter);\n    const newSelectedRows = new Set(selectedRows);\n    if (isGroupRow(row)) {\n      for (const childRow of row.childRows) {\n        const rowKey = rowKeyGetter(childRow);\n        if (checked) {\n          newSelectedRows.add(rowKey);\n        } else {\n          newSelectedRows.delete(rowKey);\n        }\n      }\n      onSelectedRowsChange(newSelectedRows);\n      return;\n    }\n\n    const rowKey = rowKeyGetter(row);\n    if (checked) {\n      newSelectedRows.add(rowKey);\n      const previousRowIdx = lastSelectedRowIdx.current;\n      const rowIdx = rows.indexOf(row);\n      lastSelectedRowIdx.current = rowIdx;\n      if (isShiftClick && previousRowIdx !== -1 && previousRowIdx !== rowIdx) {\n        const step = sign(rowIdx - previousRowIdx);\n        for (let i = previousRowIdx + step; i !== rowIdx; i += step) {\n          const row = rows[i];\n          if (isGroupRow(row)) continue;\n          newSelectedRows.add(rowKeyGetter(row));\n        }\n      }\n    } else {\n      newSelectedRows.delete(rowKey);\n      lastSelectedRowIdx.current = -1;\n    }\n\n    onSelectedRowsChange(newSelectedRows);\n  }\n\n  function selectAllRows(checked: boolean) {\n    if (!onSelectedRowsChange) return;\n\n    assertIsValidKeyGetter<R, K>(rowKeyGetter);\n    const newSelectedRows = new Set(selectedRows);\n\n    for (const row of rawRows) {\n      const rowKey = rowKeyGetter(row);\n      if (checked) {\n        newSelectedRows.add(rowKey);\n      } else {\n        newSelectedRows.delete(rowKey);\n      }\n    }\n\n    onSelectedRowsChange(newSelectedRows);\n  }\n\n  function toggleGroup(expandedGroupId: unknown) {\n    if (!onExpandedGroupIdsChange) return;\n    const newExpandedGroupIds = new Set(expandedGroupIds);\n    if (newExpandedGroupIds.has(expandedGroupId)) {\n      newExpandedGroupIds.delete(expandedGroupId);\n    } else {\n      newExpandedGroupIds.add(expandedGroupId);\n    }\n    onExpandedGroupIdsChange(newExpandedGroupIds);\n  }\n\n  function handleKeyDown(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (!(event.target instanceof Element)) return;\n    const isCellEvent = event.target.closest('.rdg-cell') !== null;\n    const isRowEvent = hasGroups && event.target === rowRef.current;\n    if (!isCellEvent && !isRowEvent) return;\n\n    const { key, keyCode } = event;\n    const { rowIdx } = selectedPosition;\n\n    if (\n      selectedCellIsWithinViewportBounds &&\n      onPaste != null &&\n      isCtrlKeyHeldDown(event) &&\n      !isGroupRow(rows[rowIdx]) &&\n      selectedPosition.mode === 'SELECT'\n    ) {\n      // event.key may differ by keyboard input language, so we use event.keyCode instead\n      // event.nativeEvent.code cannot be used either as it would break copy/paste for the DVORAK layout\n      const cKey = 67;\n      const vKey = 86;\n      if (keyCode === cKey) {\n        handleCopy();\n        return;\n      }\n      if (keyCode === vKey) {\n        handlePaste();\n        return;\n      }\n    }\n\n    if (isRowIdxWithinViewportBounds(rowIdx)) {\n      const row = rows[rowIdx];\n\n      if (\n        isGroupRow(row) &&\n        selectedPosition.idx === -1 &&\n        // Collapse the current group row if it is focused and is in expanded state\n        ((key === 'ArrowLeft' && row.isExpanded) ||\n          // Expand the current group row if it is focused and is in collapsed state\n          (key === 'ArrowRight' && !row.isExpanded))\n      ) {\n        event.preventDefault(); // Prevents scrolling\n        toggleGroup(row.id);\n        return;\n      }\n    }\n\n    switch (event.key) {\n      case 'Escape':\n        setCopiedCell(null);\n        return;\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'Tab':\n      case 'Home':\n      case 'End':\n      case 'PageUp':\n      case 'PageDown':\n        navigate(event);\n        break;\n      default:\n        handleCellInput(event);\n        break;\n    }\n  }\n\n  function handleScroll(event: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop, scrollLeft } = event.currentTarget;\n    setScrollTop(scrollTop);\n    setScrollLeft(scrollLeft);\n    onScroll?.(event);\n  }\n\n  function getRawRowIdx(rowIdx: number) {\n    return hasGroups ? rawRows.indexOf(rows[rowIdx] as R) : rowIdx;\n  }\n\n  function updateRow(rowIdx: number, row: R) {\n    if (typeof onRowsChange !== 'function') return;\n    const rawRowIdx = getRawRowIdx(rowIdx);\n    if (row === rawRows[rawRowIdx]) return;\n    const updatedRows = [...rawRows];\n    updatedRows[rawRowIdx] = row;\n    onRowsChange(updatedRows, {\n      indexes: [rawRowIdx],\n      column: columns[selectedPosition.idx]\n    });\n  }\n\n  function commitEditorChanges() {\n    if (selectedPosition.mode !== 'EDIT') return;\n    updateRow(selectedPosition.rowIdx, selectedPosition.row);\n  }\n\n  function handleCopy() {\n    const { idx, rowIdx } = selectedPosition;\n    setCopiedCell({ row: rawRows[getRawRowIdx(rowIdx)], columnKey: columns[idx].key });\n  }\n\n  function handlePaste() {\n    if (!onPaste || !onRowsChange || copiedCell === null || !isCellEditable(selectedPosition)) {\n      return;\n    }\n\n    const { idx, rowIdx } = selectedPosition;\n    const targetRow = rawRows[getRawRowIdx(rowIdx)];\n\n    const updatedTargetRow = onPaste({\n      sourceRow: copiedCell.row,\n      sourceColumnKey: copiedCell.columnKey,\n      targetRow,\n      targetColumnKey: columns[idx].key\n    });\n\n    updateRow(rowIdx, updatedTargetRow);\n  }\n\n  function handleCellInput(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (!selectedCellIsWithinViewportBounds) return;\n    const row = rows[selectedPosition.rowIdx];\n    if (isGroupRow(row)) return;\n    const { key, shiftKey } = event;\n\n    // Select the row on Shift + Space\n    if (isSelectable && shiftKey && key === ' ') {\n      assertIsValidKeyGetter<R, K>(rowKeyGetter);\n      const rowKey = rowKeyGetter(row);\n      selectRow({ row, checked: !selectedRows.has(rowKey), isShiftClick: false });\n      // do not scroll\n      event.preventDefault();\n      return;\n    }\n\n    const column = columns[selectedPosition.idx];\n    column.editorOptions?.onCellKeyDown?.(event);\n    if (event.isDefaultPrevented()) return;\n\n    if (isCellEditable(selectedPosition) && isDefaultCellInput(event)) {\n      setSelectedPosition(({ idx, rowIdx }) => ({\n        idx,\n        rowIdx,\n        mode: 'EDIT',\n        row,\n        originalRow: row\n      }));\n    }\n  }\n\n  /**\n   * utils\n   */\n  function isColIdxWithinSelectionBounds(idx: number) {\n    return idx >= minColIdx && idx <= maxColIdx;\n  }\n\n  function isRowIdxWithinViewportBounds(rowIdx: number) {\n    return rowIdx >= 0 && rowIdx < rows.length;\n  }\n\n  function isCellWithinSelectionBounds({ idx, rowIdx }: Position): boolean {\n    return rowIdx >= minRowIdx && rowIdx <= maxRowIdx && isColIdxWithinSelectionBounds(idx);\n  }\n\n  function isCellWithinViewportBounds({ idx, rowIdx }: Position): boolean {\n    return isRowIdxWithinViewportBounds(rowIdx) && isColIdxWithinSelectionBounds(idx);\n  }\n\n  function isCellEditable(position: Position): boolean {\n    return (\n      isCellWithinViewportBounds(position) &&\n      isSelectedCellEditable({ columns, rows, selectedPosition: position, isGroupRow })\n    );\n  }\n\n  function selectCell(position: Position, enableEditor?: Maybe<boolean>): void {\n    if (!isCellWithinSelectionBounds(position)) return;\n    commitEditorChanges();\n\n    if (enableEditor && isCellEditable(position)) {\n      const row = rows[position.rowIdx] as R;\n      setSelectedPosition({ ...position, mode: 'EDIT', row, originalRow: row });\n    } else if (isSamePosition(selectedPosition, position)) {\n      // Avoid re-renders if the selected cell state is the same\n      // TODO: replace with a #record? https://github.com/microsoft/TypeScript/issues/39831\n      scrollToCell(position);\n    } else {\n      setSelectedPosition({ ...position, mode: 'SELECT' });\n    }\n  }\n\n  function scrollToCell({ idx, rowIdx }: Partial<Position>): void {\n    const { current } = gridRef;\n    if (!current) return;\n\n    if (typeof idx === 'number' && idx > lastFrozenColumnIndex) {\n      rowIdx ??= selectedPosition.rowIdx;\n      if (!isCellWithinSelectionBounds({ rowIdx, idx })) return;\n      const { clientWidth } = current;\n      const column = columns[idx];\n      const { left, width } = columnMetrics.get(column)!;\n      let right = left + width;\n\n      const colSpan = getSelectedCellColSpan({\n        rows,\n        summaryRows,\n        rowIdx,\n        lastFrozenColumnIndex,\n        column,\n        isGroupRow\n      });\n\n      if (colSpan !== undefined) {\n        const { left, width } = columnMetrics.get(columns[column.idx + colSpan - 1])!;\n        right = left + width;\n      }\n\n      const isCellAtLeftBoundary = left < scrollLeft + totalFrozenColumnWidth;\n      const isCellAtRightBoundary = right > clientWidth + scrollLeft;\n      if (isCellAtLeftBoundary) {\n        current.scrollLeft = left - totalFrozenColumnWidth;\n      } else if (isCellAtRightBoundary) {\n        current.scrollLeft = right - clientWidth;\n      }\n    }\n\n    if (typeof rowIdx === 'number' && isRowIdxWithinViewportBounds(rowIdx)) {\n      const rowTop = getRowTop(rowIdx);\n      const rowHeight = getRowHeight(rowIdx);\n      if (rowTop < scrollTop) {\n        // at top boundary, scroll to the row's top\n        current.scrollTop = rowTop;\n      } else if (rowTop + rowHeight > scrollTop + clientHeight) {\n        // at bottom boundary, scroll the next row's top to the bottom of the viewport\n        current.scrollTop = rowTop + rowHeight - clientHeight;\n      }\n    }\n  }\n\n  function getNextPosition(key: string, ctrlKey: boolean, shiftKey: boolean): Position {\n    const { idx, rowIdx } = selectedPosition;\n    const row = rows[rowIdx];\n    const isRowSelected = selectedCellIsWithinSelectionBounds && idx === -1;\n\n    // If a group row is focused, and it is collapsed, move to the parent group row (if there is one).\n    if (\n      key === 'ArrowLeft' &&\n      isRowSelected &&\n      isGroupRow(row) &&\n      !row.isExpanded &&\n      row.level !== 0\n    ) {\n      let parentRowIdx = -1;\n      for (let i = selectedPosition.rowIdx - 1; i >= 0; i--) {\n        const parentRow = rows[i];\n        if (isGroupRow(parentRow) && parentRow.id === row.parentId) {\n          parentRowIdx = i;\n          break;\n        }\n      }\n      if (parentRowIdx !== -1) {\n        return { idx, rowIdx: parentRowIdx };\n      }\n    }\n\n    switch (key) {\n      case 'ArrowUp':\n        return { idx, rowIdx: rowIdx - 1 };\n      case 'ArrowDown':\n        return { idx, rowIdx: rowIdx + 1 };\n      case 'ArrowLeft':\n        return { idx: idx - 1, rowIdx };\n      case 'ArrowRight':\n        return { idx: idx + 1, rowIdx };\n      case 'Tab':\n        return { idx: idx + (shiftKey ? -1 : 1), rowIdx };\n      case 'Home':\n        // If row is selected then move focus to the first row\n        if (isRowSelected) return { idx, rowIdx: 0 };\n        return { idx: 0, rowIdx: ctrlKey ? minRowIdx : rowIdx };\n      case 'End':\n        // If row is selected then move focus to the last row.\n        if (isRowSelected) return { idx, rowIdx: rows.length - 1 };\n        return { idx: maxColIdx, rowIdx: ctrlKey ? maxRowIdx : rowIdx };\n      case 'PageUp': {\n        if (selectedPosition.rowIdx === minRowIdx) return selectedPosition;\n        const nextRowY = getRowTop(rowIdx) + getRowHeight(rowIdx) - clientHeight;\n        return { idx, rowIdx: nextRowY > 0 ? findRowIdx(nextRowY) : 0 };\n      }\n      case 'PageDown': {\n        if (selectedPosition.rowIdx >= rows.length) return selectedPosition;\n        const nextRowY = getRowTop(rowIdx) + clientHeight;\n        return { idx, rowIdx: nextRowY < totalRowHeight ? findRowIdx(nextRowY) : rows.length - 1 };\n      }\n      default:\n        return selectedPosition;\n    }\n  }\n\n  function navigate(event: React.KeyboardEvent<HTMLDivElement>) {\n    const { key, shiftKey } = event;\n    let mode = cellNavigationMode;\n    if (key === 'Tab') {\n      if (\n        canExitGrid({\n          shiftKey,\n          cellNavigationMode,\n          maxColIdx,\n          minRowIdx,\n          maxRowIdx,\n          selectedPosition\n        })\n      ) {\n        commitEditorChanges();\n        // Allow focus to leave the grid so the next control in the tab order can be focused\n        return;\n      }\n\n      mode = cellNavigationMode === 'NONE' ? 'CHANGE_ROW' : cellNavigationMode;\n    }\n\n    // Do not allow focus to leave\n    event.preventDefault();\n\n    const ctrlKey = isCtrlKeyHeldDown(event);\n    const nextPosition = getNextPosition(key, ctrlKey, shiftKey);\n    if (isSamePosition(selectedPosition, nextPosition)) return;\n\n    const nextSelectedCellPosition = getNextSelectedCellPosition({\n      columns,\n      colSpanColumns,\n      rows,\n      summaryRows,\n      minRowIdx,\n      maxRowIdx,\n      lastFrozenColumnIndex,\n      cellNavigationMode: mode,\n      currentPosition: selectedPosition,\n      nextPosition,\n      isCellWithinBounds: isCellWithinSelectionBounds,\n      isGroupRow\n    });\n\n    selectCell(nextSelectedCellPosition);\n  }\n\n  function getDraggedOverCellIdx(currentRowIdx: number): number | undefined {\n    if (draggedOverRowIdx === undefined) return;\n    const { rowIdx } = selectedPosition;\n\n    const isDraggedOver =\n      rowIdx < draggedOverRowIdx\n        ? rowIdx < currentRowIdx && currentRowIdx <= draggedOverRowIdx\n        : rowIdx > currentRowIdx && currentRowIdx >= draggedOverRowIdx;\n\n    return isDraggedOver ? selectedPosition.idx : undefined;\n  }\n\n  function getLayoutCssVars() {\n    if (autoResizeColumn === null) return layoutCssVars;\n    const { gridTemplateColumns } = layoutCssVars;\n    const newSizes = gridTemplateColumns.split(' ');\n    newSizes[autoResizeColumn.idx] = 'max-content';\n    return {\n      ...layoutCssVars,\n      gridTemplateColumns: newSizes.join(' ')\n    };\n  }\n\n  function getDragHandle(rowIdx: number) {\n    if (\n      selectedPosition.rowIdx !== rowIdx ||\n      selectedPosition.mode === 'EDIT' ||\n      hasGroups || // drag fill is not supported when grouping is enabled\n      onFill == null\n    ) {\n      return;\n    }\n\n    return (\n      <DragHandle\n        rows={rawRows}\n        columns={columns}\n        selectedPosition={selectedPosition}\n        isCellEditable={isCellEditable}\n        latestDraggedOverRowIdx={latestDraggedOverRowIdx}\n        onRowsChange={onRowsChange}\n        onFill={onFill}\n        setDragging={setDragging}\n        setDraggedOverRowIdx={setDraggedOverRowIdx}\n      />\n    );\n  }\n\n  function getCellEditor(rowIdx: number) {\n    if (selectedPosition.rowIdx !== rowIdx || selectedPosition.mode === 'SELECT') return;\n\n    const { idx, row } = selectedPosition;\n    const column = columns[idx];\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row });\n\n    const closeEditor = () => {\n      setSelectedPosition(({ idx, rowIdx }) => ({ idx, rowIdx, mode: 'SELECT' }));\n    };\n\n    const onRowChange = (row: R, commitChanges?: boolean) => {\n      if (commitChanges) {\n        updateRow(selectedPosition.rowIdx, row);\n        closeEditor();\n      } else {\n        setSelectedPosition((position) => ({ ...position, row }));\n      }\n    };\n\n    if (rows[selectedPosition.rowIdx] !== selectedPosition.originalRow) {\n      // Discard changes if rows are updated from outside\n      closeEditor();\n    }\n\n    return (\n      <EditCell\n        key={column.key}\n        column={column}\n        colSpan={colSpan}\n        row={row}\n        onRowChange={onRowChange}\n        closeEditor={closeEditor}\n        scrollToCell={() => {\n          scrollToCell(selectedPosition);\n        }}\n      />\n    );\n  }\n\n  function getViewportRows() {\n    const rowElements = [];\n    let startRowIndex = 0;\n\n    const { idx: selectedIdx, rowIdx: selectedRowIdx } = selectedPosition;\n    const startRowIdx =\n      selectedCellIsWithinViewportBounds && selectedRowIdx < rowOverscanStartIdx\n        ? rowOverscanStartIdx - 1\n        : rowOverscanStartIdx;\n    const endRowIdx =\n      selectedCellIsWithinViewportBounds && selectedRowIdx > rowOverscanEndIdx\n        ? rowOverscanEndIdx + 1\n        : rowOverscanEndIdx;\n\n    for (let viewportRowIdx = startRowIdx; viewportRowIdx <= endRowIdx; viewportRowIdx++) {\n      const isRowOutsideViewport =\n        viewportRowIdx === rowOverscanStartIdx - 1 || viewportRowIdx === rowOverscanEndIdx + 1;\n      const rowIdx = isRowOutsideViewport ? selectedRowIdx : viewportRowIdx;\n\n      let rowColumns = viewportColumns;\n      const selectedColumn = columns[selectedIdx];\n      // selectedIdx can be -1 if grouping is enabled\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (selectedColumn !== undefined) {\n        if (isRowOutsideViewport) {\n          // if the row is outside the viewport then only render the selected cell\n          rowColumns = [selectedColumn];\n        } else if (selectedRowIdx === rowIdx && !viewportColumns.includes(selectedColumn)) {\n          // if the row is within the viewport and cell is not, add the selected column to viewport columns\n          rowColumns =\n            selectedIdx > viewportColumns[viewportColumns.length - 1].idx\n              ? [...viewportColumns, selectedColumn]\n              : [\n                  ...viewportColumns.slice(0, lastFrozenColumnIndex + 1),\n                  selectedColumn,\n                  ...viewportColumns.slice(lastFrozenColumnIndex + 1)\n                ];\n        }\n      }\n\n      const row = rows[rowIdx];\n      const gridRowStart = headerRowsCount + rowIdx + 1;\n      if (isGroupRow(row)) {\n        ({ startRowIndex } = row);\n        const isGroupRowSelected =\n          isSelectable && row.childRows.every((cr) => selectedRows.has(rowKeyGetter!(cr)));\n        rowElements.push(\n          <GroupRowRenderer\n            aria-level={row.level + 1} // aria-level is 1-based\n            aria-setsize={row.setSize}\n            aria-posinset={row.posInSet + 1} // aria-posinset is 1-based\n            aria-rowindex={headerRowsCount + startRowIndex + 1} // aria-rowindex is 1 based\n            aria-selected={isSelectable ? isGroupRowSelected : undefined}\n            key={row.id}\n            id={row.id}\n            groupKey={row.groupKey}\n            viewportColumns={rowColumns}\n            childRows={row.childRows}\n            rowIdx={rowIdx}\n            row={row}\n            gridRowStart={gridRowStart}\n            height={getRowHeight(rowIdx)}\n            level={row.level}\n            isExpanded={row.isExpanded}\n            selectedCellIdx={selectedRowIdx === rowIdx ? selectedIdx : undefined}\n            isRowSelected={isGroupRowSelected}\n            selectGroup={selectGroupLatest}\n            toggleGroup={toggleGroupLatest}\n          />\n        );\n        continue;\n      }\n\n      startRowIndex++;\n      let key;\n      let isRowSelected = false;\n      if (typeof rowKeyGetter === 'function') {\n        key = rowKeyGetter(row);\n        isRowSelected = selectedRows?.has(key) ?? false;\n      } else {\n        key = hasGroups ? startRowIndex : rowIdx;\n      }\n\n      rowElements.push(\n        <RowRenderer\n          aria-rowindex={headerRowsCount + (hasGroups ? startRowIndex : rowIdx) + 1} // aria-rowindex is 1 based\n          aria-selected={isSelectable ? isRowSelected : undefined}\n          key={key}\n          rowIdx={rowIdx}\n          row={row}\n          viewportColumns={rowColumns}\n          isRowSelected={isRowSelected}\n          onRowClick={onRowClick}\n          onRowDoubleClick={onRowDoubleClick}\n          rowClass={rowClass}\n          gridRowStart={gridRowStart}\n          height={getRowHeight(rowIdx)}\n          copiedCellIdx={\n            copiedCell !== null && copiedCell.row === row\n              ? columns.findIndex((c) => c.key === copiedCell.columnKey)\n              : undefined\n          }\n          selectedCellIdx={selectedRowIdx === rowIdx ? selectedIdx : undefined}\n          draggedOverCellIdx={getDraggedOverCellIdx(rowIdx)}\n          setDraggedOverRowIdx={isDragging ? setDraggedOverRowIdx : undefined}\n          lastFrozenColumnIndex={lastFrozenColumnIndex}\n          onRowChange={handleFormatterRowChangeLatest}\n          selectCell={selectViewportCellLatest}\n          selectedCellDragHandle={getDragHandle(rowIdx)}\n          selectedCellEditor={getCellEditor(rowIdx)}\n        />\n      );\n    }\n\n    return rowElements;\n  }\n\n  // Reset the positions if the current values are no longer valid. This can happen if a column or row is removed\n  if (selectedPosition.idx > maxColIdx || selectedPosition.rowIdx > maxRowIdx) {\n    setSelectedPosition(initialPosition);\n    setDraggedOverRowIdx(undefined);\n  }\n\n  let templateRows = `${headerRowHeight}px`;\n  if (rows.length > 0) {\n    templateRows += gridTemplateRows;\n  }\n  if (summaryRowsCount > 0) {\n    templateRows += ` repeat(${summaryRowsCount}, ${summaryRowHeight}px)`;\n  }\n\n  return (\n    <div\n      role={hasGroups ? 'treegrid' : 'grid'}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledBy}\n      aria-describedby={ariaDescribedBy}\n      aria-multiselectable={isSelectable ? true : undefined}\n      aria-colcount={columns.length}\n      aria-rowcount={headerRowsCount + rowsCount + summaryRowsCount}\n      className={clsx(\n        rootClassname,\n        {\n          [viewportDraggingClassname]: isDragging,\n          [cellAutoResizeClassname]: autoResizeColumn !== null\n        },\n        className\n      )}\n      style={\n        {\n          ...style,\n          gridTemplateRows: templateRows,\n          '--rdg-header-row-height': `${headerRowHeight}px`,\n          '--rdg-row-width': `${totalColumnWidth}px`,\n          '--rdg-summary-row-height': `${summaryRowHeight}px`,\n          '--rdg-grid-height': `${\n            max(totalRowHeight, clientHeight) +\n            headerRowHeight +\n            summaryRowsCount * summaryRowHeight\n          }px`,\n          ...getLayoutCssVars()\n        } as unknown as React.CSSProperties\n      }\n      ref={gridRef}\n      onScroll={handleScroll}\n      onKeyDown={handleKeyDown}\n      data-testid={testId}\n    >\n      {/* extra div is needed for row navigation in a treegrid */}\n      {hasGroups && (\n        <div\n          ref={rowRef}\n          tabIndex={selectedPosition.idx === -1 && selectedPosition.rowIdx !== -2 ? 0 : -1}\n          className={focusSinkClassname}\n          style={{\n            gridRowStart: selectedPosition.rowIdx + 2\n          }}\n          onKeyDown={handleKeyDown}\n        />\n      )}\n      <HeaderRow\n        columns={viewportColumns}\n        onColumnResize={handleColumnResize}\n        allRowsSelected={allRowsSelected}\n        onAllRowsSelectionChange={selectAllRowsLatest}\n        sortColumns={sortColumns}\n        onSortColumnsChange={onSortColumnsChange}\n        lastFrozenColumnIndex={lastFrozenColumnIndex}\n        selectedCellIdx={isHeaderRowSelected ? selectedPosition.idx : undefined}\n        selectCell={selectHeaderCellLatest}\n        shouldFocusGrid={!selectedCellIsWithinSelectionBounds}\n      />\n      {rows.length === 0 && noRowsFallback ? (\n        noRowsFallback\n      ) : (\n        <>\n          <RowSelectionChangeProvider value={selectRowLatest}>\n            {getViewportRows()}\n          </RowSelectionChangeProvider>\n          {summaryRows?.map((row, rowIdx) => {\n            const isSummaryRowSelected =\n              selectedPosition.rowIdx === headerRowsCount + rows.length + rowIdx - 1;\n            const top =\n              clientHeight > totalRowHeight\n                ? gridHeight - summaryRowHeight * (summaryRows.length - rowIdx)\n                : undefined;\n            const bottom =\n              top === undefined ? summaryRowHeight * (summaryRows.length - 1 - rowIdx) : undefined;\n\n            return (\n              <SummaryRow\n                aria-rowindex={headerRowsCount + rowsCount + rowIdx + 1}\n                key={rowIdx}\n                rowIdx={rowIdx}\n                row={row}\n                top={top}\n                bottom={bottom}\n                viewportColumns={viewportColumns}\n                lastFrozenColumnIndex={lastFrozenColumnIndex}\n                selectedCellIdx={isSummaryRowSelected ? selectedPosition.idx : undefined}\n                selectCell={selectSummaryCellLatest}\n              />\n            );\n          })}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction isSamePosition(p1: Position, p2: Position) {\n  return p1.idx === p2.idx && p1.rowIdx === p2.rowIdx;\n}\n\nexport default forwardRef(DataGrid) as <R, SR = unknown, K extends Key = Key>(\n  props: DataGridProps<R, SR, K> & RefAttributes<DataGridHandle>\n) => JSX.Element;\n","import { useRef, useState } from 'react';\nimport { useLayoutEffect } from './useLayoutEffect';\n\nexport function useGridDimensions(): [\n  ref: React.RefObject<HTMLDivElement>,\n  width: number,\n  height: number\n] {\n  const gridRef = useRef<HTMLDivElement>(null);\n  const [gridWidth, setGridWidth] = useState(1);\n  const [gridHeight, setGridHeight] = useState(1);\n\n  useLayoutEffect(() => {\n    const { ResizeObserver } = window;\n\n    // don't break in Node.js (SSR), jest/jsdom, and browsers that don't support ResizeObserver\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (ResizeObserver == null) return;\n\n    const resizeObserver = new ResizeObserver(() => {\n      // Get dimensions without scrollbars.\n      // The dimensions given by the callback entries in Firefox do not substract the scrollbar sizes.\n      const { clientWidth, clientHeight } = gridRef.current!;\n      // TODO: remove once fixed upstream\n      // we reduce width by 1px here to avoid layout issues in Chrome\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=1206298\n      setGridWidth(clientWidth - (devicePixelRatio % 1 === 0 ? 0 : 1));\n      setGridHeight(clientHeight);\n    });\n\n    resizeObserver.observe(gridRef.current!);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, []);\n\n  return [gridRef, gridWidth, gridHeight];\n}\n","import { useMemo } from 'react';\nimport { floor, max, min } from '../utils';\nimport type { GroupRow, Maybe, RowHeightArgs } from '../types';\n\ntype GroupByDictionary<TRow> = Record<\n  string,\n  {\n    readonly childRows: readonly TRow[];\n    readonly childGroups: readonly TRow[] | Readonly<GroupByDictionary<TRow>>;\n    readonly startRowIndex: number;\n  }\n>;\n\ninterface ViewportRowsArgs<R> {\n  rawRows: readonly R[];\n  rowHeight: number | ((args: RowHeightArgs<R>) => number);\n  clientHeight: number;\n  scrollTop: number;\n  groupBy: readonly string[];\n  rowGrouper: Maybe<(rows: readonly R[], columnKey: string) => Record<string, readonly R[]>>;\n  expandedGroupIds: Maybe<ReadonlySet<unknown>>;\n  enableVirtualization: boolean;\n}\n\n// TODO: https://github.com/microsoft/TypeScript/issues/41808\nfunction isReadonlyArray(arr: unknown): arr is readonly unknown[] {\n  return Array.isArray(arr);\n}\n\nexport function useViewportRows<R>({\n  rawRows,\n  rowHeight,\n  clientHeight,\n  scrollTop,\n  groupBy,\n  rowGrouper,\n  expandedGroupIds,\n  enableVirtualization\n}: ViewportRowsArgs<R>) {\n  const [groupedRows, rowsCount] = useMemo(() => {\n    if (groupBy.length === 0 || rowGrouper == null) return [undefined, rawRows.length];\n\n    const groupRows = (\n      rows: readonly R[],\n      [groupByKey, ...remainingGroupByKeys]: readonly string[],\n      startRowIndex: number\n    ): [Readonly<GroupByDictionary<R>>, number] => {\n      let groupRowsCount = 0;\n      const groups: GroupByDictionary<R> = {};\n      for (const [key, childRows] of Object.entries(rowGrouper(rows, groupByKey))) {\n        // Recursively group each parent group\n        const [childGroups, childRowsCount] =\n          remainingGroupByKeys.length === 0\n            ? [childRows, childRows.length]\n            : groupRows(childRows, remainingGroupByKeys, startRowIndex + groupRowsCount + 1); // 1 for parent row\n        groups[key] = { childRows, childGroups, startRowIndex: startRowIndex + groupRowsCount };\n        groupRowsCount += childRowsCount + 1; // 1 for parent row\n      }\n\n      return [groups, groupRowsCount];\n    };\n\n    return groupRows(rawRows, groupBy, 0);\n  }, [groupBy, rowGrouper, rawRows]);\n\n  const [rows, isGroupRow] = useMemo((): [\n    ReadonlyArray<R | GroupRow<R>>,\n    (row: R | GroupRow<R>) => row is GroupRow<R>\n  ] => {\n    const allGroupRows = new Set<unknown>();\n    if (!groupedRows) return [rawRows, isGroupRow];\n\n    const flattenedRows: Array<R | GroupRow<R>> = [];\n    const expandGroup = (\n      rows: GroupByDictionary<R> | readonly R[],\n      parentId: string | undefined,\n      level: number\n    ): void => {\n      if (isReadonlyArray(rows)) {\n        flattenedRows.push(...rows);\n        return;\n      }\n      Object.keys(rows).forEach((groupKey, posInSet, keys) => {\n        // TODO: should users have control over the generated key?\n        const id = parentId !== undefined ? `${parentId}__${groupKey}` : groupKey;\n        const isExpanded = expandedGroupIds?.has(id) ?? false;\n        const { childRows, childGroups, startRowIndex } = rows[groupKey];\n\n        const groupRow: GroupRow<R> = {\n          id,\n          parentId,\n          groupKey,\n          isExpanded,\n          childRows,\n          level,\n          posInSet,\n          startRowIndex,\n          setSize: keys.length\n        };\n        flattenedRows.push(groupRow);\n        allGroupRows.add(groupRow);\n\n        if (isExpanded) {\n          expandGroup(childGroups, id, level + 1);\n        }\n      });\n    };\n\n    expandGroup(groupedRows, undefined, 0);\n    return [flattenedRows, isGroupRow];\n\n    function isGroupRow(row: R | GroupRow<R>): row is GroupRow<R> {\n      return allGroupRows.has(row);\n    }\n  }, [expandedGroupIds, groupedRows, rawRows]);\n\n  const { totalRowHeight, gridTemplateRows, getRowTop, getRowHeight, findRowIdx } = useMemo(() => {\n    if (typeof rowHeight === 'number') {\n      return {\n        totalRowHeight: rowHeight * rows.length,\n        gridTemplateRows: ` repeat(${rows.length}, ${rowHeight}px)`,\n        getRowTop: (rowIdx: number) => rowIdx * rowHeight,\n        getRowHeight: () => rowHeight,\n        findRowIdx: (offset: number) => floor(offset / rowHeight)\n      };\n    }\n\n    let totalRowHeight = 0;\n    let gridTemplateRows = ' ';\n    // Calcule the height of all the rows upfront. This can cause performance issues\n    // and we can consider using a similar approach as react-window\n    // https://github.com/bvaughn/react-window/blob/b0a470cc264e9100afcaa1b78ed59d88f7914ad4/src/VariableSizeList.js#L68\n    const rowPositions = rows.map((row: R | GroupRow<R>) => {\n      const currentRowHeight = isGroupRow(row)\n        ? rowHeight({ type: 'GROUP', row })\n        : rowHeight({ type: 'ROW', row });\n      const position = { top: totalRowHeight, height: currentRowHeight };\n      gridTemplateRows += `${currentRowHeight}px `;\n      totalRowHeight += currentRowHeight;\n      return position;\n    });\n\n    const validateRowIdx = (rowIdx: number) => {\n      return max(0, min(rows.length - 1, rowIdx));\n    };\n\n    return {\n      totalRowHeight,\n      gridTemplateRows,\n      getRowTop: (rowIdx: number) => rowPositions[validateRowIdx(rowIdx)].top,\n      getRowHeight: (rowIdx: number) => rowPositions[validateRowIdx(rowIdx)].height,\n      findRowIdx(offset: number) {\n        let start = 0;\n        let end = rowPositions.length - 1;\n        while (start <= end) {\n          const middle = start + floor((end - start) / 2);\n          const currentOffset = rowPositions[middle].top;\n\n          if (currentOffset === offset) return middle;\n\n          if (currentOffset < offset) {\n            start = middle + 1;\n          } else if (currentOffset > offset) {\n            end = middle - 1;\n          }\n\n          if (start > end) return end;\n        }\n        return 0;\n      }\n    };\n  }, [isGroupRow, rowHeight, rows]);\n\n  let rowOverscanStartIdx = 0;\n  let rowOverscanEndIdx = rows.length - 1;\n\n  if (enableVirtualization) {\n    const overscanThreshold = 4;\n    const rowVisibleStartIdx = findRowIdx(scrollTop);\n    const rowVisibleEndIdx = findRowIdx(scrollTop + clientHeight);\n    rowOverscanStartIdx = max(0, rowVisibleStartIdx - overscanThreshold);\n    rowOverscanEndIdx = min(rows.length - 1, rowVisibleEndIdx + overscanThreshold);\n  }\n\n  return {\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    rowsCount,\n    totalRowHeight,\n    gridTemplateRows,\n    isGroupRow,\n    getRowTop,\n    getRowHeight,\n    findRowIdx\n  };\n}\n","import { useMemo } from 'react';\n\nimport { getColSpan } from '../utils';\nimport type { CalculatedColumn, GroupRow, Maybe } from '../types';\n\ninterface ViewportColumnsArgs<R, SR> {\n  columns: readonly CalculatedColumn<R, SR>[];\n  colSpanColumns: readonly CalculatedColumn<R, SR>[];\n  rows: readonly (R | GroupRow<R>)[];\n  summaryRows: Maybe<readonly SR[]>;\n  colOverscanStartIdx: number;\n  colOverscanEndIdx: number;\n  lastFrozenColumnIndex: number;\n  rowOverscanStartIdx: number;\n  rowOverscanEndIdx: number;\n  isGroupRow: (row: R | GroupRow<R>) => row is GroupRow<R>;\n}\n\nexport function useViewportColumns<R, SR>({\n  columns,\n  colSpanColumns,\n  rows,\n  summaryRows,\n  colOverscanStartIdx,\n  colOverscanEndIdx,\n  lastFrozenColumnIndex,\n  rowOverscanStartIdx,\n  rowOverscanEndIdx,\n  isGroupRow\n}: ViewportColumnsArgs<R, SR>) {\n  // find the column that spans over a column within the visible columns range and adjust colOverscanStartIdx\n  const startIdx = useMemo(() => {\n    if (colOverscanStartIdx === 0) return 0;\n\n    let startIdx = colOverscanStartIdx;\n\n    const updateStartIdx = (colIdx: number, colSpan: number | undefined) => {\n      if (colSpan !== undefined && colIdx + colSpan > colOverscanStartIdx) {\n        startIdx = colIdx;\n        return true;\n      }\n      return false;\n    };\n\n    for (const column of colSpanColumns) {\n      // check header row\n      const colIdx = column.idx;\n      if (colIdx >= startIdx) break;\n      if (updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, { type: 'HEADER' }))) {\n        break;\n      }\n\n      // check viewport rows\n      for (let rowIdx = rowOverscanStartIdx; rowIdx <= rowOverscanEndIdx; rowIdx++) {\n        const row = rows[rowIdx];\n        if (isGroupRow(row)) continue;\n        if (\n          updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row }))\n        ) {\n          break;\n        }\n      }\n\n      // check summary rows\n      if (summaryRows != null) {\n        for (const row of summaryRows) {\n          if (\n            updateStartIdx(\n              colIdx,\n              getColSpan(column, lastFrozenColumnIndex, { type: 'SUMMARY', row })\n            )\n          ) {\n            break;\n          }\n        }\n      }\n    }\n\n    return startIdx;\n  }, [\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    summaryRows,\n    colOverscanStartIdx,\n    lastFrozenColumnIndex,\n    colSpanColumns,\n    isGroupRow\n  ]);\n\n  return useMemo((): readonly CalculatedColumn<R, SR>[] => {\n    const viewportColumns: CalculatedColumn<R, SR>[] = [];\n    for (let colIdx = 0; colIdx <= colOverscanEndIdx; colIdx++) {\n      const column = columns[colIdx];\n\n      if (colIdx < startIdx && !column.frozen) continue;\n      viewportColumns.push(column);\n    }\n\n    return viewportColumns;\n  }, [startIdx, colOverscanEndIdx, columns]);\n}\n","import { css } from '@linaria/core';\nimport { row } from './row';\n\nconst lightTheme = `\n  --rdg-color: #000;\n  --rdg-border-color: #ddd;\n  --rdg-summary-border-color: #aaa;\n  --rdg-background-color: hsl(0deg 0% 100%);\n  --rdg-header-background-color: hsl(0deg 0% 97.5%);\n  --rdg-row-hover-background-color: hsl(0deg 0% 96%);\n  --rdg-row-selected-background-color: hsl(207deg 76% 92%);\n  --row-selected-hover-background-color: hsl(207deg 76% 88%);\n\n  --rdg-checkbox-color: hsl(207deg 100% 29%);\n  --rdg-checkbox-focus-color: hsl(207deg 100% 69%);\n  --rdg-checkbox-disabled-border-color: #ccc;\n  --rdg-checkbox-disabled-background-color: #ddd;\n`;\n\nconst darkTheme = `\n  --rdg-color: #ddd;\n  --rdg-border-color: #444;\n  --rdg-summary-border-color: #555;\n  --rdg-background-color: hsl(0deg 0% 13%);\n  --rdg-header-background-color: hsl(0deg 0% 10.5%);\n  --rdg-row-hover-background-color: hsl(0deg 0% 9%);\n  --rdg-row-selected-background-color: hsl(207deg 76% 42%);\n  --row-selected-hover-background-color: hsl(207deg 76% 38%);\n\n  --rdg-checkbox-color: hsl(207deg 100% 79%);\n  --rdg-checkbox-focus-color: hsl(207deg 100% 89%);\n  --rdg-checkbox-disabled-border-color: #000;\n  --rdg-checkbox-disabled-background-color: #333;\n`;\n\nconst root = css`\n  ${lightTheme}\n  --rdg-selection-color: #66afe9;\n  --rdg-frozen-cell-box-shadow: 2px 0 5px -2px rgba(136, 136, 136, 0.3);\n  --rdg-font-size: 14px;\n\n  display: grid;\n\n  color-scheme: var(--rdg-color-scheme, light dark);\n\n  /* https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */\n  /* We set a stacking context so internal elements don't render on top of external components. */\n  contain: strict;\n  contain: size layout style paint;\n  content-visibility: auto;\n  height: 350px;\n  border: 1px solid var(--rdg-border-color);\n  box-sizing: border-box;\n  overflow: auto;\n  user-select: none;\n  background-color: var(--rdg-background-color);\n  color: var(--rdg-color);\n  font-size: var(--rdg-font-size);\n  direction: ltr;\n\n  /* set stacking context in safari */\n  @supports not (contain: strict) {\n    position: relative;\n    z-index: 0;\n  }\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: inherit;\n  }\n\n  /* needed on Firefox */\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: var(--rdg-grid-height);\n    width: var(--rdg-row-width);\n  }\n\n  &.rdg-dark {\n    --rdg-color-scheme: dark;\n    ${darkTheme}\n  }\n\n  &.rdg-light {\n    --rdg-color-scheme: light;\n  }\n\n  @media (prefers-color-scheme: dark) {\n    &:not(.rdg-light) {\n      ${darkTheme}\n    }\n  }\n`;\n\nexport const rootClassname = `rdg ${root}`;\n\nconst viewportDragging = css`\n  &.${row} {\n    cursor: move;\n  }\n`;\n\nexport const viewportDraggingClassname = `rdg-viewport-dragging ${viewportDragging}`;\n\nexport const focusSinkClassname = css`\n  position: sticky;\n  left: 0;\n  grid-column-start: 1;\n`;\n","import { cloneElement } from 'react';\nimport type { ReactElement } from 'react';\n\nimport type { DataGridProps } from '../../src';\n\nexport async function exportToCsv<R, SR>(\n  gridElement: ReactElement<DataGridProps<R, SR>>,\n  fileName: string\n) {\n  const { head, body, foot } = await getGridContent(gridElement);\n  const content = [...head, ...body, ...foot]\n    .map((cells) => cells.map(serialiseCellValue).join(','))\n    .join('\\n');\n\n  downloadFile(fileName, new Blob([content], { type: 'text/csv;charset=utf-8;' }));\n}\n\nexport async function exportToXlsx<R, SR>(\n  gridElement: ReactElement<DataGridProps<R, SR>>,\n  fileName: string\n) {\n  const [{ utils, writeFile }, { head, body, foot }] = await Promise.all([\n    import('xlsx'),\n    getGridContent(gridElement)\n  ]);\n  const wb = utils.book_new();\n  const ws = utils.aoa_to_sheet([...head, ...body, ...foot]);\n  utils.book_append_sheet(wb, ws, 'Sheet 1');\n  writeFile(wb, fileName);\n}\n\nexport async function exportToPdf<R, SR>(\n  gridElement: ReactElement<DataGridProps<R, SR>>,\n  fileName: string\n) {\n  const [{ jsPDF }, autoTable, { head, body, foot }] = await Promise.all([\n    import('jspdf'),\n    (await import('jspdf-autotable')).default,\n    await getGridContent(gridElement)\n  ]);\n  const doc = new jsPDF({\n    orientation: 'l',\n    unit: 'px'\n  });\n\n  autoTable(doc, {\n    head,\n    body,\n    foot,\n    horizontalPageBreak: true,\n    styles: { cellPadding: 1.5, fontSize: 8, cellWidth: 'wrap' },\n    tableWidth: 'wrap'\n  });\n  doc.save(fileName);\n}\n\nasync function getGridContent<R, SR>(gridElement: ReactElement<DataGridProps<R, SR>>) {\n  const { renderToStaticMarkup } = await import('react-dom/server');\n  const grid = document.createElement('div');\n  grid.innerHTML = renderToStaticMarkup(\n    cloneElement(gridElement, {\n      enableVirtualization: false\n    })\n  );\n\n  return {\n    head: getRows('.rdg-header-row'),\n    body: getRows('.rdg-row:not(.rdg-summary-row)'),\n    foot: getRows('.rdg-summary-row')\n  };\n\n  function getRows(selector: string) {\n    return Array.from(grid.querySelectorAll<HTMLDivElement>(selector)).map((gridRow) => {\n      return Array.from(gridRow.querySelectorAll<HTMLDivElement>('.rdg-cell')).map(\n        (gridCell) => gridCell.innerText\n      );\n    });\n  }\n}\n\nfunction serialiseCellValue(value: unknown) {\n  if (typeof value === 'string') {\n    const formattedValue = value.replace(/\"/g, '\"\"');\n    return formattedValue.includes(',') ? `\"${formattedValue}\"` : formattedValue;\n  }\n  return value;\n}\n\nfunction downloadFile(fileName: string, data: Blob) {\n  const downloadLink = document.createElement('a');\n  downloadLink.download = fileName;\n  const url = URL.createObjectURL(data);\n  downloadLink.href = url;\n  downloadLink.click();\n  URL.revokeObjectURL(url);\n}\n","import { useState, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { css } from '@linaria/core';\nimport faker from 'faker';\n\nimport DataGrid, { SelectColumn, TextEditor, SelectCellFormatter } from '../../src';\nimport type { Column, SortColumn } from '../../src';\nimport { stopPropagation } from '../../src/utils';\nimport { exportToCsv, exportToXlsx, exportToPdf } from './exportUtils';\nimport { textEditorClassname } from '../../src/editors/TextEditor';\n\nconst toolbarClassname = css`\n  text-align: right;\n  margin-bottom: 8px;\n`;\n\nconst dialogContainerClassname = css`\n  position: absolute;\n  inset: 0;\n  display: flex;\n  place-items: center;\n  background: rgba(0, 0, 0, 0.1);\n\n  > dialog {\n    width: 300px;\n    > input {\n      width: 100%;\n    }\n\n    > menu {\n      text-align: right;\n    }\n  }\n`;\n\nconst dateFormatter = new Intl.DateTimeFormat(navigator.language);\nconst currencyFormatter = new Intl.NumberFormat(navigator.language, {\n  style: 'currency',\n  currency: 'eur'\n});\n\nfunction TimestampFormatter({ timestamp }: { timestamp: number }) {\n  return <>{dateFormatter.format(timestamp)}</>;\n}\n\nfunction CurrencyFormatter({ value }: { value: number }) {\n  return <>{currencyFormatter.format(value)}</>;\n}\n\ninterface SummaryRow {\n  id: string;\n  totalCount: number;\n  yesCount: number;\n}\n\ninterface Row {\n  id: number;\n  title: string;\n  client: string;\n  area: string;\n  country: string;\n  contact: string;\n  assignee: string;\n  progress: number;\n  startTimestamp: number;\n  endTimestamp: number;\n  budget: number;\n  transaction: string;\n  account: string;\n  version: string;\n  available: boolean;\n}\n\nfunction getColumns(countries: string[]): readonly Column<Row, SummaryRow>[] {\n  return [\n    SelectColumn,\n    {\n      key: 'id',\n      name: 'ID',\n      width: 60,\n      frozen: true,\n      resizable: false,\n      summaryFormatter() {\n        return <strong>Total</strong>;\n      }\n    },\n    {\n      key: 'title',\n      name: 'Task',\n      width: 120,\n      frozen: true,\n      editor: TextEditor,\n      summaryFormatter({ row }) {\n        return <>{row.totalCount} records</>;\n      }\n    },\n    {\n      key: 'client',\n      name: 'Client',\n      width: 220,\n      editor: TextEditor\n    },\n    {\n      key: 'area',\n      name: 'Area',\n      width: 120,\n      editor: TextEditor\n    },\n    {\n      key: 'country',\n      name: 'Country',\n      width: 180,\n      editor: (p) => (\n        <select\n          autoFocus\n          className={textEditorClassname}\n          value={p.row.country}\n          onChange={(e) => p.onRowChange({ ...p.row, country: e.target.value }, true)}\n        >\n          {countries.map((country) => (\n            <option key={country}>{country}</option>\n          ))}\n        </select>\n      ),\n      editorOptions: {\n        editOnClick: true\n      }\n    },\n    {\n      key: 'contact',\n      name: 'Contact',\n      width: 160,\n      editor: TextEditor\n    },\n    {\n      key: 'assignee',\n      name: 'Assignee',\n      width: 150,\n      editor: TextEditor\n    },\n    {\n      key: 'progress',\n      name: 'Completion',\n      width: 110,\n      formatter(props) {\n        const value = props.row.progress;\n        return (\n          <>\n            <progress max={100} value={value} style={{ width: 50 }} /> {Math.round(value)}%\n          </>\n        );\n      },\n      editor({ row, onRowChange, onClose }) {\n        return createPortal(\n          <div\n            className={dialogContainerClassname}\n            onKeyDown={(event) => {\n              if (event.key === 'Escape') {\n                onClose();\n              }\n            }}\n          >\n            <dialog open>\n              <input\n                autoFocus\n                type=\"range\"\n                min=\"0\"\n                max=\"100\"\n                value={row.progress}\n                onChange={(e) => onRowChange({ ...row, progress: e.target.valueAsNumber })}\n              />\n              <menu>\n                <button onClick={() => onClose()}>Cancel</button>\n                <button onClick={() => onClose(true)}>Save</button>\n              </menu>\n            </dialog>\n          </div>,\n          document.body\n        );\n      },\n      editorOptions: {\n        renderFormatter: true\n      }\n    },\n    {\n      key: 'startTimestamp',\n      name: 'Start date',\n      width: 100,\n      formatter(props) {\n        return <TimestampFormatter timestamp={props.row.startTimestamp} />;\n      }\n    },\n    {\n      key: 'endTimestamp',\n      name: 'Deadline',\n      width: 100,\n      formatter(props) {\n        return <TimestampFormatter timestamp={props.row.endTimestamp} />;\n      }\n    },\n    {\n      key: 'budget',\n      name: 'Budget',\n      width: 100,\n      formatter(props) {\n        return <CurrencyFormatter value={props.row.budget} />;\n      }\n    },\n    {\n      key: 'transaction',\n      name: 'Transaction type'\n    },\n    {\n      key: 'account',\n      name: 'Account',\n      width: 150\n    },\n    {\n      key: 'version',\n      name: 'Version',\n      editor: TextEditor\n    },\n    {\n      key: 'available',\n      name: 'Available',\n      width: 80,\n      formatter({ row, onRowChange, isCellSelected }) {\n        return (\n          <SelectCellFormatter\n            value={row.available}\n            onChange={() => {\n              onRowChange({ ...row, available: !row.available });\n            }}\n            onClick={stopPropagation}\n            isCellSelected={isCellSelected}\n          />\n        );\n      },\n      summaryFormatter({ row: { yesCount, totalCount } }) {\n        return <>{`${Math.floor((100 * yesCount) / totalCount)}% ✔️`}</>;\n      }\n    }\n  ];\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfunction createRows(): readonly Row[] {\n  const now = Date.now();\n  const rows: Row[] = [];\n\n  for (let i = 0; i < 1000; i++) {\n    rows.push({\n      id: i,\n      title: `Task #${i + 1}`,\n      client: faker.company.companyName(),\n      area: faker.name.jobArea(),\n      country: faker.address.country(),\n      contact: faker.internet.exampleEmail(),\n      assignee: faker.name.findName(),\n      progress: Math.random() * 100,\n      startTimestamp: now - Math.round(Math.random() * 1e10),\n      endTimestamp: now + Math.round(Math.random() * 1e10),\n      budget: 500 + Math.random() * 10500,\n      transaction: faker.finance.transactionType(),\n      account: faker.finance.iban(),\n      version: faker.system.semver(),\n      available: Math.random() > 0.5\n    });\n  }\n\n  return rows;\n}\n\ntype Comparator = (a: Row, b: Row) => number;\nfunction getComparator(sortColumn: string): Comparator {\n  switch (sortColumn) {\n    case 'assignee':\n    case 'title':\n    case 'client':\n    case 'area':\n    case 'country':\n    case 'contact':\n    case 'transaction':\n    case 'account':\n    case 'version':\n      return (a, b) => {\n        return a[sortColumn].localeCompare(b[sortColumn]);\n      };\n    case 'available':\n      return (a, b) => {\n        return a[sortColumn] === b[sortColumn] ? 0 : a[sortColumn] ? 1 : -1;\n      };\n    case 'id':\n    case 'progress':\n    case 'startTimestamp':\n    case 'endTimestamp':\n    case 'budget':\n      return (a, b) => {\n        return a[sortColumn] - b[sortColumn];\n      };\n    default:\n      throw new Error(`unsupported sortColumn: \"${sortColumn}\"`);\n  }\n}\n\nexport default function CommonFeatures() {\n  const [rows, setRows] = useState(createRows);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const [selectedRows, setSelectedRows] = useState<ReadonlySet<number>>(() => new Set());\n\n  const countries = useMemo(() => {\n    return [...new Set(rows.map((r) => r.country))].sort(new Intl.Collator().compare);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const columns = useMemo(() => getColumns(countries), [countries]);\n\n  const summaryRows = useMemo(() => {\n    const summaryRow: SummaryRow = {\n      id: 'total_0',\n      totalCount: rows.length,\n      yesCount: rows.filter((r) => r.available).length\n    };\n    return [summaryRow];\n  }, [rows]);\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n\n    const sortedRows = [...rows];\n    sortedRows.sort((a, b) => {\n      for (const sort of sortColumns) {\n        const comparator = getComparator(sort.columnKey);\n        const compResult = comparator(a, b);\n        if (compResult !== 0) {\n          return sort.direction === 'ASC' ? compResult : -compResult;\n        }\n      }\n      return 0;\n    });\n    return sortedRows;\n  }, [rows, sortColumns]);\n\n  const gridElement = (\n    <DataGrid\n      rowKeyGetter={rowKeyGetter}\n      columns={columns}\n      rows={sortedRows}\n      defaultColumnOptions={{\n        sortable: true,\n        resizable: true\n      }}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      onRowsChange={setRows}\n      sortColumns={sortColumns}\n      onSortColumnsChange={setSortColumns}\n      summaryRows={summaryRows}\n      className=\"fill-grid\"\n    />\n  );\n\n  return (\n    <>\n      <div className={toolbarClassname}>\n        <ExportButton onExport={() => exportToCsv(gridElement, 'CommonFeatures.csv')}>\n          Export to CSV\n        </ExportButton>\n        <ExportButton onExport={() => exportToXlsx(gridElement, 'CommonFeatures.xlsx')}>\n          Export to XSLX\n        </ExportButton>\n        <ExportButton onExport={() => exportToPdf(gridElement, 'CommonFeatures.pdf')}>\n          Export to PDF\n        </ExportButton>\n      </div>\n      {gridElement}\n    </>\n  );\n}\n\nfunction ExportButton({\n  onExport,\n  children\n}: {\n  onExport: () => Promise<unknown>;\n  children: React.ReactChild;\n}) {\n  const [exporting, setExporting] = useState(false);\n  return (\n    <button\n      disabled={exporting}\n      onClick={async () => {\n        setExporting(true);\n        await onExport();\n        setExporting(false);\n      }}\n    >\n      {exporting ? 'Exporting' : children}\n    </button>\n  );\n}\n","import { textEditorClassname } from '../../../../src/editors/TextEditor';\nimport type { EditorProps } from '../../../../src';\nimport type { Row } from '../../AllFeatures';\n\nconst titles = ['Dr.', 'Mr.', 'Mrs.', 'Miss', 'Ms.'] as const;\n\nexport default function DropDownEditor({ row, onRowChange }: EditorProps<Row>) {\n  return (\n    <select\n      className={textEditorClassname}\n      value={row.title}\n      onChange={(event) => onRowChange({ ...row, title: event.target.value }, true)}\n      autoFocus\n    >\n      {titles.map((title) => (\n        <option key={title} value={title}>\n          {title}\n        </option>\n      ))}\n    </select>\n  );\n}\n","import { css } from '@linaria/core';\n\nconst wrapperClassname = css`\n  display: flex;\n  justify-content: space-around;\n`;\n\nconst imageCellClassname = css`\n  background: #efefef;\n  background-size: 100%;\n  display: inline-block;\n  height: 28px;\n  width: 28px;\n  vertical-align: middle;\n  background-position: center;\n`;\n\ninterface Props {\n  /** image url, used as background-image */\n  value: string;\n}\n\nexport function ImageFormatter({ value }: Props) {\n  return (\n    <div className={wrapperClassname}>\n      <div className={imageCellClassname} style={{ backgroundImage: `url(${value})` }} />\n    </div>\n  );\n}\n","import faker from 'faker';\nimport { useState } from 'react';\nimport { css } from '@linaria/core';\nimport DataGrid, { SelectColumn, TextEditor } from '../../src';\nimport type { Column, FillEvent, PasteEvent } from '../../src';\nimport DropDownEditor from './components/Editors/DropDownEditor';\nimport { ImageFormatter } from './components/Formatters';\n\nconst highlightClassname = css`\n  .rdg-cell {\n    background-color: #9370db;\n    color: white;\n  }\n\n  &:hover .rdg-cell {\n    background-color: #800080;\n  }\n`;\n\nexport interface Row {\n  id: string;\n  avatar: string;\n  email: string;\n  title: string;\n  firstName: string;\n  lastName: string;\n  street: string;\n  zipCode: string;\n  date: string;\n  bs: string;\n  catchPhrase: string;\n  companyName: string;\n  words: string;\n  sentence: string;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfaker.locale = 'en_GB';\n\nconst columns: readonly Column<Row>[] = [\n  SelectColumn,\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80,\n    resizable: true,\n    frozen: true\n  },\n  {\n    key: 'avatar',\n    name: 'Avatar',\n    width: 40,\n    resizable: true,\n    headerRenderer: () => <ImageFormatter value={faker.image.cats()} />,\n    formatter: ({ row }) => <ImageFormatter value={row.avatar} />\n  },\n  {\n    key: 'title',\n    name: 'Title',\n    width: 200,\n    resizable: true,\n    formatter(props) {\n      return <>{props.row.title}</>;\n    },\n    editor: DropDownEditor,\n    editorOptions: {\n      editOnClick: true\n    }\n  },\n  {\n    key: 'firstName',\n    name: 'First Name',\n    width: 200,\n    resizable: true,\n    frozen: true,\n    editor: TextEditor\n  },\n  {\n    key: 'lastName',\n    name: 'Last Name',\n    width: 200,\n    resizable: true,\n    frozen: true,\n    editor: TextEditor\n  },\n  {\n    key: 'email',\n    name: 'Email',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  },\n  {\n    key: 'street',\n    name: 'Street',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  },\n  {\n    key: 'zipCode',\n    name: 'ZipCode',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  },\n  {\n    key: 'date',\n    name: 'Date',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  },\n  {\n    key: 'bs',\n    name: 'bs',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  },\n  {\n    key: 'catchPhrase',\n    name: 'Catch Phrase',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  },\n  {\n    key: 'companyName',\n    name: 'Company Name',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  },\n  {\n    key: 'sentence',\n    name: 'Sentence',\n    width: 200,\n    resizable: true,\n    editor: TextEditor\n  }\n];\n\nfunction createRows(): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 0; i < 2000; i++) {\n    rows.push({\n      id: `id_${i}`,\n      avatar: faker.image.avatar(),\n      email: faker.internet.email(),\n      title: faker.name.prefix(),\n      firstName: faker.name.firstName(),\n      lastName: faker.name.lastName(),\n      street: faker.address.streetName(),\n      zipCode: faker.address.zipCode(),\n      date: faker.date.past().toLocaleDateString(),\n      bs: faker.company.bs(),\n      catchPhrase: faker.company.catchPhrase(),\n      companyName: faker.company.companyName(),\n      words: faker.lorem.words(),\n      sentence: faker.lorem.sentence()\n    });\n  }\n\n  return rows;\n}\n\nexport default function AllFeatures() {\n  const [rows, setRows] = useState(createRows);\n  const [selectedRows, setSelectedRows] = useState<ReadonlySet<string>>(() => new Set());\n\n  function handleFill({ columnKey, sourceRow, targetRow }: FillEvent<Row>): Row {\n    return { ...targetRow, [columnKey]: sourceRow[columnKey as keyof Row] };\n  }\n\n  function handlePaste({\n    sourceColumnKey,\n    sourceRow,\n    targetColumnKey,\n    targetRow\n  }: PasteEvent<Row>): Row {\n    const incompatibleColumns = ['email', 'zipCode', 'date'];\n    if (\n      sourceColumnKey === 'avatar' ||\n      ['id', 'avatar'].includes(targetColumnKey) ||\n      ((incompatibleColumns.includes(targetColumnKey) ||\n        incompatibleColumns.includes(sourceColumnKey)) &&\n        sourceColumnKey !== targetColumnKey)\n    ) {\n      return targetRow;\n    }\n\n    return { ...targetRow, [targetColumnKey]: sourceRow[sourceColumnKey as keyof Row] };\n  }\n\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      rowKeyGetter={rowKeyGetter}\n      onRowsChange={setRows}\n      onFill={handleFill}\n      onPaste={handlePaste}\n      rowHeight={30}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      className=\"fill-grid\"\n      rowClass={(row) => (row.id.includes('7') ? highlightClassname : undefined)}\n    />\n  );\n}\n","import { useState } from 'react';\n\nimport DataGrid from '../../src';\nimport type { Column, CellNavigationMode } from '../../src';\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n  startDate: string;\n  completeDate: string;\n}\n\nconst columns: Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title'\n  },\n  {\n    key: 'priority',\n    name: 'Priority'\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type'\n  },\n  {\n    key: 'complete',\n    name: '% Complete'\n  },\n  {\n    key: 'startDate',\n    name: 'Start Date'\n  },\n  {\n    key: 'completeDate',\n    name: 'Expected Complete',\n    width: 200\n  }\n];\n\nfunction getRandomDate(start: Date, end: Date) {\n  return new Date(\n    start.getTime() + Math.random() * (end.getTime() - start.getTime())\n  ).toLocaleDateString();\n}\n\nfunction createRows(): Row[] {\n  const rows = [];\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.floor(Math.random() * 3 + 1)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.floor(Math.random() * 3 + 1)],\n      startDate: getRandomDate(new Date(2015, 3, 1), new Date()),\n      completeDate: getRandomDate(new Date(), new Date(2016, 0, 1))\n    });\n  }\n\n  return rows;\n}\n\nexport default function CellNavigation() {\n  const [rows] = useState(createRows);\n  const [cellNavigationMode, setCellNavigationMode] = useState<CellNavigationMode>('CHANGE_ROW');\n\n  return (\n    <>\n      <div style={{ marginBottom: 5 }}>\n        Cell Navigation Modes:\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'NONE'}\n            onChange={() => setCellNavigationMode('NONE')}\n          />\n          None\n        </label>\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'CHANGE_ROW'}\n            onChange={() => setCellNavigationMode('CHANGE_ROW')}\n          />\n          Change Row\n        </label>\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'LOOP_OVER_ROW'}\n            onChange={() => setCellNavigationMode('LOOP_OVER_ROW')}\n          />\n          Loop Over Row\n        </label>\n      </div>\n      <DataGrid columns={columns} rows={rows} cellNavigationMode={cellNavigationMode} />\n    </>\n  );\n}\n","import { useMemo } from 'react';\nimport { css } from '@linaria/core';\n\nimport DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(100).keys()];\n\nconst colSpanClassname = css`\n  background-color: #ffb300;\n  color: black;\n  text-align: center;\n`;\n\nfunction CellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nexport default function ColumnSpanning() {\n  const columns = useMemo((): readonly Column<Row>[] => {\n    const columns: Column<Row>[] = [];\n\n    for (let i = 0; i < 30; i++) {\n      const key = String(i);\n      columns.push({\n        key,\n        name: key,\n        frozen: i < 5,\n        resizable: true,\n        formatter: CellFormatter,\n        colSpan(args) {\n          if (args.type === 'ROW') {\n            if (key === '2' && args.row === 2) return 3;\n            if (key === '4' && args.row === 4) return 6; // Will not work as colspan includes both frozen and regular columns\n            if (key === '0' && args.row === 5) return 5;\n            if (key === '27' && args.row === 8) return 3;\n            if (key === '6' && args.row < 8) return 2;\n          }\n          if (args.type === 'HEADER' && key === '8') {\n            return 3;\n          }\n          return undefined;\n        },\n        cellClass(row) {\n          if (\n            (key === '0' && row === 5) ||\n            (key === '2' && row === 2) ||\n            (key === '27' && row === 8) ||\n            (key === '6' && row < 8)\n          ) {\n            return colSpanClassname;\n          }\n          return undefined;\n        }\n      });\n    }\n\n    return columns;\n  }, []);\n\n  return <DataGrid columns={columns} rows={rows} rowHeight={22} className=\"fill-grid\" />;\n}\n","import { useDrag, useDrop } from 'react-dnd';\n\nimport { SortableHeaderCell } from '../../../../src';\nimport type { HeaderRendererProps } from '../../../../src';\n\ninterface DraggableHeaderRendererProps<R> extends HeaderRendererProps<R> {\n  onColumnsReorder: (sourceKey: string, targetKey: string) => void;\n}\n\nexport function DraggableHeaderRenderer<R>({\n  onColumnsReorder,\n  column,\n  sortDirection,\n  onSort,\n  priority,\n  isCellSelected\n}: DraggableHeaderRendererProps<R>) {\n  const [{ isDragging }, drag] = useDrag({\n    type: 'COLUMN_DRAG',\n    item: { key: column.key },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n\n  const [{ isOver }, drop] = useDrop({\n    accept: 'COLUMN_DRAG',\n    drop({ key }: { key: string }) {\n      onColumnsReorder(key, column.key);\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n\n  return (\n    <div\n      ref={(ref) => {\n        drag(ref);\n        drop(ref);\n      }}\n      style={{\n        opacity: isDragging ? 0.5 : 1,\n        backgroundColor: isOver ? '#ececec' : undefined,\n        cursor: 'move'\n      }}\n    >\n      <SortableHeaderCell\n        sortDirection={sortDirection}\n        onSort={onSort}\n        priority={priority}\n        isCellSelected={isCellSelected}\n      >\n        {column.name}\n      </SortableHeaderCell>\n    </div>\n  );\n}\n","import { useState, useMemo, useCallback } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport { DraggableHeaderRenderer } from './components/HeaderRenderers';\nimport DataGrid from '../../src';\nimport type { Column, HeaderRendererProps, SortColumn } from '../../src';\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n}\n\nfunction createRows(): Row[] {\n  const rows = [];\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nfunction createColumns(): Column<Row>[] {\n  return [\n    {\n      key: 'id',\n      name: 'ID',\n      width: 80\n    },\n    {\n      key: 'task',\n      name: 'Title',\n      resizable: true,\n      sortable: true\n    },\n    {\n      key: 'priority',\n      name: 'Priority',\n      resizable: true,\n      sortable: true\n    },\n    {\n      key: 'issueType',\n      name: 'Issue Type',\n      resizable: true,\n      sortable: true\n    },\n    {\n      key: 'complete',\n      name: '% Complete',\n      resizable: true,\n      sortable: true\n    }\n  ];\n}\n\nexport default function ColumnsReordering() {\n  const [rows] = useState(createRows);\n  const [columns, setColumns] = useState(createColumns);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const onSortColumnsChange = useCallback((sortColumns: SortColumn[]) => {\n    setSortColumns(sortColumns.slice(-1));\n  }, []);\n\n  const draggableColumns = useMemo(() => {\n    function HeaderRenderer(props: HeaderRendererProps<Row>) {\n      return <DraggableHeaderRenderer {...props} onColumnsReorder={handleColumnsReorder} />;\n    }\n\n    function handleColumnsReorder(sourceKey: string, targetKey: string) {\n      const sourceColumnIndex = columns.findIndex((c) => c.key === sourceKey);\n      const targetColumnIndex = columns.findIndex((c) => c.key === targetKey);\n      const reorderedColumns = [...columns];\n\n      reorderedColumns.splice(\n        targetColumnIndex,\n        0,\n        reorderedColumns.splice(sourceColumnIndex, 1)[0]\n      );\n\n      setColumns(reorderedColumns);\n    }\n\n    return columns.map((c) => {\n      if (c.key === 'id') return c;\n      return { ...c, headerRenderer: HeaderRenderer };\n    });\n  }, [columns]);\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n    const { columnKey, direction } = sortColumns[0];\n\n    let sortedRows: Row[] = [...rows];\n\n    switch (columnKey) {\n      case 'task':\n      case 'priority':\n      case 'issueType':\n        sortedRows = sortedRows.sort((a, b) => a[columnKey].localeCompare(b[columnKey]));\n        break;\n      case 'complete':\n        sortedRows = sortedRows.sort((a, b) => a[columnKey] - b[columnKey]);\n        break;\n      default:\n    }\n    return direction === 'DESC' ? sortedRows.reverse() : sortedRows;\n  }, [rows, sortColumns]);\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <DataGrid\n        columns={draggableColumns}\n        rows={sortedRows}\n        sortColumns={sortColumns}\n        onSortColumnsChange={onSortColumnsChange}\n      />\n    </DndProvider>\n  );\n}\n","import { useState, useReducer } from 'react';\nimport { createPortal } from 'react-dom';\nimport faker from 'faker';\nimport { ContextMenu, MenuItem, SubMenu, ContextMenuTrigger } from 'react-contextmenu';\nimport { css } from '@linaria/core';\n\nimport DataGrid, { Row as GridRow } from '../../src';\nimport type { Column, RowRendererProps } from '../../src';\n\ncss`\n  @at-root {\n    .react-contextmenu-wrapper {\n      display: contents;\n    }\n\n    .react-contextmenu {\n      background-color: #fff;\n      background-clip: padding-box;\n      border: 1px solid rgba(0, 0, 0, 0.15);\n      border-radius: 0.25rem;\n      color: #373a3c;\n      font-size: 16px;\n      margin: 2px 0 0;\n      min-width: 160px;\n      outline: none;\n      opacity: 0;\n      padding: 5px 0;\n      pointer-events: none;\n      text-align: left;\n      transition: opacity 250ms ease !important;\n    }\n\n    .react-contextmenu.react-contextmenu--visible {\n      opacity: 1;\n      pointer-events: auto;\n    }\n\n    .react-contextmenu-item {\n      background: 0 0;\n      border: 0;\n      color: #373a3c;\n      cursor: pointer;\n      font-weight: 400;\n      line-height: 1.5;\n      padding: 3px 20px;\n      text-align: inherit;\n      white-space: nowrap;\n    }\n\n    .react-contextmenu-item.react-contextmenu-item--active,\n    .react-contextmenu-item.react-contextmenu-item--selected {\n      color: #fff;\n      background-color: #20a0ff;\n      border-color: #20a0ff;\n      text-decoration: none;\n    }\n\n    .react-contextmenu-item.react-contextmenu-item--disabled,\n    .react-contextmenu-item.react-contextmenu-item--disabled:hover {\n      background-color: transparent;\n      border-color: rgba(0, 0, 0, 0.15);\n      color: #878a8c;\n    }\n\n    .react-contextmenu-item--divider {\n      border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n      cursor: inherit;\n      margin-bottom: 3px;\n      padding: 2px 0;\n    }\n\n    .react-contextmenu-item--divider:hover {\n      background-color: transparent;\n      border-color: rgba(0, 0, 0, 0.15);\n    }\n\n    .react-contextmenu-item.react-contextmenu-submenu {\n      padding: 0;\n    }\n\n    .react-contextmenu-item.react-contextmenu-submenu > .react-contextmenu-item::after {\n      content: '▶';\n      display: inline-block;\n      position: absolute;\n      right: 7px;\n    }\n\n    .example-multiple-targets::after {\n      content: attr(data-count);\n      display: block;\n    }\n  }\n`;\n\ninterface Row {\n  id: number;\n  product: string;\n  price: string;\n}\n\nfunction createRows(): Row[] {\n  const rows = [];\n  for (let i = 1; i < 1000; i++) {\n    rows.push({\n      id: i,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    });\n  }\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  { key: 'id', name: 'ID' },\n  { key: 'product', name: 'Product' },\n  { key: 'price', name: 'Price' }\n];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfunction RowRenderer(props: RowRendererProps<Row>) {\n  return (\n    <ContextMenuTrigger id=\"grid-context-menu\" collect={() => ({ rowIdx: props.rowIdx })}>\n      <GridRow {...props} />\n    </ContextMenuTrigger>\n  );\n}\n\nexport default function ContextMenuDemo() {\n  const [rows, setRows] = useState(createRows);\n  const [nextId, setNextId] = useReducer((id: number) => id + 1, rows[rows.length - 1].id + 1);\n\n  function onRowDelete(e: React.MouseEvent<HTMLDivElement>, { rowIdx }: { rowIdx: number }) {\n    setRows([...rows.slice(0, rowIdx), ...rows.slice(rowIdx + 1)]);\n  }\n\n  function onRowInsertAbove(e: React.MouseEvent<HTMLDivElement>, { rowIdx }: { rowIdx: number }) {\n    insertRow(rowIdx);\n  }\n\n  function onRowInsertBelow(e: React.MouseEvent<HTMLDivElement>, { rowIdx }: { rowIdx: number }) {\n    insertRow(rowIdx + 1);\n  }\n\n  function insertRow(insertRowIdx: number) {\n    const newRow: Row = {\n      id: nextId,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    };\n\n    setRows([...rows.slice(0, insertRowIdx), newRow, ...rows.slice(insertRowIdx)]);\n    setNextId();\n  }\n\n  return (\n    <>\n      <DataGrid\n        rowKeyGetter={rowKeyGetter}\n        columns={columns}\n        rows={rows}\n        rowRenderer={RowRenderer}\n        className=\"fill-grid\"\n      />\n      {createPortal(\n        <ContextMenu id=\"grid-context-menu\">\n          <MenuItem onClick={onRowDelete}>Delete Row</MenuItem>\n          <SubMenu title=\"Insert Row\">\n            <MenuItem onClick={onRowInsertAbove}>Above</MenuItem>\n            <MenuItem onClick={onRowInsertBelow}>Below</MenuItem>\n          </SubMenu>\n        </ContextMenu>,\n        document.body\n      )}\n    </>\n  );\n}\n","import { useState } from 'react';\nimport { groupBy as rowGrouper } from 'lodash';\nimport faker from 'faker';\nimport { css } from '@linaria/core';\n\nimport DataGrid, { SelectColumn } from '../../src';\nimport type { Column } from '../../src';\n\nconst groupingClassname = css`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  gap: 8px;\n\n  > .rdg {\n    flex: 1;\n  }\n`;\n\nconst optionsClassname = css`\n  display: flex;\n  gap: 8px;\n  text-transform: capitalize;\n`;\n\ninterface Row {\n  id: number;\n  country: string;\n  year: number;\n  sport: string;\n  athlete: string;\n  gold: number;\n  silver: number;\n  bronze: number;\n}\n\nconst sports = [\n  'Swimming',\n  'Gymnastics',\n  'Speed Skating',\n  'Cross Country Skiing',\n  'Short-Track Speed Skating',\n  'Diving',\n  'Cycling',\n  'Biathlon',\n  'Alpine Skiing',\n  'Ski Jumping',\n  'Nordic Combined',\n  'Athletics',\n  'Table Tennis',\n  'Tennis',\n  'Synchronized Swimming',\n  'Shooting',\n  'Rowing',\n  'Fencing',\n  'Equestrian',\n  'Canoeing',\n  'Bobsleigh',\n  'Badminton',\n  'Archery',\n  'Wrestling',\n  'Weightlifting',\n  'Waterpolo',\n  'Wrestling',\n  'Weightlifting'\n];\n\nconst columns: readonly Column<Row>[] = [\n  SelectColumn,\n  {\n    key: 'country',\n    name: 'Country'\n  },\n  {\n    key: 'year',\n    name: 'Year'\n  },\n  {\n    key: 'sport',\n    name: 'Sport'\n  },\n  {\n    key: 'athlete',\n    name: 'Athlete'\n  },\n  {\n    key: 'gold',\n    name: 'Gold',\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, { gold }) => prev + gold, 0)}</>;\n    }\n  },\n  {\n    key: 'silver',\n    name: 'Silver',\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, { silver }) => prev + silver, 0)}</>;\n    }\n  },\n  {\n    key: 'bronze',\n    name: 'Bronze',\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, { silver }) => prev + silver, 0)}</>;\n    }\n  },\n  {\n    key: 'total',\n    name: 'Total',\n    formatter({ row }) {\n      return <>{row.gold + row.silver + row.bronze}</>;\n    },\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, row) => prev + row.gold + row.silver + row.bronze, 0)}</>;\n    }\n  }\n];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n  for (let i = 1; i < 10000; i++) {\n    rows.push({\n      id: i,\n      year: 2015 + faker.datatype.number(3),\n      country: faker.address.country(),\n      sport: sports[faker.datatype.number(sports.length - 1)],\n      athlete: faker.name.findName(),\n      gold: faker.datatype.number(5),\n      silver: faker.datatype.number(5),\n      bronze: faker.datatype.number(5)\n    });\n  }\n\n  return rows.sort((r1, r2) => r2.country.localeCompare(r1.country));\n}\n\nconst options = ['country', 'year', 'sport', 'athlete'] as const;\n\nexport default function Grouping() {\n  const [rows] = useState(createRows);\n  const [selectedRows, setSelectedRows] = useState<ReadonlySet<number>>(() => new Set());\n  const [selectedOptions, setSelectedOptions] = useState<readonly string[]>([\n    options[0],\n    options[1]\n  ]);\n  const [expandedGroupIds, setExpandedGroupIds] = useState<ReadonlySet<unknown>>(\n    () => new Set<unknown>(['United States of America', 'United States of America__2015'])\n  );\n\n  function toggleOption(option: string, enabled: boolean) {\n    const index = selectedOptions.indexOf(option);\n    if (enabled) {\n      if (index === -1) {\n        setSelectedOptions((options) => [...options, option]);\n      }\n    } else if (index !== -1) {\n      setSelectedOptions((options) => {\n        const newOptions = [...options];\n        newOptions.splice(index, 1);\n        return newOptions;\n      });\n    }\n    setExpandedGroupIds(new Set());\n  }\n\n  return (\n    <div className={groupingClassname}>\n      <b>Group by columns:</b>\n      <div className={optionsClassname}>\n        {options.map((option) => (\n          <label key={option}>\n            <input\n              type=\"checkbox\"\n              checked={selectedOptions.includes(option)}\n              onChange={(event) => toggleOption(option, event.target.checked)}\n            />{' '}\n            {option}\n          </label>\n        ))}\n      </div>\n\n      <DataGrid\n        columns={columns}\n        rows={rows}\n        rowKeyGetter={rowKeyGetter}\n        selectedRows={selectedRows}\n        onSelectedRowsChange={setSelectedRows}\n        groupBy={selectedOptions}\n        rowGrouper={rowGrouper}\n        expandedGroupIds={expandedGroupIds}\n        onExpandedGroupIdsChange={setExpandedGroupIds}\n        defaultColumnOptions={{ resizable: true }}\n      />\n    </div>\n  );\n}\n","import { createContext, useContext, useMemo, useState } from 'react';\nimport faker from 'faker';\nimport { css } from '@linaria/core';\n\nimport DataGrid from '../../src';\nimport type { Column } from '../../src';\nimport type { HeaderRendererProps, Omit } from '../../src/types';\nimport { useFocusRef } from '../../src/hooks';\n\nconst rootClassname = css`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  gap: 10px;\n\n  > .rdg {\n    flex: 1;\n  }\n`;\n\nconst toolbarClassname = css`\n  text-align: end;\n`;\n\nconst filterColumnClassName = 'filter-cell';\n\nconst filterContainerClassname = css`\n  .${filterColumnClassName} {\n    line-height: 35px;\n    padding: 0;\n\n    > div {\n      padding: 0 8px;\n\n      &:first-child {\n        border-bottom: 1px solid var(--rdg-border-color);\n      }\n    }\n  }\n`;\n\nconst filterClassname = css`\n  width: 100%;\n  padding: 4px;\n  font-size: 14px;\n`;\n\ninterface Row {\n  id: number;\n  task: string;\n  priority: string;\n  issueType: string;\n  developer: string;\n  complete: number;\n}\n\ninterface Filter extends Omit<Row, 'id' | 'complete'> {\n  complete: number | undefined;\n  enabled: boolean;\n}\n\n// Context is needed to read filter values otherwise columns are\n// re-created when filters are changed and filter loses focus\nconst FilterContext = createContext<Filter | undefined>(undefined);\n\nfunction inputStopPropagation(event: React.KeyboardEvent<HTMLInputElement>) {\n  if (['ArrowLeft', 'ArrowRight'].includes(event.key)) {\n    event.stopPropagation();\n  }\n}\n\nfunction selectStopPropagation(event: React.KeyboardEvent<HTMLSelectElement>) {\n  if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(event.key)) {\n    event.stopPropagation();\n  }\n}\n\nexport default function HeaderFilters() {\n  const [rows] = useState(createRows);\n  const [filters, setFilters] = useState<Filter>({\n    task: '',\n    priority: 'Critical',\n    issueType: 'All',\n    developer: '',\n    complete: undefined,\n    enabled: true\n  });\n\n  const developerOptions = useMemo(\n    () =>\n      Array.from(new Set(rows.map((r) => r.developer))).map((d) => ({\n        label: d,\n        value: d\n      })),\n    [rows]\n  );\n\n  const columns = useMemo((): readonly Column<Row>[] => {\n    return [\n      {\n        key: 'id',\n        name: 'ID',\n        width: 50\n      },\n      {\n        key: 'task',\n        name: 'Title',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLInputElement> {...p}>\n            {({ filters, ...rest }) => (\n              <input\n                {...rest}\n                className={filterClassname}\n                value={filters.task}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    task: e.target.value\n                  })\n                }\n                onKeyDown={inputStopPropagation}\n              />\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'priority',\n        name: 'Priority',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLSelectElement> {...p}>\n            {({ filters, ...rest }) => (\n              <select\n                {...rest}\n                className={filterClassname}\n                value={filters.priority}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    priority: e.target.value\n                  })\n                }\n                onKeyDown={selectStopPropagation}\n              >\n                <option value=\"All\">All</option>\n                <option value=\"Critical\">Critical</option>\n                <option value=\"High\">High</option>\n                <option value=\"Medium\">Medium</option>\n                <option value=\"Low\">Low</option>\n              </select>\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'issueType',\n        name: 'Issue Type',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLSelectElement> {...p}>\n            {({ filters, ...rest }) => (\n              <select\n                {...rest}\n                className={filterClassname}\n                value={filters.issueType}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    issueType: e.target.value\n                  })\n                }\n                onKeyDown={selectStopPropagation}\n              >\n                <option value=\"All\">All</option>\n                <option value=\"Bug\">Bug</option>\n                <option value=\"Improvement\">Improvement</option>\n                <option value=\"Epic\">Epic</option>\n                <option value=\"Story\">Story</option>\n              </select>\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'developer',\n        name: 'Developer',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLInputElement> {...p}>\n            {({ filters, ...rest }) => (\n              <input\n                {...rest}\n                className={filterClassname}\n                value={filters.developer}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    developer: e.target.value\n                  })\n                }\n                onKeyDown={inputStopPropagation}\n                list=\"developers\"\n              />\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'complete',\n        name: '% Complete',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLInputElement> {...p}>\n            {({ filters, ...rest }) => (\n              <input\n                {...rest}\n                type=\"number\"\n                className={filterClassname}\n                value={filters.complete}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    complete: Number.isFinite(e.target.valueAsNumber)\n                      ? e.target.valueAsNumber\n                      : undefined\n                  })\n                }\n                onKeyDown={inputStopPropagation}\n              />\n            )}\n          </FilterRenderer>\n        )\n      }\n    ];\n  }, []);\n\n  const filteredRows = useMemo(() => {\n    return rows.filter((r) => {\n      return (\n        (filters.task ? r.task.includes(filters.task) : true) &&\n        (filters.priority !== 'All' ? r.priority === filters.priority : true) &&\n        (filters.issueType !== 'All' ? r.issueType === filters.issueType : true) &&\n        (filters.developer\n          ? r.developer.toLowerCase().startsWith(filters.developer.toLowerCase())\n          : true) &&\n        (filters.complete !== undefined ? r.complete >= filters.complete : true)\n      );\n    });\n  }, [rows, filters]);\n\n  function clearFilters() {\n    setFilters({\n      task: '',\n      priority: 'All',\n      issueType: 'All',\n      developer: '',\n      complete: undefined,\n      enabled: true\n    });\n  }\n\n  function toggleFilters() {\n    setFilters((filters) => ({\n      ...filters,\n      enabled: !filters.enabled\n    }));\n  }\n\n  return (\n    <div className={rootClassname}>\n      <div className={toolbarClassname}>\n        <button type=\"button\" onClick={toggleFilters}>\n          Toggle Filters\n        </button>{' '}\n        <button type=\"button\" onClick={clearFilters}>\n          Clear Filters\n        </button>\n      </div>\n      <FilterContext.Provider value={filters}>\n        <DataGrid\n          className={filters.enabled ? filterContainerClassname : undefined}\n          columns={columns}\n          rows={filteredRows}\n          headerRowHeight={filters.enabled ? 70 : undefined}\n        />\n      </FilterContext.Provider>\n      <datalist id=\"developers\">\n        {developerOptions.map(({ label, value }) => (\n          <option key={value} value={value}>\n            {label}\n          </option>\n        ))}\n      </datalist>\n    </div>\n  );\n}\n\nfunction FilterRenderer<R, SR, T extends HTMLOrSVGElement>({\n  isCellSelected,\n  column,\n  children\n}: HeaderRendererProps<R, SR> & {\n  children: (args: {\n    ref: React.RefObject<T>;\n    tabIndex: number;\n    filters: Filter;\n  }) => React.ReactElement;\n}) {\n  const filters = useContext(FilterContext)!;\n  const { ref, tabIndex } = useFocusRef<T>(isCellSelected);\n\n  return (\n    <>\n      <div>{column.name}</div>\n      {filters.enabled && <div>{children({ ref, tabIndex, filters })}</div>}\n    </>\n  );\n}\n\nfunction createRows() {\n  const rows: Row[] = [];\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.floor(Math.random() * 4)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.floor(Math.random() * 4)],\n      developer: faker.name.findName()\n    });\n  }\n  return rows;\n}\n","import faker from 'faker';\nimport { useState } from 'react';\nimport { css } from '@linaria/core';\nimport DataGrid from '../../src';\nimport type { Column } from '../../src';\n\nconst loadMoreRowsClassname = css`\n  width: 180px;\n  padding: 8px 16px;\n  position: absolute;\n  bottom: 8px;\n  right: 8px;\n  color: white;\n  line-height: 35px;\n  background: rgb(0 0 0 / 0.6);\n`;\n\ninterface Row {\n  id: string;\n  email: string;\n  title: string;\n  firstName: string;\n  lastName: string;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID'\n  },\n  {\n    key: 'title',\n    name: 'Title'\n  },\n  {\n    key: 'firstName',\n    name: 'First Name'\n  },\n  {\n    key: 'lastName',\n    name: 'Last Name'\n  },\n  {\n    key: 'email',\n    name: 'Email'\n  }\n];\n\nfunction createFakeRowObjectData(index: number): Row {\n  return {\n    id: `id_${index}`,\n    email: faker.internet.email(),\n    title: faker.name.prefix(),\n    firstName: faker.name.firstName(),\n    lastName: faker.name.lastName()\n  };\n}\n\nfunction createRows(numberOfRows: number): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 0; i < numberOfRows; i++) {\n    rows[i] = createFakeRowObjectData(i);\n  }\n\n  return rows;\n}\n\nfunction isAtBottom({ currentTarget }: React.UIEvent<HTMLDivElement>): boolean {\n  return currentTarget.scrollTop + 10 >= currentTarget.scrollHeight - currentTarget.clientHeight;\n}\n\nfunction loadMoreRows(newRowsCount: number, length: number): Promise<Row[]> {\n  return new Promise((resolve) => {\n    const newRows: Row[] = [];\n\n    for (let i = 0; i < newRowsCount; i++) {\n      newRows[i] = createFakeRowObjectData(i + length);\n    }\n\n    setTimeout(() => resolve(newRows), 1000);\n  });\n}\n\nexport default function InfiniteScrolling() {\n  const [rows, setRows] = useState(() => createRows(50));\n  const [isLoading, setIsLoading] = useState(false);\n\n  async function handleScroll(event: React.UIEvent<HTMLDivElement>) {\n    if (isLoading || !isAtBottom(event)) return;\n\n    setIsLoading(true);\n\n    const newRows = await loadMoreRows(50, rows.length);\n\n    setRows([...rows, ...newRows]);\n    setIsLoading(false);\n  }\n\n  return (\n    <>\n      <DataGrid\n        columns={columns}\n        rows={rows}\n        rowKeyGetter={rowKeyGetter}\n        onRowsChange={setRows}\n        rowHeight={30}\n        onScroll={handleScroll}\n        className=\"fill-grid\"\n      />\n      {isLoading && <div className={loadMoreRowsClassname}>Loading more rows...</div>}\n    </>\n  );\n}\n","import { css } from '@linaria/core';\nimport { useFocusRef } from '../../../../src/hooks';\n\nconst cellExpandClassname = css`\n  float: right;\n  display: table;\n  height: 100%;\n\n  > span {\n    display: table-cell;\n    vertical-align: middle;\n    cursor: pointer;\n  }\n`;\n\ninterface CellExpanderFormatterProps {\n  isCellSelected: boolean;\n  expanded: boolean;\n  onCellExpand: () => void;\n}\n\nexport function CellExpanderFormatter({\n  isCellSelected,\n  expanded,\n  onCellExpand\n}: CellExpanderFormatterProps) {\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown(e: React.KeyboardEvent<HTMLSpanElement>) {\n    if (e.key === ' ' || e.key === 'Enter') {\n      e.preventDefault();\n      onCellExpand();\n    }\n  }\n\n  return (\n    <div className={cellExpandClassname}>\n      <span onClick={onCellExpand} onKeyDown={handleKeyDown}>\n        <span ref={ref} tabIndex={tabIndex}>\n          {expanded ? '\\u25BC' : '\\u25B6'}\n        </span>\n      </span>\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { css } from '@linaria/core';\nimport faker from 'faker';\n\nimport DataGrid from '../../src';\nimport type { Column, RowsChangeData, DataGridHandle } from '../../src';\nimport { CellExpanderFormatter } from './components/Formatters';\n\ntype DepartmentRow =\n  | {\n      type: 'MASTER';\n      id: number;\n      department: string;\n      expanded: boolean;\n    }\n  | {\n      type: 'DETAIL';\n      id: number;\n      parentId: number;\n    };\n\ninterface ProductRow {\n  id: number;\n  product: string;\n  description: string;\n  price: string;\n}\n\nfunction createDepartments(): readonly DepartmentRow[] {\n  const departments: DepartmentRow[] = [];\n  for (let i = 1; i < 30; i++) {\n    departments.push({\n      type: 'MASTER',\n      id: i,\n      department: faker.commerce.department(),\n      expanded: false\n    });\n  }\n  return departments;\n}\n\nconst productsMap = new Map<number, readonly ProductRow[]>();\nfunction getProducts(parentId: number): readonly ProductRow[] {\n  if (productsMap.has(parentId)) return productsMap.get(parentId)!;\n  const products: ProductRow[] = [];\n  for (let i = 0; i < 20; i++) {\n    products.push({\n      id: i,\n      product: faker.commerce.productName(),\n      description: faker.commerce.productDescription(),\n      price: faker.commerce.price()\n    });\n  }\n  productsMap.set(parentId, products);\n  return products;\n}\n\nconst productColumns: readonly Column<ProductRow>[] = [\n  { key: 'id', name: 'ID', width: 35 },\n  { key: 'product', name: 'Product' },\n  { key: 'description', name: 'Description' },\n  { key: 'price', name: 'Price' }\n];\n\nconst departmentColumns: readonly Column<DepartmentRow>[] = [\n  {\n    key: 'expanded',\n    name: '',\n    minWidth: 30,\n    width: 30,\n    colSpan(args) {\n      return args.type === 'ROW' && args.row.type === 'DETAIL' ? 3 : undefined;\n    },\n    cellClass(row) {\n      return row.type === 'DETAIL'\n        ? css`\n            padding: 24px;\n          `\n        : undefined;\n    },\n    formatter({ row, isCellSelected, onRowChange }) {\n      if (row.type === 'DETAIL') {\n        return <ProductGrid isCellSelected={isCellSelected} parentId={row.parentId} />;\n      }\n\n      return (\n        <CellExpanderFormatter\n          expanded={row.expanded}\n          isCellSelected={isCellSelected}\n          onCellExpand={() => {\n            onRowChange({ ...row, expanded: !row.expanded });\n          }}\n        />\n      );\n    }\n  },\n  { key: 'id', name: 'ID', width: 35 },\n  { key: 'department', name: 'Department' }\n];\n\nexport default function MasterDetail() {\n  const [rows, setRows] = useState(createDepartments);\n\n  function onRowsChange(rows: DepartmentRow[], { indexes }: RowsChangeData<DepartmentRow>) {\n    const row = rows[indexes[0]];\n    if (row.type === 'MASTER') {\n      if (!row.expanded) {\n        rows.splice(indexes[0] + 1, 1);\n      } else {\n        rows.splice(indexes[0] + 1, 0, {\n          type: 'DETAIL',\n          id: row.id + 100,\n          parentId: row.id\n        });\n      }\n      setRows(rows);\n    }\n  }\n\n  return (\n    <DataGrid\n      rowKeyGetter={rowKeyGetter}\n      columns={departmentColumns}\n      rows={rows}\n      onRowsChange={onRowsChange}\n      headerRowHeight={45}\n      rowHeight={(args) => (args.type === 'ROW' && args.row.type === 'DETAIL' ? 300 : 45)}\n      className=\"fill-grid\"\n      enableVirtualization={false}\n    />\n  );\n}\n\nfunction ProductGrid({ parentId, isCellSelected }: { parentId: number; isCellSelected: boolean }) {\n  const gridRef = useRef<DataGridHandle>(null);\n  useEffect(() => {\n    if (!isCellSelected) return;\n    gridRef\n      .current!.element!.querySelector<HTMLDivElement>('[tabindex=\"0\"]')!\n      .focus({ preventScroll: true });\n  }, [isCellSelected]);\n  const products = getProducts(parentId);\n\n  function onKeyDown(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (event.isDefaultPrevented()) {\n      event.stopPropagation();\n    }\n  }\n\n  return (\n    <div onKeyDown={onKeyDown}>\n      <DataGrid\n        ref={gridRef}\n        rows={products}\n        columns={productColumns}\n        rowKeyGetter={rowKeyGetter}\n        style={{ height: 250 }}\n      />\n    </div>\n  );\n}\n\nfunction rowKeyGetter(row: DepartmentRow | ProductRow) {\n  return row.id;\n}\n","import { useMemo } from 'react';\nimport DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(1000).keys()];\n\nfunction CellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nexport default function MillionCells() {\n  const columns = useMemo((): readonly Column<Row>[] => {\n    const columns: Column<Row>[] = [];\n\n    for (let i = 0; i < 1000; i++) {\n      const key = String(i);\n      columns.push({\n        key,\n        name: key,\n        frozen: i < 5,\n        resizable: true,\n        formatter: CellFormatter\n      });\n    }\n\n    return columns;\n  }, []);\n\n  return <DataGrid columns={columns} rows={rows} rowHeight={22} className=\"fill-grid\" />;\n}\n","import { useState } from 'react';\nimport DataGrid, { SelectColumn } from '../../src';\nimport type { Column } from '../../src';\n\nfunction EmptyRowsRenderer() {\n  return (\n    <div style={{ textAlign: 'center', gridColumn: '1/-1' }}>\n      Nothing to show{' '}\n      <span lang=\"ja\" title=\"ショボーン\">\n        (´・ω・`)\n      </span>\n    </div>\n  );\n}\n\ninterface Row {\n  id: number;\n  title: string;\n  count: number;\n}\n\nconst columns: readonly Column<Row>[] = [\n  SelectColumn,\n  { key: 'id', name: 'ID' },\n  { key: 'title', name: 'Title' },\n  { key: 'count', name: 'Count' }\n];\n\nconst rows: readonly Row[] = [];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nexport default function NoRows() {\n  const [selectedRows, onSelectedRowsChange] = useState((): ReadonlySet<number> => new Set());\n\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      noRowsFallback={<EmptyRowsRenderer />}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={onSelectedRowsChange}\n      rowKeyGetter={rowKeyGetter}\n      className=\"small-grid\"\n    />\n  );\n}\n","import DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(100).keys()];\n\nfunction CellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nconst columns: Column<Row>[] = [];\n\nfor (let i = 0; i < 50; i++) {\n  const key = String(i);\n  columns.push({\n    key,\n    name: key,\n    formatter: CellFormatter\n  });\n}\n\nexport default function ResizableGrid() {\n  return (\n    <DataGrid columns={columns} rows={rows} className=\"fill-grid\" style={{ resize: 'both' }} />\n  );\n}\n","import { useDrag, useDrop } from 'react-dnd';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport { Row } from '../../../../src';\nimport type { RowRendererProps } from '../../../../src';\n\nconst rowDraggingClassname = css`\n  opacity: 0.5;\n`;\n\nconst rowOverClassname = css`\n  background-color: #ececec;\n`;\n\ninterface DraggableRowRenderProps<R, SR> extends RowRendererProps<R, SR> {\n  onRowReorder: (sourceIndex: number, targetIndex: number) => void;\n}\n\nexport function DraggableRowRenderer<R, SR>({\n  rowIdx,\n  isRowSelected,\n  className,\n  onRowReorder,\n  ...props\n}: DraggableRowRenderProps<R, SR>) {\n  const [{ isDragging }, drag] = useDrag({\n    type: 'ROW_DRAG',\n    item: { index: rowIdx },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n\n  const [{ isOver }, drop] = useDrop({\n    accept: 'ROW_DRAG',\n    drop({ index }: { index: number }) {\n      onRowReorder(index, rowIdx);\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n\n  className = clsx(className, {\n    [rowDraggingClassname]: isDragging,\n    [rowOverClassname]: isOver\n  });\n\n  return (\n    <Row\n      ref={(ref) => {\n        if (ref) {\n          drag(ref.firstElementChild);\n        }\n        drop(ref);\n      }}\n      rowIdx={rowIdx}\n      isRowSelected={isRowSelected}\n      className={className}\n      {...props}\n    />\n  );\n}\n","import { useCallback, useState } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport { DraggableRowRenderer } from './components/RowRenderers';\nimport DataGrid, { TextEditor } from '../../src';\nimport type { Column, RowRendererProps } from '../../src';\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows = [];\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    editor: TextEditor\n  },\n  {\n    key: 'priority',\n    name: 'Priority'\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type'\n  },\n  {\n    key: 'complete',\n    name: '% Complete'\n  }\n];\n\nexport default function RowsReordering() {\n  const [rows, setRows] = useState(createRows);\n\n  const RowRenderer = useCallback((props: RowRendererProps<Row>) => {\n    function onRowReorder(fromIndex: number, toIndex: number) {\n      setRows((rows) => {\n        const newRows = [...rows];\n        newRows.splice(toIndex, 0, newRows.splice(fromIndex, 1)[0]);\n        return newRows;\n      });\n    }\n\n    return <DraggableRowRenderer {...props} onRowReorder={onRowReorder} />;\n  }, []);\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <DataGrid columns={columns} rows={rows} onRowsChange={setRows} rowRenderer={RowRenderer} />\n    </DndProvider>\n  );\n}\n","import { useState, useRef } from 'react';\nimport DataGrid from '../../src';\nimport type { Column, DataGridHandle } from '../../src';\n\ninterface Row {\n  id: number;\n  title: string;\n  count: number;\n}\n\nconst columns: readonly Column<Row>[] = [\n  { key: 'id', name: 'ID' },\n  { key: 'title', name: 'Title' },\n  { key: 'count', name: 'Count' }\n];\n\nexport default function ScrollToRow() {\n  const [rows] = useState(() => {\n    const rows: Row[] = [];\n\n    for (let i = 0; i < 1000; i++) {\n      rows.push({\n        id: i,\n        title: `Title ${i}`,\n        count: i * 1000\n      });\n    }\n\n    return rows;\n  });\n  const [value, setValue] = useState('10');\n  const gridRef = useRef<DataGridHandle>(null);\n\n  return (\n    <>\n      <div style={{ marginBottom: 5 }}>\n        <span style={{ marginRight: 5 }}>Row index: </span>\n        <input\n          style={{ width: 50 }}\n          type=\"number\"\n          value={value}\n          onChange={(event) => setValue(event.target.value)}\n        />\n        <button type=\"button\" onClick={() => gridRef.current!.scrollToRow(Number(value))}>\n          Scroll to row\n        </button>\n      </div>\n      <DataGrid ref={gridRef} columns={columns} rows={rows} />\n    </>\n  );\n}\n","import { css } from '@linaria/core';\nimport { useFocusRef } from '../../../../src/hooks';\n\nconst childRowActionCrossClassname = css`\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background: grey;\n  }\n\n  &::before {\n    left: 21px;\n    width: 1px;\n    height: 100%;\n  }\n\n  &::after {\n    top: 50%;\n    left: 20px;\n    height: 1px;\n    width: 15px;\n  }\n\n  &:hover {\n    background: red;\n  }\n`;\n\nconst childRowButtonClassname = css`\n  cursor: pointer;\n  position: absolute;\n  left: 21px;\n  transform: translateX(-50%);\n  filter: grayscale(1);\n`;\n\ninterface ChildRowDeleteButtonProps {\n  isCellSelected: boolean;\n  isDeleteSubRowEnabled: boolean;\n  onDeleteSubRow: () => void;\n}\n\nexport function ChildRowDeleteButton({\n  isCellSelected,\n  onDeleteSubRow,\n  isDeleteSubRowEnabled\n}: ChildRowDeleteButtonProps) {\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown(e: React.KeyboardEvent<HTMLSpanElement>) {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      onDeleteSubRow();\n    }\n  }\n\n  return (\n    <>\n      <div className={childRowActionCrossClassname} />\n      {isDeleteSubRowEnabled && (\n        <div className={childRowButtonClassname} onClick={onDeleteSubRow}>\n          <span ref={ref} tabIndex={tabIndex} onKeyDown={handleKeyDown}>\n            ❌\n          </span>\n        </div>\n      )}\n    </>\n  );\n}\n","import { useState, useReducer, useMemo } from 'react';\n\nimport DataGrid from '../../src';\nimport type { Column } from '../../src';\nimport { CellExpanderFormatter, ChildRowDeleteButton } from './components/Formatters';\n\ninterface Row {\n  id: string;\n  name: string;\n  format: string;\n  position: string;\n  price: number;\n  children?: Row[];\n  parentId?: string;\n  isExpanded?: boolean;\n}\n\ninterface Action {\n  type: 'toggleSubRow' | 'deleteSubRow';\n  id: string;\n}\n\nfunction createRows(): Row[] {\n  const rows = [];\n  for (let i = 0; i < 100; i++) {\n    const price = Math.random() * 30;\n    const id = `row${i}`;\n    const row: Row = {\n      id,\n      name: `supplier ${i}`,\n      format: `package ${i}`,\n      position: 'Run of site',\n      price,\n      children: [\n        {\n          id: `${id}-0`,\n          parentId: id,\n          name: `supplier ${i}`,\n          format: '728x90',\n          position: 'run of site',\n          price: price / 2\n        },\n        {\n          id: `${id}-1`,\n          parentId: id,\n          name: `supplier ${i}`,\n          format: '480x600',\n          position: 'run of site',\n          price: price * 0.25\n        },\n        {\n          id: `${id}-2`,\n          parentId: id,\n          name: `supplier ${i}`,\n          format: '328x70',\n          position: 'run of site',\n          price: price * 0.25\n        }\n      ],\n      isExpanded: false\n    };\n    rows.push(row);\n  }\n  return rows;\n}\n\nfunction toggleSubRow(rows: Row[], id: string): Row[] {\n  const rowIndex = rows.findIndex((r) => r.id === id);\n  const row = rows[rowIndex];\n  const { children } = row;\n  if (!children) return rows;\n\n  const newRows = [...rows];\n  newRows[rowIndex] = { ...row, isExpanded: !row.isExpanded };\n  if (!row.isExpanded) {\n    newRows.splice(rowIndex + 1, 0, ...children);\n  } else {\n    newRows.splice(rowIndex + 1, children.length);\n  }\n  return newRows;\n}\n\nfunction deleteSubRow(rows: Row[], id: string): Row[] {\n  const row = rows.find((r) => r.id === id);\n  if (!row || !row.parentId) return rows;\n\n  // Remove sub row from flattened rows.\n  const newRows = rows.filter((r) => r.id !== id);\n\n  // Remove sub row from parent row.\n  const parentRowIndex = newRows.findIndex((r) => r.id === row.parentId);\n  const { children } = newRows[parentRowIndex];\n  if (children) {\n    const newChildren = children.filter((sr) => sr.id !== id);\n    newRows[parentRowIndex] = { ...newRows[parentRowIndex], children: newChildren };\n  }\n\n  return newRows;\n}\n\nfunction reducer(rows: Row[], { type, id }: Action): Row[] {\n  switch (type) {\n    case 'toggleSubRow':\n      return toggleSubRow(rows, id);\n    case 'deleteSubRow':\n      return deleteSubRow(rows, id);\n    default:\n      return rows;\n  }\n}\n\nconst defaultRows = createRows();\n\nexport default function TreeView() {\n  const [rows, dispatch] = useReducer(reducer, defaultRows);\n  const [allowDelete, setAllowDelete] = useState(true);\n  const columns: Column<Row>[] = useMemo(() => {\n    return [\n      {\n        key: 'id',\n        name: 'id',\n        frozen: true\n      },\n      {\n        key: 'name',\n        name: 'Name'\n      },\n      {\n        key: 'format',\n        name: 'format',\n        formatter({ row, isCellSelected }) {\n          const hasChildren = row.children !== undefined;\n          const style = !hasChildren ? { marginLeft: 30 } : undefined;\n          return (\n            <>\n              {hasChildren && (\n                <CellExpanderFormatter\n                  isCellSelected={isCellSelected}\n                  expanded={row.isExpanded === true}\n                  onCellExpand={() => dispatch({ id: row.id, type: 'toggleSubRow' })}\n                />\n              )}\n              <div className=\"rdg-cell-value\">\n                {!hasChildren && (\n                  <ChildRowDeleteButton\n                    isCellSelected={isCellSelected}\n                    isDeleteSubRowEnabled={allowDelete}\n                    onDeleteSubRow={() => dispatch({ id: row.id, type: 'deleteSubRow' })}\n                  />\n                )}\n                <div style={style}>{row.format}</div>\n              </div>\n            </>\n          );\n        }\n      },\n      {\n        key: 'position',\n        name: 'position'\n      },\n      {\n        key: 'price',\n        name: 'price'\n      }\n    ];\n  }, [allowDelete]);\n\n  return (\n    <>\n      <label>\n        Allow Delete\n        <input\n          type=\"checkbox\"\n          checked={allowDelete}\n          onChange={() => setAllowDelete(!allowDelete)}\n        />\n      </label>\n      <DataGrid columns={columns} rows={rows} className=\"big-grid\" />\n    </>\n  );\n}\n","import { useMemo } from 'react';\n\nimport DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(500).keys()];\n\nfunction CellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nexport default function VariableRowHeight() {\n  const columns = useMemo((): readonly Column<Row>[] => {\n    const columns: Column<Row>[] = [];\n\n    for (let i = 0; i < 30; i++) {\n      const key = String(i);\n      columns.push({\n        key,\n        name: key,\n        frozen: i < 5,\n        resizable: true,\n        formatter: CellFormatter\n      });\n    }\n\n    return columns;\n  }, []);\n\n  return <DataGrid columns={columns} rows={rows} rowHeight={rowHeight} className=\"fill-grid\" />;\n}\n\nfunction rowHeight() {\n  // should be based on the content of the row\n  return 25 + Math.round(Math.random() * 75);\n}\n","import { StrictMode } from 'react';\nimport { render } from 'react-dom';\nimport { css } from '@linaria/core';\nimport { HashRouter as Router, Switch, Redirect, Route } from 'react-router-dom';\n\nimport Nav from './Nav';\n\nimport CommonFeatures from './demos/CommonFeatures';\nimport AllFeatures from './demos/AllFeatures';\nimport CellNavigation from './demos/CellNavigation';\nimport ColumnSpanning from './demos/ColumnSpanning';\nimport ColumnsReordering from './demos/ColumnsReordering';\nimport ContextMenuDemo from './demos/ContextMenu';\nimport Grouping from './demos/Grouping';\nimport HeaderFilters from './demos/HeaderFilters';\nimport InfiniteScrolling from './demos/InfiniteScrolling';\nimport MasterDetail from './demos/MasterDetail';\nimport MillionCells from './demos/MillionCells';\nimport NoRows from './demos/NoRows';\nimport ResizableGrid from './demos/Resizable';\nimport RowsReordering from './demos/RowsReordering';\nimport ScrollToRow from './demos/ScrollToRow';\nimport TreeView from './demos/TreeView';\nimport VariableRowHeight from './demos/VariableRowHeight';\n\ncss`\n  @at-root {\n    :root,\n    body {\n      padding: 0;\n      margin: 0;\n      font-family: sans-serif;\n    }\n\n    :root {\n      color-scheme: light dark;\n\n      @media (prefers-color-scheme: light) {\n        background-color: #fff;\n        color: #111;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        background-color: hsl(0deg 0% 10%);\n        color: #fff;\n      }\n    }\n\n    #root {\n      display: grid;\n      grid-template-columns: auto 1fr;\n    }\n\n    .rdg.fill-grid {\n      height: 100%;\n    }\n\n    .rdg.small-grid {\n      height: 300px;\n    }\n\n    .rdg.big-grid {\n      height: 600px;\n    }\n\n    .rdg-cell .Select {\n      max-height: 30px;\n      font-size: 12px;\n      font-weight: normal;\n    }\n  }\n`;\n\nconst mainClassname = css`\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  height: 100vh;\n  padding: 8px;\n  overflow: hidden;\n`;\n\nfunction Root() {\n  return (\n    <Router>\n      <Nav />\n\n      <main className={mainClassname}>\n        <Switch>\n          <Redirect exact from=\"/\" to=\"/common-features\" />\n          <Route exact path=\"/common-features\">\n            <CommonFeatures />\n          </Route>\n          <Route exact path=\"/all-features\">\n            <AllFeatures />\n          </Route>\n          <Route exact path=\"/cell-navigation\">\n            <CellNavigation />\n          </Route>\n          <Route exact path=\"/column-spanning\">\n            <ColumnSpanning />\n          </Route>\n          <Route exact path=\"/columns-reordering\">\n            <ColumnsReordering />\n          </Route>\n          <Route exact path=\"/context-menu\">\n            <ContextMenuDemo />\n          </Route>\n          <Route exact path=\"/grouping\">\n            <Grouping />\n          </Route>\n          <Route exact path=\"/header-filters\">\n            <HeaderFilters />\n          </Route>\n          <Route exact path=\"/infinite-scrolling\">\n            <InfiniteScrolling />\n          </Route>\n          <Route exact path=\"/master-detail\">\n            <MasterDetail />\n          </Route>\n          <Route exact path=\"/million-cells\">\n            <MillionCells />\n          </Route>\n          <Route exact path=\"/no-rows\">\n            <NoRows />\n          </Route>\n          <Route exact path=\"/resizable-grid\">\n            <ResizableGrid />\n          </Route>\n          <Route exact path=\"/rows-reordering\">\n            <RowsReordering />\n          </Route>\n          <Route exact path=\"/scroll-to-row\">\n            <ScrollToRow />\n          </Route>\n          <Route exact path=\"/tree-view\">\n            <TreeView />\n          </Route>\n          <Route exact path=\"/variable-row-height\">\n            <VariableRowHeight />\n          </Route>\n          <Route>Nothing to see here</Route>\n        </Switch>\n      </main>\n    </Router>\n  );\n}\n\nrender(\n  <StrictMode>\n    <Root />\n  </StrictMode>,\n  document.getElementById('root')\n);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"120\":\"33f33f487d3f2726323f\",\"159\":\"52a57a9c4aebb980aeb6\",\"576\":\"f0b1dc80b26735e42ccb\",\"762\":\"803375217ba26e853fc6\",\"820\":\"36097af7fb38a81f220e\",\"851\":\"415ddf7529b6f92d85a6\",\"856\":\"9f45c9eef328e69fe7e3\",\"869\":\"02527c3f3589f6e8afe8\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkreact_data_grid\"] = globalThis[\"webpackChunkreact_data_grid\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [652], () => (__webpack_require__(18811)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","activeNavClassname","Nav","className","to","exact","activeClassName","href","target","rel","useLayoutEffect","window","useEffect","useOriginalLayoutEffect","useFocusRef","isSelected","ref","useRef","current","focus","preventScroll","tabIndex","SelectCellFormatter","value","isCellSelected","disabled","onClick","onChange","ariaLabel","ariaLabelledBy","clsx","type","checked","e","nativeEvent","shiftKey","RowSelectionContext","createContext","undefined","RowSelectionProvider","Provider","RowSelectionChangeContext","RowSelectionChangeProvider","useRowSelection","rowSelectionContext","useContext","rowSelectionChangeContext","Error","stopPropagation","event","SELECT_COLUMN_KEY","SelectColumn","key","name","width","maxWidth","resizable","sortable","frozen","headerRenderer","props","allRowsSelected","onAllRowsSelectionChange","formatter","isRowSelected","onRowSelectionChange","isShiftClick","row","groupFormatter","textEditorClassname","autoFocusAndSelect","input","select","TextEditor","column","onRowChange","onClose","onBlur","ValueFormatter","ToggleGroupFormatter","groupKey","isExpanded","toggleGroup","d","onKeyDown","viewBox","height","min","max","round","floor","sign","Math","assertIsValidKeyGetter","keyGetter","getRowStyle","rowIdx","getCellStyle","colSpan","gridColumnStart","idx","gridColumnEnd","left","getCellClassname","extraClasses","isLastFrozenColumn","getSpecifiedWidth","columnWidths","viewportWidth","has","get","test","parseInt","clampColumnWidth","minWidth","minColumnWidth","getColSpan","lastFrozenColumnIndex","args","Number","isInteger","useLatestFunc","fn","useCallback","SortableHeaderCell","onSort","sortDirection","priority","children","ctrlKey","metaKey","preventDefault","useRovingCellRef","isChildFocused","forceRender","useState","isFocused","onFocus","HeaderCell","onColumnResize","sortColumns","onSortColumnsChange","selectCell","shouldFocusGrid","sortIndex","findIndex","sort","columnKey","sortColumn","direction","length","ariaSort","headerCellClass","ctrlClick","sortDescendingFirst","nextSort","nextSortColumn","nextSortColumns","splice","role","style","onDoubleClick","right","currentTarget","getBoundingClientRect","clientX","onPointerDown","pointerType","buttons","pointerId","offset","onPointerMove","setPointerCapture","addEventListener","onLostPointerCapture","removeEventListener","rowClassname","rowSelectedClassname","HeaderRow","columns","selectedCellIdx","cells","index","push","memo","isSelectedCellEditable","selectedPosition","rows","isGroupRow","isCellEditable","editor","rowGroup","editable","getSelectedCellColSpan","summaryRows","Cell","isCopied","isDraggedOver","dragHandle","onRowClick","onRowDoubleClick","cellClass","selectCellWrapper","openEditor","editorOptions","editOnClick","onContextMenu","Row","gridRowStart","copiedCellIdx","draggedOverCellIdx","viewportColumns","selectedCellEditor","selectedCellDragHandle","rowClass","setDraggedOverRowIdx","onMouseEnter","handleRowChange","newRow","forwardRef","GroupCell","id","childRows","groupColumnIndex","toggleGroupWrapper","isLevelMatching","cursor","GroupedRow","level","selectGroup","map","SummaryCell","summaryFormatter","SummaryFormatter","summaryCellClass","SummaryRow","top","bottom","ariaRowIndex","nonInputKeys","Set","isCtrlKeyHeldDown","onEditorNavigation","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","matches","EditCell","closeEditor","scrollToCell","frameRequestRef","commitOnOutsideClick","commitOnOutsideMouseDown","cancelFrameRequest","cancelAnimationFrame","commitChanges","onWindowCaptureMouseDown","capture","requestAnimationFrame","renderFormatter","onNavigation","onMouseDownCapture","DragHandle","latestDraggedOverRowIdx","onRowsChange","onFill","setDragging","updateRows","startRowIdx","endRowIdx","sourceRow","updatedRows","indexes","i","updatedRow","targetRow","onMouseDown","onMouseOver","onMouseUp","overRowIdx","handleDragEnd","initialPosition","mode","DataGrid","rawColumns","rawRows","rowKeyGetter","rowHeight","headerRowHeight","rawHeaderRowHeight","summaryRowHeight","rawSummaryRowHeight","selectedRows","onSelectedRowsChange","defaultColumnOptions","groupBy","rawGroupBy","rowGrouper","expandedGroupIds","onExpandedGroupIdsChange","onScroll","onPaste","cellNavigationMode","rawCellNavigationMode","enableVirtualization","rowRenderer","noRowsFallback","ariaDescribedBy","testId","RowRenderer","scrollTop","setScrollTop","scrollLeft","setScrollLeft","setColumnWidths","Map","setSelectedPosition","copiedCell","setCopiedCell","isDragging","draggedOverRowIdx","setOverRowIdx","autoResizeColumn","setAutoResizeColumn","prevSelectedPosition","lastSelectedRowIdx","rowRef","gridRef","gridWidth","gridHeight","setGridWidth","setGridHeight","ResizeObserver","resizeObserver","clientWidth","clientHeight","devicePixelRatio","observe","disconnect","useGridDimensions","summaryRowsCount","isSelectable","isHeaderRowSelected","useMemo","size","every","colSpanColumns","colOverscanStartIdx","colOverscanEndIdx","layoutCssVars","columnMetrics","totalColumnWidth","totalFrozenColumnWidth","defaultFormatter","defaultSortable","defaultResizable","rawColumn","includes","aKey","frozenA","bKey","frozenB","indexOf","forEach","templateColumns","allocatedWidth","unassignedColumnsCount","set","columnMetric","gridTemplateColumns","viewportLeft","viewportRight","lastColIdx","firstUnfrozenColumnIdx","colVisibleStartIdx","colVisibleEndIdx","useCalculatedColumns","rowOverscanStartIdx","rowOverscanEndIdx","rowsCount","totalRowHeight","gridTemplateRows","getRowTop","getRowHeight","findRowIdx","groupedRows","groupRows","groupByKey","remainingGroupByKeys","startRowIndex","groupRowsCount","groups","Object","entries","childGroups","childRowsCount","allGroupRows","flattenedRows","expandGroup","parentId","arr","Array","isArray","keys","posInSet","groupRow","setSize","add","rowPositions","currentRowHeight","position","validateRowIdx","start","end","middle","currentOffset","overscanThreshold","rowVisibleStartIdx","rowVisibleEndIdx","useViewportRows","startIdx","updateStartIdx","colIdx","useViewportColumns","hasGroups","minColIdx","maxColIdx","maxRowIdx","selectedCellIsWithinSelectionBounds","isCellWithinSelectionBounds","selectedCellIsWithinViewportBounds","isCellWithinViewportBounds","selectRowLatest","selectRow","selectAllRowsLatest","newSelectedRows","rowKey","delete","handleFormatterRowChangeLatest","updateRow","selectViewportCellLatest","enableEditor","selectGroupLatest","selectHeaderCellLatest","selectSummaryCellLatest","summaryRow","toggleGroupLatest","isSamePosition","querySelector","newColumnWidths","useImperativeHandle","element","scrollToColumn","scrollToRow","scrollTo","behavior","handleColumnResize","childRow","previousRowIdx","step","expandedGroupId","newExpandedGroupIds","handleKeyDown","Element","isCellEvent","closest","isRowEvent","keyCode","vKey","getRawRowIdx","handleCopy","sourceColumnKey","targetColumnKey","handlePaste","isRowIdxWithinViewportBounds","minRowIdx","atLastCellInRow","atFirstCellInRow","atLastRow","atFirstRow","canExitGrid","commitEditorChanges","nextPosition","parentRowIdx","parentRow","nextRowY","getNextPosition","currentPosition","currentIdx","isCellWithinBounds","nextIdx","nextRowIdx","setColSpan","moveRight","columnsCount","isBeforeFirstColumn","getNextSelectedCellPosition","navigate","onCellKeyDown","isDefaultPrevented","isDefaultCellInput","originalRow","handleCellInput","rawRowIdx","isColIdxWithinSelectionBounds","isCellAtRightBoundary","rowTop","getDraggedOverCellIdx","currentRowIdx","getDragHandle","getCellEditor","templateRows","newSizes","split","join","getLayoutCssVars","rowElements","selectedIdx","selectedRowIdx","viewportRowIdx","isRowOutsideViewport","rowColumns","selectedColumn","slice","isGroupRowSelected","cr","GroupRow","c","getViewportRows","isSummaryRowSelected","p1","p2","async","getGridContent","gridElement","renderToStaticMarkup","grid","document","createElement","innerHTML","cloneElement","head","getRows","body","foot","selector","from","querySelectorAll","gridRow","gridCell","innerText","serialiseCellValue","formattedValue","replace","dateFormatter","Intl","DateTimeFormat","navigator","language","currencyFormatter","NumberFormat","currency","TimestampFormatter","timestamp","format","CurrencyFormatter","createRows","now","Date","title","client","faker","area","country","contact","assignee","progress","random","startTimestamp","endTimestamp","budget","transaction","account","version","available","getComparator","a","b","localeCompare","CommonFeatures","setRows","setSortColumns","setSelectedRows","countries","r","Collator","compare","totalCount","p","autoFocus","createPortal","open","valueAsNumber","yesCount","getColumns","filter","sortedRows","compResult","comparator","ExportButton","onExport","fileName","content","data","downloadLink","download","url","URL","createObjectURL","click","revokeObjectURL","downloadFile","Blob","exportToCsv","utils","writeFile","Promise","all","wb","book_new","ws","aoa_to_sheet","book_append_sheet","exportToXlsx","jsPDF","autoTable","default","doc","orientation","unit","horizontalPageBreak","styles","cellPadding","fontSize","cellWidth","tableWidth","save","exportToPdf","exporting","setExporting","titles","ImageFormatter","backgroundImage","avatar","email","firstName","lastName","street","zipCode","date","toLocaleDateString","bs","catchPhrase","companyName","words","sentence","AllFeatures","incompatibleColumns","getRandomDate","getTime","task","complete","issueType","startDate","completeDate","CellNavigation","setCellNavigationMode","marginBottom","CellFormatter","ColumnSpanning","String","DraggableHeaderRenderer","onColumnsReorder","drag","useDrag","item","collect","monitor","isOver","drop","useDrop","accept","canDrop","opacity","backgroundColor","createColumns","ColumnsReordering","setColumns","draggableColumns","HeaderRenderer","handleColumnsReorder","sourceKey","targetKey","sourceColumnIndex","targetColumnIndex","reorderedColumns","reverse","DndProvider","backend","HTML5Backend","product","price","ContextMenuDemo","nextId","setNextId","useReducer","insertRow","insertRowIdx","sports","reduce","prev","gold","silver","bronze","year","sport","athlete","r1","r2","options","Grouping","selectedOptions","setSelectedOptions","setExpandedGroupIds","option","enabled","newOptions","toggleOption","filterColumnClassName","filterClassname","FilterContext","inputStopPropagation","selectStopPropagation","HeaderFilters","filters","setFilters","developer","developerOptions","label","FilterRenderer","rest","list","isFinite","filteredRows","toLowerCase","startsWith","createFakeRowObjectData","InfiniteScrolling","numberOfRows","isLoading","setIsLoading","scrollHeight","isAtBottom","newRows","resolve","setTimeout","CellExpanderFormatter","expanded","onCellExpand","createDepartments","departments","department","productsMap","productColumns","departmentColumns","ProductGrid","MasterDetail","products","description","getProducts","MillionCells","EmptyRowsRenderer","textAlign","gridColumn","lang","NoRows","ResizableGrid","resize","DraggableRowRenderer","onRowReorder","firstElementChild","RowsReordering","fromIndex","toIndex","ScrollToRow","count","setValue","marginRight","ChildRowDeleteButton","onDeleteSubRow","isDeleteSubRowEnabled","reducer","rowIndex","toggleSubRow","find","parentRowIndex","newChildren","sr","deleteSubRow","defaultRows","TreeView","dispatch","allowDelete","setAllowDelete","hasChildren","marginLeft","VariableRowHeight","Root","path","render","StrictMode","getElementById","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","result","chunkIds","notFulfilled","Infinity","fulfilled","j","n","getter","__esModule","getPrototypeOf","obj","t","this","then","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","timeout","nc","setAttribute","src","onScriptComplete","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","appendChild","Symbol","toStringTag","scriptUrl","importScripts","location","currentScript","installedChunks","installedChunkData","promise","reject","error","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}