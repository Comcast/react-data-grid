{"version":3,"file":"main.9e24190ea8425b29b0c8.js","mappings":"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","sources":["webpack://react-data-grid/webpack/runtime/chunk loaded","webpack://react-data-grid/webpack/runtime/create fake namespace object","webpack://react-data-grid/webpack/runtime/load script","webpack://react-data-grid/./website/Nav.tsx","webpack://react-data-grid/./src/hooks/useLayoutEffect.ts","webpack://react-data-grid/./src/hooks/useFocusRef.ts","webpack://react-data-grid/./src/DataGridDefaultRenderersProvider.ts","webpack://react-data-grid/./src/formatters/SelectCellFormatter.tsx","webpack://react-data-grid/./src/hooks/useRowSelection.ts","webpack://react-data-grid/./src/Columns.tsx","webpack://react-data-grid/./src/editors/textEditor.tsx","webpack://react-data-grid/./src/style/row.ts","webpack://react-data-grid/./src/formatters/valueFormatter.tsx","webpack://react-data-grid/./src/formatters/toggleGroupFormatter.tsx","webpack://react-data-grid/./src/utils/index.ts","webpack://react-data-grid/./src/utils/colSpanUtils.ts","webpack://react-data-grid/./src/hooks/useLatestFunc.ts","webpack://react-data-grid/./src/headerRenderer.tsx","webpack://react-data-grid/./src/utils/styleUtils.ts","webpack://react-data-grid/./src/style/cell.ts","webpack://react-data-grid/./src/utils/domUtils.ts","webpack://react-data-grid/./src/hooks/useRovingCellRef.ts","webpack://react-data-grid/./src/HeaderCell.tsx","webpack://react-data-grid/./src/HeaderRow.tsx","webpack://react-data-grid/./src/utils/eventUtils.ts","webpack://react-data-grid/./src/utils/selectedCellUtils.ts","webpack://react-data-grid/./src/Cell.tsx","webpack://react-data-grid/./src/Row.tsx","webpack://react-data-grid/./src/GroupCell.tsx","webpack://react-data-grid/./src/GroupRow.tsx","webpack://react-data-grid/./src/SummaryCell.tsx","webpack://react-data-grid/./src/SummaryRow.tsx","webpack://react-data-grid/./src/utils/keyboardUtils.ts","webpack://react-data-grid/./src/EditCell.tsx","webpack://react-data-grid/./src/DragHandle.tsx","webpack://react-data-grid/./src/sortStatus.tsx","webpack://react-data-grid/./src/formatters/checkboxFormatter.tsx","webpack://react-data-grid/./src/utils/renderMeasuringCells.tsx","webpack://react-data-grid/./src/DataGrid.tsx","webpack://react-data-grid/./src/hooks/useGridDimensions.ts","webpack://react-data-grid/./src/hooks/useCalculatedColumns.ts","webpack://react-data-grid/./src/hooks/useViewportRows.ts","webpack://react-data-grid/./src/hooks/useViewportColumns.ts","webpack://react-data-grid/./src/style/core.ts","webpack://react-data-grid/./website/demos/exportUtils.tsx","webpack://react-data-grid/./website/demos/CommonFeatures.tsx","webpack://react-data-grid/./website/demos/components/Editors/dropDownEditor.tsx","webpack://react-data-grid/./website/demos/components/Formatters/ImageFormatter.tsx","webpack://react-data-grid/./website/demos/AllFeatures.tsx","webpack://react-data-grid/./website/demos/CellNavigation.tsx","webpack://react-data-grid/./website/demos/ColumnSpanning.tsx","webpack://react-data-grid/./website/demos/components/HeaderRenderers/DraggableHeaderRenderer.tsx","webpack://react-data-grid/./website/demos/ColumnsReordering.tsx","webpack://react-data-grid/./website/demos/CustomizableRenderers.tsx","webpack://react-data-grid/./website/demos/ContextMenu.tsx","webpack://react-data-grid/./website/demos/Grouping.tsx","webpack://react-data-grid/./website/demos/HeaderFilters.tsx","webpack://react-data-grid/./website/demos/InfiniteScrolling.tsx","webpack://react-data-grid/./website/demos/components/Formatters/CellExpanderFormatter.tsx","webpack://react-data-grid/./website/demos/MasterDetail.tsx","webpack://react-data-grid/./website/demos/MillionCells.tsx","webpack://react-data-grid/./website/demos/NoRows.tsx","webpack://react-data-grid/./website/demos/Resizable.tsx","webpack://react-data-grid/./website/demos/components/RowRenderers/DraggableRowRenderer.tsx","webpack://react-data-grid/./website/demos/RowsReordering.tsx","webpack://react-data-grid/./website/demos/ScrollToRow.tsx","webpack://react-data-grid/./website/demos/components/Formatters/ChildRowDeleteButton.tsx","webpack://react-data-grid/./website/demos/TreeView.tsx","webpack://react-data-grid/./website/demos/VariableRowHeight.tsx","webpack://react-data-grid/./website/demos/Animation.tsx","webpack://react-data-grid/./website/root.tsx","webpack://react-data-grid/webpack/bootstrap","webpack://react-data-grid/webpack/runtime/define property getters","webpack://react-data-grid/webpack/runtime/ensure chunk","webpack://react-data-grid/webpack/runtime/get javascript chunk filename","webpack://react-data-grid/webpack/runtime/get mini-css chunk filename","webpack://react-data-grid/webpack/runtime/global","webpack://react-data-grid/webpack/runtime/hasOwnProperty shorthand","webpack://react-data-grid/webpack/runtime/make namespace object","webpack://react-data-grid/webpack/runtime/publicPath","webpack://react-data-grid/webpack/runtime/jsonp chunk loading","webpack://react-data-grid/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"react-data-grid:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { NavLink } from 'react-router-dom';\nimport { css } from '@linaria/core';\n\nimport type { Direction } from '../src/types';\n\nconst navClassname = css`\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n\n  @media (prefers-color-scheme: light) {\n    border-inline-start: 4px solid hsl(210deg 50% 80%);\n  }\n  @media (prefers-color-scheme: dark) {\n    border-inline-start: 4px solid hsl(210deg 50% 40%);\n  }\n\n  h1,\n  h2 {\n    margin: 8px;\n  }\n\n  a {\n    color: inherit;\n    font-size: 14px;\n    line-height: 22px;\n    text-decoration: none;\n    padding-block: 0;\n    padding-inline: 16px;\n    transition: 0.1s background-color;\n\n    &:hover {\n      @media (prefers-color-scheme: light) {\n        background-color: hsl(210deg 50% 90%);\n      }\n      @media (prefers-color-scheme: dark) {\n        background-color: hsl(210deg 50% 30%);\n      }\n    }\n  }\n`;\n\nconst activeNavClassname = css`\n  font-weight: 500;\n\n  @media (prefers-color-scheme: light) {\n    background-color: hsl(210deg 50% 80%);\n  }\n  @media (prefers-color-scheme: dark) {\n    background-color: hsl(210deg 50% 40%);\n  }\n\n  a&:hover {\n    @media (prefers-color-scheme: light) {\n      background-color: hsl(210deg 50% 70%);\n    }\n    @media (prefers-color-scheme: dark) {\n      background-color: hsl(210deg 50% 50%);\n    }\n  }\n`;\n\nconst rtlCheckboxClassname = css`\n  padding-inline-start: 8px;\n`;\n\ninterface Props {\n  direction: Direction;\n  onDirectionChange: (direction: Direction) => void;\n}\n\nexport default function Nav({ direction, onDirectionChange }: Props) {\n  return (\n    <nav className={navClassname}>\n      <h1>react-data-grid</h1>\n\n      <h2>Demos</h2>\n      <NavLink to=\"/common-features\" end className={getActiveClassname}>\n        Common Features\n      </NavLink>\n      <NavLink to=\"/all-features\" end className={getActiveClassname}>\n        All Features\n      </NavLink>\n      <NavLink to=\"/cell-navigation\" end className={getActiveClassname}>\n        Cell Navigation\n      </NavLink>\n      <NavLink to=\"/column-spanning\" end className={getActiveClassname}>\n        Column Spanning\n      </NavLink>\n      <NavLink to=\"/columns-reordering\" end className={getActiveClassname}>\n        Columns Reordering\n      </NavLink>\n      <NavLink to=\"/context-menu\" end className={getActiveClassname}>\n        Context Menu\n      </NavLink>\n      <NavLink to=\"/customizable-renderers\" end className={getActiveClassname}>\n        Customizable Renderers\n      </NavLink>\n      <NavLink to=\"/grouping\" end className={getActiveClassname}>\n        Grouping\n      </NavLink>\n      <NavLink to=\"/header-filters\" end className={getActiveClassname}>\n        Header Filters\n      </NavLink>\n      <NavLink to=\"/infinite-scrolling\" end className={getActiveClassname}>\n        Infinite Scrolling\n      </NavLink>\n      <NavLink to=\"/master-detail\" end className={getActiveClassname}>\n        Master Detail\n      </NavLink>\n      <NavLink to=\"/million-cells\" end className={getActiveClassname}>\n        A Million Cells\n      </NavLink>\n      <NavLink to=\"/no-rows\" end className={getActiveClassname}>\n        No Rows\n      </NavLink>\n      <NavLink to=\"/resizable-grid\" end className={getActiveClassname}>\n        Resizable Grid\n      </NavLink>\n      <NavLink to=\"/rows-reordering\" end className={getActiveClassname}>\n        Rows Reordering\n      </NavLink>\n      <NavLink to=\"/scroll-to-row\" end className={getActiveClassname}>\n        Scroll To Row\n      </NavLink>\n      <NavLink to=\"/tree-view\" end className={getActiveClassname}>\n        Tree View\n      </NavLink>\n      <NavLink to=\"/variable-row-height\" end className={getActiveClassname}>\n        Variable Row Height\n      </NavLink>\n      <NavLink to=\"/animation\" end className={getActiveClassname}>\n        Animation\n      </NavLink>\n\n      <h2>Links</h2>\n      <a\n        href=\"https://github.com/adazzle/react-data-grid/blob/main/README.md\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        Documentation\n      </a>\n      <a\n        href=\"https://github.com/adazzle/react-data-grid/blob/main/CHANGELOG.md\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        Changelog\n      </a>\n      <a\n        href=\"https://github.com/adazzle/react-data-grid/discussions\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        Discussions\n      </a>\n      <a href=\"https://github.com/adazzle/react-data-grid/issues\" target=\"_blank\" rel=\"noreferrer\">\n        Issues\n      </a>\n\n      <h2>Direction</h2>\n      <label className={rtlCheckboxClassname}>\n        <input\n          type=\"checkbox\"\n          checked={direction === 'rtl'}\n          onChange={() => onDirectionChange(direction === 'rtl' ? 'ltr' : 'rtl')}\n        />\n        Right to left\n      </label>\n    </nav>\n  );\n}\n\nfunction getActiveClassname({ isActive }: { isActive: boolean }) {\n  return isActive ? activeNavClassname : '';\n}\n","// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport { useEffect, useLayoutEffect as useOriginalLayoutEffect } from 'react';\n\n// Silence silly warning\n// https://reactjs.org/link/uselayouteffect-ssr\nexport const useLayoutEffect = typeof window === 'undefined' ? useEffect : useOriginalLayoutEffect;\n","import { useRef } from 'react';\nimport { useLayoutEffect } from './useLayoutEffect';\n\nexport function useFocusRef<T extends HTMLOrSVGElement>(isSelected: boolean) {\n  const ref = useRef<T>(null);\n\n  useLayoutEffect(() => {\n    if (!isSelected) return;\n    ref.current?.focus({ preventScroll: true });\n  }, [isSelected]);\n\n  return {\n    ref,\n    tabIndex: isSelected ? 0 : -1\n  };\n}\n","import { createContext, useContext } from 'react';\n\nimport type { Renderers, Maybe } from './types';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst DataGridDefaultRenderersContext = createContext<Maybe<Renderers<any, any>>>(undefined);\n\nexport const DataGridDefaultRenderersProvider = DataGridDefaultRenderersContext.Provider;\n\nexport function useDefaultRenderers<R, SR>(): Maybe<Renderers<R, SR>> {\n  return useContext(DataGridDefaultRenderersContext);\n}\n","import { useFocusRef } from '../hooks/useFocusRef';\nimport { useDefaultRenderers } from '../DataGridDefaultRenderersProvider';\nimport type { CheckboxFormatterProps } from '../types';\n\ntype SharedInputProps = Pick<CheckboxFormatterProps, 'disabled' | 'aria-label' | 'aria-labelledby'>;\n\ninterface SelectCellFormatterProps extends SharedInputProps {\n  isCellSelected: boolean;\n  value: boolean;\n  onChange: (value: boolean, isShiftClick: boolean) => void;\n}\n\nexport function SelectCellFormatter({\n  value,\n  isCellSelected,\n  disabled,\n  onChange,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledBy\n}: SelectCellFormatterProps) {\n  const { ref, tabIndex } = useFocusRef<HTMLInputElement>(isCellSelected);\n  const checkboxFormatter = useDefaultRenderers()!.checkboxFormatter!;\n\n  return (\n    <>\n      {checkboxFormatter(\n        {\n          'aria-label': ariaLabel,\n          'aria-labelledby': ariaLabelledBy,\n          tabIndex,\n          disabled,\n          checked: value,\n          onChange\n        },\n        ref\n      )}\n    </>\n  );\n}\n","import { createContext, useContext } from 'react';\nimport type { SelectRowEvent } from '../types';\n\nconst RowSelectionContext = createContext<boolean | undefined>(undefined);\n\nexport const RowSelectionProvider = RowSelectionContext.Provider;\n\nconst RowSelectionChangeContext = createContext<\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ((selectRowEvent: SelectRowEvent<any>) => void) | undefined\n>(undefined);\n\nexport const RowSelectionChangeProvider = RowSelectionChangeContext.Provider;\n\nexport function useRowSelection<R>(): [boolean, (selectRowEvent: SelectRowEvent<R>) => void] {\n  const rowSelectionContext = useContext(RowSelectionContext);\n  const rowSelectionChangeContext = useContext(RowSelectionChangeContext);\n\n  if (rowSelectionContext === undefined || rowSelectionChangeContext === undefined) {\n    throw new Error('useRowSelection must be used within DataGrid cells');\n  }\n\n  return [rowSelectionContext, rowSelectionChangeContext];\n}\n","import { SelectCellFormatter } from './formatters';\nimport { useRowSelection } from './hooks/useRowSelection';\nimport type { Column, FormatterProps, GroupFormatterProps, HeaderRendererProps } from './types';\n\nexport const SELECT_COLUMN_KEY = 'select-row';\n\nfunction HeaderRenderer(props: HeaderRendererProps<unknown>) {\n  const [isRowSelected, onRowSelectionChange] = useRowSelection();\n\n  return (\n    <SelectCellFormatter\n      aria-label=\"Select All\"\n      isCellSelected={props.isCellSelected}\n      value={isRowSelected}\n      onChange={(checked) => {\n        onRowSelectionChange({ type: 'HEADER', checked });\n      }}\n    />\n  );\n}\n\nfunction SelectFormatter(props: FormatterProps<unknown>) {\n  const [isRowSelected, onRowSelectionChange] = useRowSelection();\n\n  return (\n    <SelectCellFormatter\n      aria-label=\"Select\"\n      isCellSelected={props.isCellSelected}\n      value={isRowSelected}\n      onChange={(checked, isShiftClick) => {\n        onRowSelectionChange({ type: 'ROW', row: props.row, checked, isShiftClick });\n      }}\n    />\n  );\n}\n\nfunction SelectGroupFormatter(props: GroupFormatterProps<unknown>) {\n  const [isRowSelected, onRowSelectionChange] = useRowSelection();\n\n  return (\n    <SelectCellFormatter\n      aria-label=\"Select Group\"\n      isCellSelected={props.isCellSelected}\n      value={isRowSelected}\n      onChange={(checked) => {\n        onRowSelectionChange({ type: 'ROW', row: props.row, checked, isShiftClick: false });\n      }}\n    />\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const SelectColumn: Column<any, any> = {\n  key: SELECT_COLUMN_KEY,\n  name: '',\n  width: 35,\n  minWidth: 35,\n  maxWidth: 35,\n  resizable: false,\n  sortable: false,\n  frozen: true,\n  headerRenderer(props) {\n    return <HeaderRenderer {...props} />;\n  },\n  formatter(props) {\n    return <SelectFormatter {...props} />;\n  },\n  groupFormatter(props) {\n    return <SelectGroupFormatter {...props} />;\n  }\n};\n","import { css } from '@linaria/core';\nimport type { EditorProps } from '../types';\n\nconst textEditorInternalClassname = css`\n  @layer rdg.TextEditor {\n    appearance: none;\n\n    box-sizing: border-box;\n    inline-size: 100%;\n    block-size: 100%;\n    padding-block: 0;\n    padding-inline: 6px;\n    border: 2px solid #ccc;\n    vertical-align: top;\n    color: var(--rdg-color);\n    background-color: var(--rdg-background-color);\n\n    font-family: inherit;\n    font-size: var(--rdg-font-size);\n\n    &:focus {\n      border-color: var(--rdg-selection-color);\n      outline: none;\n    }\n\n    &::placeholder {\n      color: #999;\n      opacity: 1;\n    }\n  }\n`;\n\nexport const textEditorClassname = `rdg-text-editor ${textEditorInternalClassname}`;\n\nfunction autoFocusAndSelect(input: HTMLInputElement | null) {\n  input?.focus();\n  input?.select();\n}\n\nexport default function textEditor<TRow, TSummaryRow>({\n  row,\n  column,\n  onRowChange,\n  onClose\n}: EditorProps<TRow, TSummaryRow>) {\n  return (\n    <input\n      className={textEditorClassname}\n      ref={autoFocusAndSelect}\n      value={row[column.key as keyof TRow] as unknown as string}\n      onChange={(event) => onRowChange({ ...row, [column.key]: event.target.value })}\n      onBlur={() => onClose(true)}\n    />\n  );\n}\n","import { css } from '@linaria/core';\n\nexport const row = css`\n  @layer rdg.Row {\n    display: contents;\n    line-height: var(--rdg-row-height);\n    background-color: var(--rdg-background-color);\n\n    &:hover {\n      background-color: var(--rdg-row-hover-background-color);\n    }\n\n    &[aria-selected='true'] {\n      background-color: var(--rdg-row-selected-background-color);\n\n      &:hover {\n        background-color: var(--rdg-row-selected-hover-background-color);\n      }\n    }\n  }\n`;\n\nexport const rowClassname = `rdg-row ${row}`;\n\nexport const rowSelected = css`\n  @layer rdg.FocusSink {\n    outline: 2px solid var(--rdg-selection-color);\n    outline-offset: -2px;\n  }\n`;\n\nexport const rowSelectedClassname = 'rdg-row-selected';\n\nexport const rowSelectedWithFrozenCell = css`\n  @layer rdg.FocusSink {\n    &::before {\n      content: '';\n      display: inline-block;\n      height: 100%;\n      position: sticky;\n      inset-inline-start: 0;\n      border-inline-start: 2px solid var(--rdg-selection-color);\n    }\n  }\n`;\n","import type { FormatterProps } from '../types';\n\nexport function valueFormatter<R, SR>(props: FormatterProps<R, SR>) {\n  try {\n    return <>{props.row[props.column.key as keyof R]}</>;\n  } catch {\n    return null;\n  }\n}\n","import { css } from '@linaria/core';\nimport type { GroupFormatterProps } from '../types';\nimport { useFocusRef } from '../hooks/useFocusRef';\n\nconst groupCellContent = css`\n  @layer rdg.GroupCellContent {\n    outline: none;\n  }\n`;\n\nconst groupCellContentClassname = `rdg-group-cell-content ${groupCellContent}`;\n\nconst caret = css`\n  @layer rdg.GroupCellCaret {\n    margin-inline-start: 4px;\n    stroke: currentColor;\n    stroke-width: 1.5px;\n    fill: transparent;\n    vertical-align: middle;\n\n    > path {\n      transition: d 0.1s;\n    }\n  }\n`;\n\nconst caretClassname = `rdg-caret ${caret}`;\n\nexport function toggleGroupFormatter<R, SR>(props: GroupFormatterProps<R, SR>) {\n  return <ToggleGroup {...props} />;\n}\n\nexport function ToggleGroup<R, SR>({\n  groupKey,\n  isExpanded,\n  isCellSelected,\n  toggleGroup\n}: GroupFormatterProps<R, SR>) {\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown({ key }: React.KeyboardEvent<HTMLSpanElement>) {\n    if (key === 'Enter') {\n      toggleGroup();\n    }\n  }\n\n  const d = isExpanded ? 'M1 1 L 7 7 L 13 1' : 'M1 7 L 7 1 L 13 7';\n\n  return (\n    <span\n      ref={ref}\n      className={groupCellContentClassname}\n      tabIndex={tabIndex}\n      onKeyDown={handleKeyDown}\n    >\n      {groupKey as string}\n      <svg viewBox=\"0 0 14 8\" width=\"14\" height=\"8\" className={caretClassname} aria-hidden>\n        <path d={d} />\n      </svg>\n    </span>\n  );\n}\n","import type { CalculatedColumn } from '../types';\n\nexport * from './colSpanUtils';\nexport * from './domUtils';\nexport * from './eventUtils';\nexport * from './keyboardUtils';\nexport * from './renderMeasuringCells';\nexport * from './selectedCellUtils';\nexport * from './styleUtils';\n\nexport const { min, max, round, floor, sign, abs } = Math;\n\nexport function assertIsValidKeyGetter<R, K extends React.Key>(\n  keyGetter: unknown\n): asserts keyGetter is (row: R) => K {\n  if (typeof keyGetter !== 'function') {\n    throw new Error('Please specify the rowKeyGetter prop to use selection');\n  }\n}\n\nexport function clampColumnWidth<R, SR>(\n  width: number,\n  { minWidth, maxWidth }: CalculatedColumn<R, SR>\n): number {\n  width = max(width, minWidth);\n\n  // ignore maxWidth if it less than minWidth\n  if (typeof maxWidth === 'number' && maxWidth >= minWidth) {\n    return min(width, maxWidth);\n  }\n\n  return width;\n}\n","import type { CalculatedColumn, ColSpanArgs } from '../types';\n\nexport function getColSpan<R, SR>(\n  column: CalculatedColumn<R, SR>,\n  lastFrozenColumnIndex: number,\n  args: ColSpanArgs<R, SR>\n): number | undefined {\n  const colSpan = typeof column.colSpan === 'function' ? column.colSpan(args) : 1;\n  if (\n    Number.isInteger(colSpan) &&\n    colSpan! > 1 &&\n    // ignore colSpan if it spans over both frozen and regular columns\n    (!column.frozen || column.idx + colSpan! - 1 <= lastFrozenColumnIndex)\n  ) {\n    return colSpan!;\n  }\n  return undefined;\n}\n","import { useRef, useEffect, useCallback } from 'react';\nimport type { Maybe } from '../types';\n\n// https://reactjs.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useLatestFunc<T extends Maybe<(...args: any[]) => any>>(fn: T): T {\n  const ref = useRef(fn);\n\n  useEffect(() => {\n    ref.current = fn;\n  });\n\n  const callbackFn = useCallback((...args: Parameters<NonNullable<T>>) => {\n    ref.current!(...args);\n  }, []);\n\n  // @ts-expect-error\n  return fn ? callbackFn : fn;\n}\n","import { css } from '@linaria/core';\n\nimport { useFocusRef } from './hooks';\nimport type { HeaderRendererProps } from './types';\nimport { useDefaultRenderers } from './DataGridDefaultRenderersProvider';\n\nconst headerSortCell = css`\n  @layer rdg.SortableHeaderCell {\n    cursor: pointer;\n    display: flex;\n\n    &:focus {\n      outline: none;\n    }\n  }\n`;\n\nconst headerSortCellClassname = `rdg-header-sort-cell ${headerSortCell}`;\n\nconst headerSortName = css`\n  @layer rdg.SortableHeaderCellName {\n    flex-grow: 1;\n    overflow: hidden;\n    overflow: clip;\n    text-overflow: ellipsis;\n  }\n`;\n\nconst headerSortNameClassname = `rdg-header-sort-name ${headerSortName}`;\n\nexport default function headerRenderer<R, SR>({\n  column,\n  sortDirection,\n  priority,\n  onSort,\n  isCellSelected\n}: HeaderRendererProps<R, SR>) {\n  if (!column.sortable) return <>{column.name}</>;\n\n  return (\n    <SortableHeaderCell\n      onSort={onSort}\n      sortDirection={sortDirection}\n      priority={priority}\n      isCellSelected={isCellSelected}\n    >\n      {column.name}\n    </SortableHeaderCell>\n  );\n}\n\ntype SharedHeaderCellProps<R, SR> = Pick<\n  HeaderRendererProps<R, SR>,\n  'sortDirection' | 'onSort' | 'priority' | 'isCellSelected'\n>;\n\ninterface SortableHeaderCellProps<R, SR> extends SharedHeaderCellProps<R, SR> {\n  children: React.ReactNode;\n}\n\nfunction SortableHeaderCell<R, SR>({\n  onSort,\n  sortDirection,\n  priority,\n  children,\n  isCellSelected\n}: SortableHeaderCellProps<R, SR>) {\n  const sortStatus = useDefaultRenderers<R, SR>()!.sortStatus!;\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown(event: React.KeyboardEvent<HTMLSpanElement>) {\n    if (event.key === ' ' || event.key === 'Enter') {\n      // stop propagation to prevent scrolling\n      event.preventDefault();\n      onSort(event.ctrlKey || event.metaKey);\n    }\n  }\n\n  function handleClick(event: React.MouseEvent<HTMLSpanElement>) {\n    onSort(event.ctrlKey || event.metaKey);\n  }\n\n  return (\n    <span\n      ref={ref}\n      tabIndex={tabIndex}\n      className={headerSortCellClassname}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      <span className={headerSortNameClassname}>{children}</span>\n      <span>{sortStatus({ sortDirection, priority })}</span>\n    </span>\n  );\n}\n","import type { CSSProperties } from 'react';\nimport clsx from 'clsx';\n\nimport type { CalculatedColumn } from '../types';\nimport { cellClassname, cellFrozenClassname, cellFrozenLastClassname } from '../style';\n\nexport function getRowStyle(rowIdx: number, height?: number): CSSProperties {\n  if (height !== undefined) {\n    return {\n      '--rdg-grid-row-start': rowIdx,\n      '--rdg-row-height': `${height}px`\n    } as unknown as CSSProperties;\n  }\n  return { '--rdg-grid-row-start': rowIdx } as unknown as CSSProperties;\n}\n\nexport function getCellStyle<R, SR>(\n  column: CalculatedColumn<R, SR>,\n  colSpan?: number\n): React.CSSProperties {\n  return {\n    gridColumnStart: column.idx + 1,\n    gridColumnEnd: colSpan !== undefined ? `span ${colSpan}` : undefined,\n    insetInlineStart: column.frozen ? `var(--rdg-frozen-left-${column.idx})` : undefined\n  };\n}\n\nexport function getCellClassname<R, SR>(\n  column: CalculatedColumn<R, SR>,\n  ...extraClasses: Parameters<typeof clsx>\n): string {\n  return clsx(\n    cellClassname,\n    {\n      [cellFrozenClassname]: column.frozen,\n      [cellFrozenLastClassname]: column.isLastFrozenColumn\n    },\n    ...extraClasses\n  );\n}\n","import { css } from '@linaria/core';\n\nexport const cell = css`\n  @layer rdg.Cell {\n    /* max-content does not work with size containment\n     * dynamically switching between different containment styles incurs a heavy relayout penalty\n     * Chromium bug: at odd zoom levels or subpixel positioning, layout/paint containment can make cell borders disappear\n     *   https://bugs.chromium.org/p/chromium/issues/detail?id=1326946\n     */\n    contain: style;\n    position: relative; /* needed for absolute positioning to work */\n    padding-block: 0;\n    padding-inline: 8px;\n    border-inline-end: 1px solid var(--rdg-border-color);\n    border-block-end: 1px solid var(--rdg-border-color);\n    grid-row-start: var(--rdg-grid-row-start);\n    background-color: inherit;\n\n    white-space: nowrap;\n    overflow: hidden;\n    overflow: clip;\n    text-overflow: ellipsis;\n    outline: none;\n\n    &[aria-selected='true'] {\n      outline: 2px solid var(--rdg-selection-color);\n      outline-offset: -2px;\n    }\n  }\n`;\n\nexport const cellClassname = `rdg-cell ${cell}`;\n\nexport const cellFrozen = css`\n  @layer rdg.Cell {\n    position: sticky;\n    /* Should have a higher value than 0 to show up above unfrozen cells */\n    z-index: 1;\n  }\n`;\n\nexport const cellFrozenClassname = `rdg-cell-frozen ${cellFrozen}`;\n\nexport const cellFrozenLast = css`\n  @layer rdg.Cell {\n    box-shadow: calc(2px * var(--rdg-sign)) 0 5px -2px rgba(136, 136, 136, 0.3);\n  }\n`;\n\nexport const cellFrozenLastClassname = `rdg-cell-frozen-last ${cellFrozenLast}`;\n","import type { Maybe } from '../types';\n\nexport function stopPropagation(event: React.SyntheticEvent) {\n  event.stopPropagation();\n}\n\nexport function scrollIntoView(element: Maybe<HTMLDivElement>) {\n  element?.scrollIntoView({ inline: 'nearest', block: 'nearest' });\n}\n","import { useCallback, useState, type MutableRefObject } from 'react';\nimport { scrollIntoView } from '../utils';\n\n// https://www.w3.org/TR/wai-aria-practices-1.1/#kbd_roving_tabindex\nexport function useRovingCellRef(\n  isSelected: boolean,\n  skipCellFocusRef?: MutableRefObject<boolean>\n) {\n  // https://www.w3.org/TR/wai-aria-practices-1.1/#gridNav_focus\n  const [isChildFocused, setIsChildFocused] = useState(false);\n\n  if (isChildFocused && !isSelected) {\n    setIsChildFocused(false);\n  }\n\n  const ref = useCallback(\n    (cell: HTMLDivElement | null) => {\n      if (cell === null) return;\n      if (skipCellFocusRef?.current) {\n        skipCellFocusRef.current = false;\n        return;\n      }\n      scrollIntoView(cell);\n      if (cell.contains(document.activeElement)) return;\n      cell.focus({ preventScroll: true });\n    },\n    [skipCellFocusRef]\n  );\n\n  function onFocus(event: React.FocusEvent<HTMLDivElement>) {\n    if (event.target !== event.currentTarget) {\n      setIsChildFocused(true);\n    }\n  }\n\n  const isFocusable = isSelected && !isChildFocused;\n\n  return {\n    ref: isSelected ? ref : undefined,\n    tabIndex: isFocusable ? 0 : -1,\n    onFocus: isSelected ? onFocus : undefined\n  };\n}\n","import { css } from '@linaria/core';\n\nimport type { CalculatedColumn, SortColumn } from './types';\nimport type { HeaderRowProps } from './HeaderRow';\nimport defaultHeaderRenderer from './headerRenderer';\nimport { getCellStyle, getCellClassname } from './utils';\nimport { useRovingCellRef } from './hooks';\n\nconst cellResizable = css`\n  @layer rdg.HeaderCell {\n    touch-action: none;\n\n    &::after {\n      content: '';\n      cursor: col-resize;\n      position: absolute;\n      inset-block-start: 0;\n      inset-inline-end: 0;\n      inset-block-end: 0;\n      inline-size: 10px;\n    }\n  }\n`;\n\nconst cellResizableClassname = `rdg-cell-resizable ${cellResizable}`;\n\ntype SharedHeaderRowProps<R, SR> = Pick<\n  HeaderRowProps<R, SR, React.Key>,\n  | 'sortColumns'\n  | 'onSortColumnsChange'\n  | 'selectCell'\n  | 'onColumnResize'\n  | 'shouldFocusGrid'\n  | 'direction'\n>;\n\nexport interface HeaderCellProps<R, SR> extends SharedHeaderRowProps<R, SR> {\n  column: CalculatedColumn<R, SR>;\n  colSpan: number | undefined;\n  isCellSelected: boolean;\n}\n\nexport default function HeaderCell<R, SR>({\n  column,\n  colSpan,\n  isCellSelected,\n  onColumnResize,\n  sortColumns,\n  onSortColumnsChange,\n  selectCell,\n  shouldFocusGrid,\n  direction\n}: HeaderCellProps<R, SR>) {\n  const isRtl = direction === 'rtl';\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected);\n  const sortIndex = sortColumns?.findIndex((sort) => sort.columnKey === column.key);\n  const sortColumn =\n    sortIndex !== undefined && sortIndex > -1 ? sortColumns![sortIndex] : undefined;\n  const sortDirection = sortColumn?.direction;\n  const priority = sortColumn !== undefined && sortColumns!.length > 1 ? sortIndex! + 1 : undefined;\n  const ariaSort =\n    sortDirection && !priority ? (sortDirection === 'ASC' ? 'ascending' : 'descending') : undefined;\n\n  const className = getCellClassname(column, column.headerCellClass, {\n    [cellResizableClassname]: column.resizable\n  });\n\n  const headerRenderer = column.headerRenderer ?? defaultHeaderRenderer;\n\n  function onPointerDown(event: React.PointerEvent<HTMLDivElement>) {\n    if (event.pointerType === 'mouse' && event.buttons !== 1) {\n      return;\n    }\n\n    const { currentTarget, pointerId } = event;\n    const { right, left } = currentTarget.getBoundingClientRect();\n    const offset = isRtl ? event.clientX - left : right - event.clientX;\n\n    if (offset > 11) {\n      // +1px to account for the border size\n      return;\n    }\n\n    function onPointerMove(event: PointerEvent) {\n      // prevents text selection in Chrome, which fixes scrolling the grid while dragging, and fixes re-size on an autosized column\n      event.preventDefault();\n      const { right, left } = currentTarget.getBoundingClientRect();\n      const width = isRtl ? right + offset - event.clientX : event.clientX + offset - left;\n      if (width > 0) {\n        onColumnResize(column, width);\n      }\n    }\n\n    function onLostPointerCapture() {\n      currentTarget.removeEventListener('pointermove', onPointerMove);\n      currentTarget.removeEventListener('lostpointercapture', onLostPointerCapture);\n    }\n\n    currentTarget.setPointerCapture(pointerId);\n    currentTarget.addEventListener('pointermove', onPointerMove);\n    currentTarget.addEventListener('lostpointercapture', onLostPointerCapture);\n  }\n\n  function onSort(ctrlClick: boolean) {\n    if (onSortColumnsChange == null) return;\n    const { sortDescendingFirst } = column;\n    if (sortColumn === undefined) {\n      // not currently sorted\n      const nextSort: SortColumn = {\n        columnKey: column.key,\n        direction: sortDescendingFirst ? 'DESC' : 'ASC'\n      };\n      onSortColumnsChange(sortColumns && ctrlClick ? [...sortColumns, nextSort] : [nextSort]);\n    } else {\n      let nextSortColumn: SortColumn | undefined;\n      if (\n        (sortDescendingFirst === true && sortDirection === 'DESC') ||\n        (sortDescendingFirst !== true && sortDirection === 'ASC')\n      ) {\n        nextSortColumn = {\n          columnKey: column.key,\n          direction: sortDirection === 'ASC' ? 'DESC' : 'ASC'\n        };\n      }\n      if (ctrlClick) {\n        const nextSortColumns = [...sortColumns!];\n        if (nextSortColumn) {\n          // swap direction\n          nextSortColumns[sortIndex!] = nextSortColumn;\n        } else {\n          // remove sort\n          nextSortColumns.splice(sortIndex!, 1);\n        }\n        onSortColumnsChange(nextSortColumns);\n      } else {\n        onSortColumnsChange(nextSortColumn ? [nextSortColumn] : []);\n      }\n    }\n  }\n\n  function onClick() {\n    selectCell(column.idx);\n  }\n\n  function onDoubleClick(event: React.MouseEvent<HTMLDivElement>) {\n    const { right, left } = event.currentTarget.getBoundingClientRect();\n    const offset = isRtl ? event.clientX - left : right - event.clientX;\n\n    if (offset > 11) {\n      // +1px to account for the border size\n      return;\n    }\n\n    onColumnResize(column, 'max-content');\n  }\n\n  function handleFocus(event: React.FocusEvent<HTMLDivElement>) {\n    onFocus?.(event);\n    if (shouldFocusGrid) {\n      // Select the first header cell if there is no selected cell\n      selectCell(0);\n    }\n  }\n\n  return (\n    <div\n      role=\"columnheader\"\n      aria-colindex={column.idx + 1}\n      aria-selected={isCellSelected}\n      aria-sort={ariaSort}\n      aria-colspan={colSpan}\n      ref={ref}\n      // set the tabIndex to 0 when there is no selected cell so grid can receive focus\n      tabIndex={shouldFocusGrid ? 0 : tabIndex}\n      className={className}\n      style={getCellStyle(column, colSpan)}\n      onFocus={handleFocus}\n      onClick={onClick}\n      onDoubleClick={column.resizable ? onDoubleClick : undefined}\n      onPointerDown={column.resizable ? onPointerDown : undefined}\n    >\n      {headerRenderer({\n        column,\n        sortDirection,\n        priority,\n        onSort,\n        isCellSelected\n      })}\n    </div>\n  );\n}\n","import { memo } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport HeaderCell from './HeaderCell';\nimport type { CalculatedColumn, Direction } from './types';\nimport { getColSpan, getRowStyle } from './utils';\nimport type { DataGridProps } from './DataGrid';\nimport { cell, cellFrozen, rowSelectedClassname } from './style';\n\ntype SharedDataGridProps<R, SR, K extends React.Key> = Pick<\n  DataGridProps<R, SR, K>,\n  'sortColumns' | 'onSortColumnsChange'\n>;\n\nexport interface HeaderRowProps<R, SR, K extends React.Key> extends SharedDataGridProps<R, SR, K> {\n  columns: readonly CalculatedColumn<R, SR>[];\n  onColumnResize: (column: CalculatedColumn<R, SR>, width: number | 'max-content') => void;\n  selectCell: (columnIdx: number) => void;\n  lastFrozenColumnIndex: number;\n  selectedCellIdx: number | undefined;\n  shouldFocusGrid: boolean;\n  direction: Direction;\n}\n\nconst headerRow = css`\n  @layer rdg.HeaderRow {\n    display: contents;\n    line-height: var(--rdg-header-row-height);\n    background-color: var(--rdg-header-background-color);\n    font-weight: bold;\n\n    & > .${cell} {\n      /* Should have a higher value than 0 to show up above regular cells */\n      z-index: 1;\n      position: sticky;\n      inset-block-start: 0;\n    }\n\n    & > .${cellFrozen} {\n      z-index: 2;\n    }\n  }\n`;\n\nconst headerRowClassname = `rdg-header-row ${headerRow}`;\n\nfunction HeaderRow<R, SR, K extends React.Key>({\n  columns,\n  onColumnResize,\n  sortColumns,\n  onSortColumnsChange,\n  lastFrozenColumnIndex,\n  selectedCellIdx,\n  selectCell,\n  shouldFocusGrid,\n  direction\n}: HeaderRowProps<R, SR, K>) {\n  const cells = [];\n  for (let index = 0; index < columns.length; index++) {\n    const column = columns[index];\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'HEADER' });\n    if (colSpan !== undefined) {\n      index += colSpan - 1;\n    }\n\n    cells.push(\n      <HeaderCell<R, SR>\n        key={column.key}\n        column={column}\n        colSpan={colSpan}\n        isCellSelected={selectedCellIdx === column.idx}\n        onColumnResize={onColumnResize}\n        onSortColumnsChange={onSortColumnsChange}\n        sortColumns={sortColumns}\n        selectCell={selectCell}\n        shouldFocusGrid={shouldFocusGrid && index === 0}\n        direction={direction}\n      />\n    );\n  }\n\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={1} // aria-rowindex is 1 based\n      className={clsx(headerRowClassname, {\n        [rowSelectedClassname]: selectedCellIdx === -1\n      })}\n      style={getRowStyle(1)}\n    >\n      {cells}\n    </div>\n  );\n}\n\nexport default memo(HeaderRow) as <R, SR, K extends React.Key>(\n  props: HeaderRowProps<R, SR, K>\n) => JSX.Element;\n","import type { CellEvent } from '../types';\n\nexport function createCellEvent<E extends React.SyntheticEvent<HTMLDivElement>>(\n  event: E\n): CellEvent<E> {\n  let defaultPrevented = false;\n  const cellEvent = {\n    ...event,\n    preventGridDefault() {\n      defaultPrevented = true;\n    },\n    isGridDefaultPrevented() {\n      return defaultPrevented || this.isDefaultPrevented();\n    }\n  };\n\n  Object.setPrototypeOf(cellEvent, Object.getPrototypeOf(event));\n\n  return cellEvent;\n}\n","import type { CalculatedColumn, Position, GroupRow, CellNavigationMode, Maybe } from '../types';\nimport { getColSpan } from './colSpanUtils';\n\ninterface IsSelectedCellEditableOpts<R, SR> {\n  selectedPosition: Position;\n  columns: readonly CalculatedColumn<R, SR>[];\n  rows: readonly (R | GroupRow<R>)[];\n  isGroupRow: (row: R | GroupRow<R>) => row is GroupRow<R>;\n}\n\nexport function isSelectedCellEditable<R, SR>({\n  selectedPosition,\n  columns,\n  rows,\n  isGroupRow\n}: IsSelectedCellEditableOpts<R, SR>): boolean {\n  const column = columns[selectedPosition.idx];\n  const row = rows[selectedPosition.rowIdx];\n  return !isGroupRow(row) && isCellEditable(column, row);\n}\n\nexport function isCellEditable<R, SR>(column: CalculatedColumn<R, SR>, row: R): boolean {\n  return (\n    column.editor != null &&\n    !column.rowGroup &&\n    (typeof column.editable === 'function' ? column.editable(row) : column.editable) !== false\n  );\n}\n\ninterface GetNextSelectedCellPositionOpts<R, SR> {\n  cellNavigationMode: CellNavigationMode;\n  columns: readonly CalculatedColumn<R, SR>[];\n  colSpanColumns: readonly CalculatedColumn<R, SR>[];\n  rows: readonly (R | GroupRow<R>)[];\n  topSummaryRows: Maybe<readonly SR[]>;\n  bottomSummaryRows: Maybe<readonly SR[]>;\n  minRowIdx: number;\n  maxRowIdx: number;\n  currentPosition: Position;\n  nextPosition: Position;\n  lastFrozenColumnIndex: number;\n  isCellWithinBounds: (position: Position) => boolean;\n  isGroupRow: (row: R | GroupRow<R>) => row is GroupRow<R>;\n}\n\nexport function getSelectedCellColSpan<R, SR>({\n  rows,\n  topSummaryRows,\n  bottomSummaryRows,\n  rowIdx,\n  lastFrozenColumnIndex,\n  column,\n  isGroupRow\n}: Pick<\n  GetNextSelectedCellPositionOpts<R, SR>,\n  'rows' | 'topSummaryRows' | 'bottomSummaryRows' | 'isGroupRow' | 'lastFrozenColumnIndex'\n> & {\n  rowIdx: number;\n  column: CalculatedColumn<R, SR>;\n}) {\n  const topSummaryRowsCount = topSummaryRows?.length ?? 0;\n  const minRowIdx = -1 - topSummaryRowsCount;\n  if (rowIdx === minRowIdx) {\n    return getColSpan(column, lastFrozenColumnIndex, { type: 'HEADER' });\n  }\n\n  if (topSummaryRows && rowIdx > minRowIdx && rowIdx <= topSummaryRowsCount + minRowIdx) {\n    return getColSpan(column, lastFrozenColumnIndex, {\n      type: 'SUMMARY',\n      row: topSummaryRows[rowIdx + topSummaryRowsCount]\n    });\n  }\n\n  if (rowIdx >= 0 && rowIdx < rows.length) {\n    const row = rows[rowIdx];\n    if (!isGroupRow(row)) {\n      return getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row });\n    }\n    return undefined;\n  }\n\n  if (bottomSummaryRows) {\n    return getColSpan(column, lastFrozenColumnIndex, {\n      type: 'SUMMARY',\n      row: bottomSummaryRows[rowIdx - rows.length]\n    });\n  }\n\n  return undefined;\n}\n\nexport function getNextSelectedCellPosition<R, SR>({\n  cellNavigationMode,\n  columns,\n  colSpanColumns,\n  rows,\n  topSummaryRows,\n  bottomSummaryRows,\n  minRowIdx,\n  maxRowIdx,\n  currentPosition: { idx: currentIdx },\n  nextPosition,\n  lastFrozenColumnIndex,\n  isCellWithinBounds,\n  isGroupRow\n}: GetNextSelectedCellPositionOpts<R, SR>): Position {\n  let { idx: nextIdx, rowIdx: nextRowIdx } = nextPosition;\n\n  const setColSpan = (moveRight: boolean) => {\n    if (nextRowIdx >= 0 && nextRowIdx < rows.length) {\n      const row = rows[nextRowIdx];\n      if (isGroupRow(row)) return;\n    }\n    // If a cell within the colspan range is selected then move to the\n    // previous or the next cell depending on the navigation direction\n    for (const column of colSpanColumns) {\n      const colIdx = column.idx;\n      if (colIdx > nextIdx) break;\n      const colSpan = getSelectedCellColSpan({\n        rows,\n        topSummaryRows,\n        bottomSummaryRows,\n        rowIdx: nextRowIdx,\n        lastFrozenColumnIndex,\n        column,\n        isGroupRow\n      });\n\n      if (colSpan && nextIdx > colIdx && nextIdx < colSpan + colIdx) {\n        nextIdx = colIdx + (moveRight ? colSpan : 0);\n        break;\n      }\n    }\n  };\n\n  if (isCellWithinBounds(nextPosition)) {\n    setColSpan(nextIdx - currentIdx > 0);\n  }\n\n  if (cellNavigationMode === 'CHANGE_ROW') {\n    const columnsCount = columns.length;\n    const isAfterLastColumn = nextIdx === columnsCount;\n    const isBeforeFirstColumn = nextIdx === -1;\n\n    if (isAfterLastColumn) {\n      const isLastRow = nextRowIdx === maxRowIdx;\n      if (!isLastRow) {\n        nextIdx = 0;\n        nextRowIdx += 1;\n      }\n    } else if (isBeforeFirstColumn) {\n      const isFirstRow = nextRowIdx === minRowIdx;\n      if (!isFirstRow) {\n        nextRowIdx -= 1;\n        nextIdx = columnsCount - 1;\n      }\n      setColSpan(false);\n    }\n  }\n\n  return { idx: nextIdx, rowIdx: nextRowIdx };\n}\n\ninterface CanExitGridOpts {\n  maxColIdx: number;\n  minRowIdx: number;\n  maxRowIdx: number;\n  selectedPosition: Position;\n  shiftKey: boolean;\n}\n\nexport function canExitGrid({\n  maxColIdx,\n  minRowIdx,\n  maxRowIdx,\n  selectedPosition: { rowIdx, idx },\n  shiftKey\n}: CanExitGridOpts): boolean {\n  // Exit the grid if we're at the first or last cell of the grid\n  const atLastCellInRow = idx === maxColIdx;\n  const atFirstCellInRow = idx === 0;\n  const atLastRow = rowIdx === maxRowIdx;\n  const atFirstRow = rowIdx === minRowIdx;\n\n  return shiftKey ? atFirstCellInRow && atFirstRow : atLastCellInRow && atLastRow;\n}\n","import { memo } from 'react';\nimport { css } from '@linaria/core';\n\nimport { getCellStyle, getCellClassname, isCellEditable, createCellEvent } from './utils';\nimport type { CellRendererProps } from './types';\nimport { useRovingCellRef } from './hooks';\n\nconst cellCopied = css`\n  @layer rdg.Cell {\n    background-color: #ccccff;\n  }\n`;\n\nconst cellCopiedClassname = `rdg-cell-copied ${cellCopied}`;\n\nconst cellDraggedOver = css`\n  @layer rdg.Cell {\n    background-color: #ccccff;\n\n    &.${cellCopied} {\n      background-color: #9999ff;\n    }\n  }\n`;\n\nconst cellDraggedOverClassname = `rdg-cell-dragged-over ${cellDraggedOver}`;\n\nfunction Cell<R, SR>({\n  column,\n  colSpan,\n  isCellSelected,\n  isCopied,\n  isDraggedOver,\n  row,\n  dragHandle,\n  skipCellFocusRef,\n  onClick,\n  onDoubleClick,\n  onContextMenu,\n  onRowChange,\n  selectCell,\n  ...props\n}: CellRendererProps<R, SR>) {\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected, skipCellFocusRef);\n\n  const { cellClass } = column;\n  const className = getCellClassname(\n    column,\n    {\n      [cellCopiedClassname]: isCopied,\n      [cellDraggedOverClassname]: isDraggedOver\n    },\n    typeof cellClass === 'function' ? cellClass(row) : cellClass\n  );\n\n  function selectCellWrapper(openEditor?: boolean) {\n    selectCell(row, column, openEditor);\n  }\n\n  function handleClick(event: React.MouseEvent<HTMLDivElement>) {\n    if (onClick) {\n      const cellEvent = createCellEvent(event);\n      onClick({ row, column, selectCell: selectCellWrapper }, cellEvent);\n      if (cellEvent.isGridDefaultPrevented()) return;\n    }\n    selectCellWrapper();\n  }\n\n  function handleContextMenu(event: React.MouseEvent<HTMLDivElement>) {\n    if (onContextMenu) {\n      const cellEvent = createCellEvent(event);\n      onContextMenu({ row, column, selectCell: selectCellWrapper }, cellEvent);\n      if (cellEvent.isGridDefaultPrevented()) return;\n    }\n    selectCellWrapper();\n  }\n\n  function handleDoubleClick(event: React.MouseEvent<HTMLDivElement>) {\n    if (onDoubleClick) {\n      const cellEvent = createCellEvent(event);\n      onDoubleClick({ row, column, selectCell: selectCellWrapper }, cellEvent);\n      if (cellEvent.isGridDefaultPrevented()) return;\n    }\n    selectCellWrapper(true);\n  }\n\n  function handleRowChange(newRow: R) {\n    onRowChange(column, newRow);\n  }\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1} // aria-colindex is 1-based\n      aria-selected={isCellSelected}\n      aria-colspan={colSpan}\n      aria-readonly={!isCellEditable(column, row) || undefined}\n      ref={ref}\n      tabIndex={tabIndex}\n      className={className}\n      style={getCellStyle(column, colSpan)}\n      onClick={handleClick}\n      onDoubleClick={handleDoubleClick}\n      onContextMenu={handleContextMenu}\n      onFocus={onFocus}\n      {...props}\n    >\n      {!column.rowGroup && (\n        <>\n          {column.formatter({\n            column,\n            row,\n            isCellSelected,\n            onRowChange: handleRowChange\n          })}\n          {dragHandle}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Cell) as <R, SR>(props: CellRendererProps<R, SR>) => JSX.Element;\n","import { memo, forwardRef, type RefAttributes } from 'react';\nimport clsx from 'clsx';\n\nimport Cell from './Cell';\nimport { RowSelectionProvider, useLatestFunc } from './hooks';\nimport { getColSpan, getRowStyle } from './utils';\nimport { rowClassname, rowSelectedClassname } from './style';\nimport type { CalculatedColumn, RowRendererProps } from './types';\n\nfunction Row<R, SR>(\n  {\n    className,\n    rowIdx,\n    gridRowStart,\n    height,\n    selectedCellIdx,\n    isRowSelected,\n    copiedCellIdx,\n    draggedOverCellIdx,\n    lastFrozenColumnIndex,\n    row,\n    viewportColumns,\n    selectedCellEditor,\n    selectedCellDragHandle,\n    skipCellFocusRef,\n    onCellClick,\n    onCellDoubleClick,\n    onCellContextMenu,\n    rowClass,\n    setDraggedOverRowIdx,\n    onMouseEnter,\n    onRowChange,\n    selectCell,\n    ...props\n  }: RowRendererProps<R, SR>,\n  ref: React.Ref<HTMLDivElement>\n) {\n  const handleRowChange = useLatestFunc((column: CalculatedColumn<R, SR>, newRow: R) => {\n    onRowChange(column, rowIdx, newRow);\n  });\n\n  function handleDragEnter(event: React.MouseEvent<HTMLDivElement>) {\n    setDraggedOverRowIdx?.(rowIdx);\n    onMouseEnter?.(event);\n  }\n\n  className = clsx(\n    rowClassname,\n    `rdg-row-${rowIdx % 2 === 0 ? 'even' : 'odd'}`,\n    {\n      [rowSelectedClassname]: selectedCellIdx === -1\n    },\n    rowClass?.(row),\n    className\n  );\n\n  const cells = [];\n\n  for (let index = 0; index < viewportColumns.length; index++) {\n    const column = viewportColumns[index];\n    const { idx } = column;\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row });\n    if (colSpan !== undefined) {\n      index += colSpan - 1;\n    }\n\n    const isCellSelected = selectedCellIdx === idx;\n\n    if (isCellSelected && selectedCellEditor) {\n      cells.push(selectedCellEditor);\n    } else {\n      cells.push(\n        <Cell\n          key={column.key}\n          column={column}\n          colSpan={colSpan}\n          row={row}\n          isCopied={copiedCellIdx === idx}\n          isDraggedOver={draggedOverCellIdx === idx}\n          isCellSelected={isCellSelected}\n          dragHandle={isCellSelected ? selectedCellDragHandle : undefined}\n          onClick={onCellClick}\n          onDoubleClick={onCellDoubleClick}\n          onContextMenu={onCellContextMenu}\n          onRowChange={handleRowChange}\n          selectCell={selectCell}\n          skipCellFocusRef={skipCellFocusRef}\n        />\n      );\n    }\n  }\n\n  return (\n    <RowSelectionProvider value={isRowSelected}>\n      <div\n        role=\"row\"\n        ref={ref}\n        className={className}\n        onMouseEnter={handleDragEnter}\n        style={getRowStyle(gridRowStart, height)}\n        {...props}\n      >\n        {cells}\n      </div>\n    </RowSelectionProvider>\n  );\n}\n\nconst RowComponent = memo(forwardRef(Row)) as <R, SR>(\n  props: RowRendererProps<R, SR> & RefAttributes<HTMLDivElement>\n) => JSX.Element;\n\nexport default RowComponent;\n\nexport function defaultRowRenderer<R, SR>(key: React.Key, props: RowRendererProps<R, SR>) {\n  return <RowComponent key={key} {...props} />;\n}\n","import { memo } from 'react';\n\nimport { getCellStyle, getCellClassname } from './utils';\nimport type { CalculatedColumn, GroupRow } from './types';\nimport type { GroupRowRendererProps } from './GroupRow';\nimport { useRovingCellRef } from './hooks';\n\ntype SharedGroupRowRendererProps<R, SR> = Pick<\n  GroupRowRendererProps<R, SR>,\n  'id' | 'groupKey' | 'childRows' | 'isExpanded' | 'toggleGroup'\n>;\n\ninterface GroupCellProps<R, SR> extends SharedGroupRowRendererProps<R, SR> {\n  column: CalculatedColumn<R, SR>;\n  row: GroupRow<R>;\n  isCellSelected: boolean;\n  groupColumnIndex: number;\n}\n\nfunction GroupCell<R, SR>({\n  id,\n  groupKey,\n  childRows,\n  isExpanded,\n  isCellSelected,\n  column,\n  row,\n  groupColumnIndex,\n  toggleGroup: toggleGroupWrapper\n}: GroupCellProps<R, SR>) {\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected);\n\n  function toggleGroup() {\n    toggleGroupWrapper(id);\n  }\n\n  // Only make the cell clickable if the group level matches\n  const isLevelMatching = column.rowGroup && groupColumnIndex === column.idx;\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1}\n      aria-selected={isCellSelected}\n      ref={ref}\n      tabIndex={tabIndex}\n      key={column.key}\n      className={getCellClassname(column)}\n      style={{\n        ...getCellStyle(column),\n        cursor: isLevelMatching ? 'pointer' : 'default'\n      }}\n      onClick={isLevelMatching ? toggleGroup : undefined}\n      onFocus={onFocus}\n    >\n      {(!column.rowGroup || groupColumnIndex === column.idx) &&\n        column.groupFormatter?.({\n          groupKey,\n          childRows,\n          column,\n          row,\n          isExpanded,\n          isCellSelected,\n          toggleGroup\n        })}\n    </div>\n  );\n}\n\nexport default memo(GroupCell) as <R, SR>(props: GroupCellProps<R, SR>) => JSX.Element;\n","import { memo } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport { cell, cellFrozenLast, rowClassname, rowSelectedClassname } from './style';\nimport { SELECT_COLUMN_KEY } from './Columns';\nimport GroupCell from './GroupCell';\nimport type { CalculatedColumn, GroupRow, Omit } from './types';\nimport { RowSelectionProvider } from './hooks';\nimport { getRowStyle } from './utils';\n\nexport interface GroupRowRendererProps<R, SR>\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, 'style' | 'children'> {\n  id: string;\n  groupKey: unknown;\n  viewportColumns: readonly CalculatedColumn<R, SR>[];\n  childRows: readonly R[];\n  rowIdx: number;\n  row: GroupRow<R>;\n  gridRowStart: number;\n  height: number;\n  level: number;\n  selectedCellIdx: number | undefined;\n  isExpanded: boolean;\n  isRowSelected: boolean;\n  selectGroup: (rowIdx: number) => void;\n  toggleGroup: (expandedGroupId: unknown) => void;\n}\n\nconst groupRow = css`\n  @layer rdg.GroupedRow {\n    &:not([aria-selected='true']) {\n      background-color: var(--rdg-header-background-color);\n    }\n\n    > .${cell}:not(:last-child):not(.${cellFrozenLast}) {\n      border-inline-end: none;\n    }\n  }\n`;\n\nconst groupRowClassname = `rdg-group-row ${groupRow}`;\n\nfunction GroupedRow<R, SR>({\n  id,\n  groupKey,\n  viewportColumns,\n  childRows,\n  rowIdx,\n  row,\n  gridRowStart,\n  height,\n  level,\n  isExpanded,\n  selectedCellIdx,\n  isRowSelected,\n  selectGroup,\n  toggleGroup,\n  ...props\n}: GroupRowRendererProps<R, SR>) {\n  // Select is always the first column\n  const idx = viewportColumns[0].key === SELECT_COLUMN_KEY ? level + 1 : level;\n\n  function handleSelectGroup() {\n    selectGroup(rowIdx);\n  }\n\n  return (\n    <RowSelectionProvider value={isRowSelected}>\n      <div\n        role=\"row\"\n        aria-level={level}\n        aria-expanded={isExpanded}\n        className={clsx(\n          rowClassname,\n          groupRowClassname,\n          `rdg-row-${rowIdx % 2 === 0 ? 'even' : 'odd'}`,\n          {\n            [rowSelectedClassname]: selectedCellIdx === -1\n          }\n        )}\n        onClick={handleSelectGroup}\n        style={getRowStyle(gridRowStart, height)}\n        {...props}\n      >\n        {viewportColumns.map((column) => (\n          <GroupCell\n            key={column.key}\n            id={id}\n            groupKey={groupKey}\n            childRows={childRows}\n            isExpanded={isExpanded}\n            isCellSelected={selectedCellIdx === column.idx}\n            column={column}\n            row={row}\n            groupColumnIndex={idx}\n            toggleGroup={toggleGroup}\n          />\n        ))}\n      </div>\n    </RowSelectionProvider>\n  );\n}\n\nexport default memo(GroupedRow) as <R, SR>(props: GroupRowRendererProps<R, SR>) => JSX.Element;\n","import { memo } from 'react';\nimport { css } from '@linaria/core';\n\nimport { getCellStyle, getCellClassname } from './utils';\nimport type { CalculatedColumn, CellRendererProps } from './types';\nimport { useRovingCellRef } from './hooks';\n\nexport const summaryCellClassname = css`\n  @layer rdg.SummaryCell {\n    inset-block-start: var(--rdg-summary-row-top);\n    inset-block-end: var(--rdg-summary-row-bottom);\n  }\n`;\n\ninterface SharedCellRendererProps<R, SR>\n  extends Pick<CellRendererProps<R, SR>, 'column' | 'colSpan' | 'isCellSelected'> {\n  selectCell: (row: SR, column: CalculatedColumn<R, SR>) => void;\n}\n\ninterface SummaryCellProps<R, SR> extends SharedCellRendererProps<R, SR> {\n  row: SR;\n}\n\nfunction SummaryCell<R, SR>({\n  column,\n  colSpan,\n  row,\n  isCellSelected,\n  selectCell\n}: SummaryCellProps<R, SR>) {\n  const { ref, tabIndex, onFocus } = useRovingCellRef(isCellSelected);\n  const { summaryCellClass } = column;\n  const className = getCellClassname(\n    column,\n    summaryCellClassname,\n    typeof summaryCellClass === 'function' ? summaryCellClass(row) : summaryCellClass\n  );\n\n  function onClick() {\n    selectCell(row, column);\n  }\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1}\n      aria-colspan={colSpan}\n      aria-selected={isCellSelected}\n      ref={ref}\n      tabIndex={tabIndex}\n      className={className}\n      style={getCellStyle(column, colSpan)}\n      onClick={onClick}\n      onFocus={onFocus}\n    >\n      {column.summaryFormatter?.({ column, row, isCellSelected })}\n    </div>\n  );\n}\n\nexport default memo(SummaryCell) as <R, SR>(props: SummaryCellProps<R, SR>) => JSX.Element;\n","import { memo } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport { cell, cellFrozen, rowClassname, rowSelectedClassname } from './style';\nimport { getColSpan, getRowStyle } from './utils';\nimport SummaryCell from './SummaryCell';\nimport type { CalculatedColumn, RowRendererProps } from './types';\n\ntype SharedRowRendererProps<R, SR> = Pick<\n  RowRendererProps<R, SR>,\n  'viewportColumns' | 'rowIdx' | 'gridRowStart'\n>;\n\ninterface SummaryRowProps<R, SR> extends SharedRowRendererProps<R, SR> {\n  'aria-rowindex': number;\n  row: SR;\n  top: number | undefined;\n  bottom: number | undefined;\n  lastFrozenColumnIndex: number;\n  selectedCellIdx: number | undefined;\n  lastTopRowIdx: number | undefined;\n  selectCell: (row: SR, column: CalculatedColumn<R, SR>) => void;\n}\n\nconst summaryRow = css`\n  @layer rdg.SummaryRow {\n    line-height: var(--rdg-summary-row-height);\n\n    > .${cell} {\n      position: sticky;\n    }\n  }\n`;\n\nconst topSummaryRow = css`\n  @layer rdg.SummaryRow {\n    > .${cell} {\n      z-index: 1;\n    }\n\n    > .${cellFrozen} {\n      z-index: 2;\n    }\n  }\n`;\n\nconst topSummaryRowBorderClassname = css`\n  @layer rdg.SummaryRow {\n    > .${cell} {\n      border-block-end: 2px solid var(--rdg-summary-border-color);\n    }\n  }\n`;\n\nconst bottomSummaryRowBorderClassname = css`\n  @layer rdg.SummaryRow {\n    > .${cell} {\n      border-block-start: 2px solid var(--rdg-summary-border-color);\n    }\n  }\n`;\n\nconst summaryRowClassname = `rdg-summary-row ${summaryRow}`;\n\nconst topSummaryRowClassname = `rdg-top-summary-row ${topSummaryRow}`;\n\nfunction SummaryRow<R, SR>({\n  rowIdx,\n  gridRowStart,\n  row,\n  viewportColumns,\n  top,\n  bottom,\n  lastFrozenColumnIndex,\n  selectedCellIdx,\n  lastTopRowIdx,\n  selectCell,\n  'aria-rowindex': ariaRowIndex\n}: SummaryRowProps<R, SR>) {\n  const cells = [];\n  for (let index = 0; index < viewportColumns.length; index++) {\n    const column = viewportColumns[index];\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'SUMMARY', row });\n    if (colSpan !== undefined) {\n      index += colSpan - 1;\n    }\n\n    const isCellSelected = selectedCellIdx === column.idx;\n\n    cells.push(\n      <SummaryCell<R, SR>\n        key={column.key}\n        column={column}\n        colSpan={colSpan}\n        row={row}\n        isCellSelected={isCellSelected}\n        selectCell={selectCell}\n      />\n    );\n  }\n\n  const isTop = lastTopRowIdx !== undefined;\n\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={ariaRowIndex}\n      className={clsx(\n        rowClassname,\n        `rdg-row-${rowIdx % 2 === 0 ? 'even' : 'odd'}`,\n        summaryRowClassname,\n        {\n          [rowSelectedClassname]: selectedCellIdx === -1,\n          [topSummaryRowClassname]: isTop,\n          [topSummaryRowBorderClassname]: isTop && lastTopRowIdx === rowIdx,\n          [bottomSummaryRowBorderClassname]: !isTop && rowIdx === 0,\n          'rdg-bottom-summary-row': !isTop\n        }\n      )}\n      style={\n        {\n          ...getRowStyle(gridRowStart),\n          '--rdg-summary-row-top': top !== undefined ? `${top}px` : undefined,\n          '--rdg-summary-row-bottom': bottom !== undefined ? `${bottom}px` : undefined\n        } as unknown as React.CSSProperties\n      }\n    >\n      {cells}\n    </div>\n  );\n}\n\nexport default memo(SummaryRow) as <R, SR>(props: SummaryRowProps<R, SR>) => JSX.Element;\n","// https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\nconst nonInputKeys = new Set([\n  // Special keys\n  'Unidentified',\n  // Modifier keys\n  'Alt',\n  'AltGraph',\n  'CapsLock',\n  'Control',\n  'Fn',\n  'FnLock',\n  'Meta',\n  'NumLock',\n  'ScrollLock',\n  'Shift',\n  // Whitespace keys\n  'Tab',\n  // Navigation keys\n  'ArrowDown',\n  'ArrowLeft',\n  'ArrowRight',\n  'ArrowUp',\n  'End',\n  'Home',\n  'PageDown',\n  'PageUp',\n  // Editing\n  'Insert',\n  // UI keys\n  'ContextMenu',\n  'Escape',\n  'Pause',\n  'Play',\n  // Device keys\n  'PrintScreen',\n  // Function keys\n  'F1',\n  // 'F2', /!\\ specifically allowed, do not edit\n  'F3',\n  'F4',\n  'F5',\n  'F6',\n  'F7',\n  'F8',\n  'F9',\n  'F10',\n  'F11',\n  'F12'\n]);\n\nexport function isCtrlKeyHeldDown(e: React.KeyboardEvent): boolean {\n  return (e.ctrlKey || e.metaKey) && e.key !== 'Control';\n}\n\nexport function isDefaultCellInput(event: React.KeyboardEvent<HTMLDivElement>): boolean {\n  return !nonInputKeys.has(event.key);\n}\n\n/**\n * By default, the following navigation keys are enabled while an editor is open, under specific conditions:\n * - Tab:\n *   - The editor must be an <input>, a <textarea>, or a <select> element.\n *   - The editor element must be the only immediate child of the editor container/a label.\n */\nexport function onEditorNavigation({ key, target }: React.KeyboardEvent<HTMLDivElement>): boolean {\n  if (\n    key === 'Tab' &&\n    (target instanceof HTMLInputElement ||\n      target instanceof HTMLTextAreaElement ||\n      target instanceof HTMLSelectElement)\n  ) {\n    return target.matches(\n      '.rdg-editor-container > :only-child, .rdg-editor-container > label:only-child > :only-child, .rdg-editor-container > div:only-child > label:only-child > :only-child'\n    );\n  }\n  return false;\n}\n","import { useEffect, useRef, type MutableRefObject, useCallback } from 'react';\nimport { css } from '@linaria/core';\n\nimport { useLatestFunc } from './hooks';\nimport { getCellStyle, getCellClassname, onEditorNavigation, createCellEvent } from './utils';\nimport type {\n  CellKeyboardEvent,\n  CellRendererProps,\n  EditCellKeyDownArgs,\n  EditorProps,\n  Maybe,\n  Omit\n} from './types';\n\n/*\n * To check for outside `mousedown` events, we listen to all `mousedown` events at their birth,\n * i.e. on the window during the capture phase, and at their death, i.e. on the window during the bubble phase.\n *\n * We schedule a check at the birth of the event, cancel the check when the event reaches the \"inside\" container,\n * and trigger the \"outside\" callback when the event bubbles back up to the window.\n *\n * The event can be `stopPropagation()`ed halfway through, so they may not always bubble back up to the window,\n * so an alternative check must be used. The check must happen after the event can reach the \"inside\" container,\n * and not before it run to completion. `requestAnimationFrame` is the best way we know how to achieve this.\n * Usually we want click event handlers from parent components to access the latest commited values,\n * so `mousedown` is used instead of `click`.\n *\n * We must also rely on React's event capturing/bubbling to handle elements rendered in a portal.\n */\n\nconst cellEditing = css`\n  @layer rdg.EditCell {\n    padding: 0;\n  }\n`;\n\ntype SharedCellRendererProps<R, SR> = Pick<CellRendererProps<R, SR>, 'colSpan'>;\n\ninterface EditCellProps<R, SR>\n  extends Omit<EditorProps<R, SR>, 'onClose'>,\n    SharedCellRendererProps<R, SR> {\n  rowIdx: number;\n  skipCellFocusRef: MutableRefObject<boolean>;\n  closeEditor: () => void;\n  navigate: (event: React.KeyboardEvent<HTMLDivElement>) => void;\n  onKeyDown: Maybe<(args: EditCellKeyDownArgs<R, SR>, event: CellKeyboardEvent) => void>;\n}\n\nexport default function EditCell<R, SR>({\n  column,\n  colSpan,\n  row,\n  rowIdx,\n  skipCellFocusRef,\n  onRowChange,\n  closeEditor,\n  onKeyDown,\n  navigate\n}: EditCellProps<R, SR>) {\n  const frameRequestRef = useRef<number | undefined>();\n  const commitOnOutsideClick = column.editorOptions?.commitOnOutsideClick !== false;\n\n  // We need to prevent the `useEffect` from cleaning up between re-renders,\n  // as `onWindowCaptureMouseDown` might otherwise miss valid mousedown events.\n  // To that end we instead access the latest props via useLatestFunc.\n  const commitOnOutsideMouseDown = useLatestFunc(() => {\n    onClose(true);\n  });\n\n  const cancelFrameRequest = useCallback(() => {\n    skipCellFocusRef.current = false;\n    if (commitOnOutsideClick) {\n      cancelAnimationFrame(frameRequestRef.current!);\n    }\n  }, [commitOnOutsideClick, skipCellFocusRef]);\n\n  useEffect(() => {\n    function onWindowCaptureMouseDown() {\n      skipCellFocusRef.current = true;\n      if (commitOnOutsideClick) {\n        frameRequestRef.current = requestAnimationFrame(commitOnOutsideMouseDown);\n      }\n    }\n\n    addEventListener('mousedown', onWindowCaptureMouseDown, { capture: true });\n\n    return () => {\n      removeEventListener('mousedown', onWindowCaptureMouseDown, { capture: true });\n      cancelFrameRequest();\n    };\n  }, [cancelFrameRequest, commitOnOutsideClick, commitOnOutsideMouseDown, skipCellFocusRef]);\n\n  function handleKeyDown(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (onKeyDown) {\n      const cellEvent = createCellEvent(event);\n      onKeyDown({ mode: 'EDIT', row, column, rowIdx, onClose }, cellEvent);\n      if (cellEvent.isGridDefaultPrevented()) return;\n    }\n    if (event.key === 'Escape') {\n      // Discard changes\n      onClose();\n    } else if (event.key === 'Enter') {\n      onClose(true);\n    } else if (onEditorNavigation(event)) {\n      navigate(event);\n    }\n  }\n\n  function onClose(commitChanges?: boolean) {\n    if (commitChanges) {\n      onRowChange(row, true);\n    } else {\n      closeEditor();\n    }\n  }\n\n  const { cellClass } = column;\n  const className = getCellClassname(\n    column,\n    'rdg-editor-container',\n    !column.editorOptions?.renderFormatter && cellEditing,\n    typeof cellClass === 'function' ? cellClass(row) : cellClass\n  );\n\n  return (\n    <div\n      role=\"gridcell\"\n      aria-colindex={column.idx + 1} // aria-colindex is 1-based\n      aria-colspan={colSpan}\n      aria-selected\n      className={className}\n      style={getCellStyle(column, colSpan)}\n      onKeyDown={handleKeyDown}\n      onMouseDownCapture={cancelFrameRequest}\n    >\n      {column.editor != null && (\n        <>\n          {column.editor({\n            column,\n            row,\n            onRowChange,\n            onClose\n          })}\n          {column.editorOptions?.renderFormatter &&\n            column.formatter({ column, row, isCellSelected: true, onRowChange })}\n        </>\n      )}\n    </div>\n  );\n}\n","import { css } from '@linaria/core';\n\nimport type { CalculatedColumn, FillEvent, Position } from './types';\nimport type { DataGridProps, SelectCellState } from './DataGrid';\n\nconst cellDragHandle = css`\n  @layer rdg.DragHandle {\n    cursor: move;\n    position: absolute;\n    inset-inline-end: 0;\n    inset-block-end: 0;\n    inline-size: 8px;\n    block-size: 8px;\n    background-color: var(--rdg-selection-color);\n\n    &:hover {\n      inline-size: 16px;\n      block-size: 16px;\n      border: 2px solid var(--rdg-selection-color);\n      background-color: var(--rdg-background-color);\n    }\n  }\n`;\n\nconst cellDragHandleClassname = `rdg-cell-drag-handle ${cellDragHandle}`;\n\ninterface Props<R, SR> extends Pick<DataGridProps<R, SR>, 'rows' | 'onRowsChange'> {\n  columns: readonly CalculatedColumn<R, SR>[];\n  selectedPosition: SelectCellState;\n  latestDraggedOverRowIdx: React.MutableRefObject<number | undefined>;\n  isCellEditable: (position: Position) => boolean;\n  onFill: (event: FillEvent<R>) => R;\n  setDragging: (isDragging: boolean) => void;\n  setDraggedOverRowIdx: (overRowIdx: number | undefined) => void;\n}\n\nexport default function DragHandle<R, SR>({\n  rows,\n  columns,\n  selectedPosition,\n  latestDraggedOverRowIdx,\n  isCellEditable,\n  onRowsChange,\n  onFill,\n  setDragging,\n  setDraggedOverRowIdx\n}: Props<R, SR>) {\n  function handleMouseDown(event: React.MouseEvent<HTMLDivElement>) {\n    if (event.buttons !== 1) return;\n    setDragging(true);\n    window.addEventListener('mouseover', onMouseOver);\n    window.addEventListener('mouseup', onMouseUp);\n\n    function onMouseOver(event: MouseEvent) {\n      // Trigger onMouseup in edge cases where we release the mouse button but `mouseup` isn't triggered,\n      // for example when releasing the mouse button outside the iframe the grid is rendered in.\n      // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n      if (event.buttons !== 1) onMouseUp();\n    }\n\n    function onMouseUp() {\n      window.removeEventListener('mouseover', onMouseOver);\n      window.removeEventListener('mouseup', onMouseUp);\n      setDragging(false);\n      handleDragEnd();\n    }\n  }\n\n  function handleDragEnd() {\n    const overRowIdx = latestDraggedOverRowIdx.current;\n    if (overRowIdx === undefined) return;\n\n    const { rowIdx } = selectedPosition;\n    const startRowIndex = rowIdx < overRowIdx ? rowIdx + 1 : overRowIdx;\n    const endRowIndex = rowIdx < overRowIdx ? overRowIdx + 1 : rowIdx;\n    updateRows(startRowIndex, endRowIndex);\n    setDraggedOverRowIdx(undefined);\n  }\n\n  function handleDoubleClick(event: React.MouseEvent<HTMLDivElement>) {\n    event.stopPropagation();\n    updateRows(selectedPosition.rowIdx + 1, rows.length);\n  }\n\n  function updateRows(startRowIdx: number, endRowIdx: number) {\n    const { idx, rowIdx } = selectedPosition;\n    const column = columns[idx];\n    const sourceRow = rows[rowIdx];\n    const updatedRows = [...rows];\n    const indexes: number[] = [];\n    for (let i = startRowIdx; i < endRowIdx; i++) {\n      if (isCellEditable({ rowIdx: i, idx })) {\n        const updatedRow = onFill({ columnKey: column.key, sourceRow, targetRow: rows[i] });\n        if (updatedRow !== rows[i]) {\n          updatedRows[i] = updatedRow;\n          indexes.push(i);\n        }\n      }\n    }\n\n    if (indexes.length > 0) {\n      onRowsChange?.(updatedRows, { indexes, column });\n    }\n  }\n\n  return (\n    <div\n      className={cellDragHandleClassname}\n      onMouseDown={handleMouseDown}\n      onDoubleClick={handleDoubleClick}\n    />\n  );\n}\n","import { css } from '@linaria/core';\nimport type { SortStatusProps, SortIconProps, SortPriorityProps } from './types';\n\nconst arrow = css`\n  @layer rdg.SortIcon {\n    fill: currentColor;\n\n    > path {\n      transition: d 0.1s;\n    }\n  }\n`;\n\nconst arrowClassname = `rdg-sort-arrow ${arrow}`;\n\nexport default function sortStatus({ sortDirection, priority }: SortStatusProps) {\n  return (\n    <>\n      {sortIcon({ sortDirection })}\n      {sortPriority({ priority })}\n    </>\n  );\n}\n\nexport function sortIcon({ sortDirection }: SortIconProps) {\n  if (sortDirection === undefined) return null;\n\n  return (\n    <svg viewBox=\"0 0 12 8\" width=\"12\" height=\"8\" className={arrowClassname} aria-hidden>\n      <path d={sortDirection === 'ASC' ? 'M0 8 6 0 12 8' : 'M0 0 6 8 12 0'} />\n    </svg>\n  );\n}\n\nexport function sortPriority({ priority }: SortPriorityProps) {\n  return priority;\n}\n","import clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport type { CheckboxFormatterProps } from '../types';\n\nconst checkboxLabel = css`\n  @layer rdg.CheckboxLabel {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    inset: 0;\n    margin-inline-end: 1px; /* align checkbox in row group cell */\n  }\n`;\n\nconst checkboxLabelClassname = `rdg-checkbox-label ${checkboxLabel}`;\n\nconst checkboxInput = css`\n  @layer rdg.CheckboxInput {\n    all: unset;\n  }\n`;\n\nconst checkboxInputClassname = `rdg-checkbox-input ${checkboxInput}`;\n\nconst checkbox = css`\n  @layer rdg.CheckboxIcon {\n    content: '';\n    inline-size: 20px;\n    block-size: 20px;\n    border: 2px solid var(--rdg-border-color);\n    background-color: var(--rdg-background-color);\n\n    .${checkboxInput}:checked + & {\n      background-color: var(--rdg-checkbox-color);\n      outline: 4px solid var(--rdg-background-color);\n      outline-offset: -6px;\n    }\n\n    .${checkboxInput}:focus + & {\n      border-color: var(--rdg-checkbox-focus-color);\n    }\n  }\n`;\n\nconst checkboxClassname = `rdg-checkbox ${checkbox}`;\n\nconst checkboxLabelDisabled = css`\n  @layer rdg.CheckboxLabel {\n    cursor: default;\n\n    .${checkbox} {\n      border-color: var(--rdg-checkbox-disabled-border-color);\n      background-color: var(--rdg-checkbox-disabled-background-color);\n    }\n  }\n`;\n\nconst checkboxLabelDisabledClassname = `rdg-checkbox-label-disabled ${checkboxLabelDisabled}`;\n\nexport function checkboxFormatter(\n  { onChange, ...props }: CheckboxFormatterProps,\n  ref: React.RefObject<HTMLInputElement>\n) {\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    onChange(e.target.checked, (e.nativeEvent as MouseEvent).shiftKey);\n  }\n\n  return (\n    <label\n      className={clsx(checkboxLabelClassname, {\n        [checkboxLabelDisabledClassname]: props.disabled\n      })}\n    >\n      <input\n        type=\"checkbox\"\n        ref={ref}\n        {...props}\n        className={checkboxInputClassname}\n        onChange={handleChange}\n      />\n      <div className={checkboxClassname} />\n    </label>\n  );\n}\n","import { css } from '@linaria/core';\nimport type { CalculatedColumn } from '../types';\n\nconst measuringCellClassname = css`\n  @layer rdg.MeasuringCell {\n    contain: strict;\n    grid-row: 1;\n    visibility: hidden;\n  }\n`;\n\nexport function renderMeasuringCells<R, SR>(viewportColumns: readonly CalculatedColumn<R, SR>[]) {\n  return (\n    <>\n      {viewportColumns.map(({ key, idx, minWidth, maxWidth }) => (\n        <div\n          key={key}\n          className={measuringCellClassname}\n          style={{ gridColumnStart: idx + 1, minWidth, maxWidth }}\n          data-measuring-cell-key={key}\n        />\n      ))}\n    </>\n  );\n}\n","import { forwardRef, useState, useRef, useImperativeHandle, useCallback, useMemo } from 'react';\nimport type { Key, RefAttributes, KeyboardEvent } from 'react';\nimport { flushSync } from 'react-dom';\nimport clsx from 'clsx';\n\nimport {\n  rootClassname,\n  viewportDraggingClassname,\n  focusSinkClassname,\n  rowSelected,\n  rowSelectedWithFrozenCell\n} from './style';\nimport {\n  useLayoutEffect,\n  useGridDimensions,\n  useCalculatedColumns,\n  useViewportColumns,\n  useViewportRows,\n  useLatestFunc,\n  RowSelectionChangeProvider,\n  RowSelectionProvider\n} from './hooks';\nimport HeaderRow from './HeaderRow';\nimport { defaultRowRenderer } from './Row';\nimport GroupRowRenderer from './GroupRow';\nimport SummaryRow from './SummaryRow';\nimport EditCell from './EditCell';\nimport DragHandle from './DragHandle';\nimport { default as defaultSortStatus } from './sortStatus';\nimport { checkboxFormatter as defaultCheckboxFormatter } from './formatters';\nimport {\n  DataGridDefaultRenderersProvider,\n  useDefaultRenderers\n} from './DataGridDefaultRenderersProvider';\nimport {\n  assertIsValidKeyGetter,\n  getNextSelectedCellPosition,\n  isSelectedCellEditable,\n  canExitGrid,\n  isCtrlKeyHeldDown,\n  isDefaultCellInput,\n  getColSpan,\n  sign,\n  abs,\n  getSelectedCellColSpan,\n  renderMeasuringCells,\n  scrollIntoView,\n  createCellEvent\n} from './utils';\n\nimport type {\n  CalculatedColumn,\n  Column,\n  Position,\n  RowsChangeData,\n  SelectRowEvent,\n  FillEvent,\n  CopyEvent,\n  PasteEvent,\n  CellNavigationMode,\n  SortColumn,\n  RowHeightArgs,\n  Maybe,\n  Renderers,\n  Direction,\n  CellMouseEvent,\n  CellClickArgs,\n  CellKeyDownArgs,\n  CellKeyboardEvent\n} from './types';\n\nexport interface SelectCellState extends Position {\n  readonly mode: 'SELECT';\n}\n\ninterface EditCellState<R> extends Position {\n  readonly mode: 'EDIT';\n  readonly row: R;\n  readonly originalRow: R;\n}\n\ntype DefaultColumnOptions<R, SR> = Pick<\n  Column<R, SR>,\n  'formatter' | 'width' | 'minWidth' | 'maxWidth' | 'resizable' | 'sortable'\n>;\n\nexport interface DataGridHandle {\n  element: HTMLDivElement | null;\n  scrollToColumn: (colIdx: number) => void;\n  scrollToRow: (rowIdx: number) => void;\n  selectCell: (position: Position, enableEditor?: Maybe<boolean>) => void;\n}\n\ntype SharedDivProps = Pick<\n  React.HTMLAttributes<HTMLDivElement>,\n  'aria-label' | 'aria-labelledby' | 'aria-describedby' | 'className' | 'style'\n>;\n\nexport interface DataGridProps<R, SR = unknown, K extends Key = Key> extends SharedDivProps {\n  /**\n   * Grid and data Props\n   */\n  /** An array of objects representing each column on the grid */\n  columns: readonly Column<R, SR>[];\n  /** A function called for each rendered row that should return a plain key/value pair object */\n  rows: readonly R[];\n  /**\n   * Rows to be pinned at the top of the rows view for summary, the vertical scroll bar will not scroll these rows.\n   */\n  topSummaryRows?: Maybe<readonly SR[]>;\n  /**\n   * Rows to be pinned at the bottom of the rows view for summary, the vertical scroll bar will not scroll these rows.\n   */\n  bottomSummaryRows?: Maybe<readonly SR[]>;\n  /** The getter should return a unique key for each row */\n  rowKeyGetter?: Maybe<(row: R) => K>;\n  onRowsChange?: Maybe<(rows: R[], data: RowsChangeData<R, SR>) => void>;\n\n  /**\n   * Dimensions props\n   */\n  /**\n   * The height of each row in pixels\n   * @default 35\n   */\n  rowHeight?: Maybe<number | ((args: RowHeightArgs<R>) => number)>;\n  /**\n   * The height of the header row in pixels\n   * @default 35\n   */\n  headerRowHeight?: Maybe<number>;\n  /**\n   * The height of each summary row in pixels\n   * @default 35\n   */\n  summaryRowHeight?: Maybe<number>;\n\n  /**\n   * Feature props\n   */\n  /** Set of selected row keys */\n  selectedRows?: Maybe<ReadonlySet<K>>;\n  /** Function called whenever row selection is changed */\n  onSelectedRowsChange?: Maybe<(selectedRows: Set<K>) => void>;\n  /** Used for multi column sorting */\n  sortColumns?: Maybe<readonly SortColumn[]>;\n  onSortColumnsChange?: Maybe<(sortColumns: SortColumn[]) => void>;\n  defaultColumnOptions?: Maybe<DefaultColumnOptions<R, SR>>;\n  groupBy?: Maybe<readonly string[]>;\n  rowGrouper?: Maybe<(rows: readonly R[], columnKey: string) => Record<string, readonly R[]>>;\n  expandedGroupIds?: Maybe<ReadonlySet<unknown>>;\n  onExpandedGroupIdsChange?: Maybe<(expandedGroupIds: Set<unknown>) => void>;\n  onFill?: Maybe<(event: FillEvent<R>) => R>;\n  onCopy?: Maybe<(event: CopyEvent<R>) => void>;\n  onPaste?: Maybe<(event: PasteEvent<R>) => R>;\n\n  /**\n   * Event props\n   */\n  /** Function called whenever a cell is clicked */\n  onCellClick?: Maybe<(args: CellClickArgs<R, SR>, event: CellMouseEvent) => void>;\n  /** Function called whenever a cell is double clicked */\n  onCellDoubleClick?: Maybe<(args: CellClickArgs<R, SR>, event: CellMouseEvent) => void>;\n  /** Function called whenever a cell is right clicked */\n  onCellContextMenu?: Maybe<(args: CellClickArgs<R, SR>, event: CellMouseEvent) => void>;\n  onCellKeyDown?: Maybe<(args: CellKeyDownArgs<R, SR>, event: CellKeyboardEvent) => void>;\n  /** Called when the grid is scrolled */\n  onScroll?: Maybe<(event: React.UIEvent<HTMLDivElement>) => void>;\n  /** Called when a column is resized */\n  onColumnResize?: Maybe<(idx: number, width: number) => void>;\n\n  /**\n   * Toggles and modes\n   */\n  /** @default true */\n  enableVirtualization?: Maybe<boolean>;\n\n  /**\n   * Miscellaneous\n   */\n  renderers?: Maybe<Renderers<R, SR>>;\n  rowClass?: Maybe<(row: R) => Maybe<string>>;\n  /** @default 'ltr' */\n  direction?: Maybe<Direction>;\n  'data-testid'?: Maybe<string>;\n}\n\n/**\n * Main API Component to render a data grid of rows and columns\n *\n * @example\n *\n * <DataGrid columns={columns} rows={rows} />\n */\nfunction DataGrid<R, SR, K extends Key>(\n  props: DataGridProps<R, SR, K>,\n  ref: React.Ref<DataGridHandle>\n) {\n  const {\n    // Grid and data Props\n    columns: rawColumns,\n    rows: rawRows,\n    topSummaryRows,\n    bottomSummaryRows,\n    rowKeyGetter,\n    onRowsChange,\n    // Dimensions props\n    rowHeight: rawRowHeight,\n    headerRowHeight: rawHeaderRowHeight,\n    summaryRowHeight: rawSummaryRowHeight,\n    // Feature props\n    selectedRows,\n    onSelectedRowsChange,\n    sortColumns,\n    onSortColumnsChange,\n    defaultColumnOptions,\n    groupBy: rawGroupBy,\n    rowGrouper,\n    expandedGroupIds,\n    onExpandedGroupIdsChange,\n    // Event props\n    onCellClick,\n    onCellDoubleClick,\n    onCellContextMenu,\n    onCellKeyDown,\n    onScroll,\n    onColumnResize,\n    onFill,\n    onCopy,\n    onPaste,\n    // Toggles and modes\n    enableVirtualization: rawEnableVirtualization,\n    // Miscellaneous\n    renderers,\n    className,\n    style,\n    rowClass,\n    direction: rawDirection,\n    // ARIA\n    'aria-label': ariaLabel,\n    'aria-labelledby': ariaLabelledBy,\n    'aria-describedby': ariaDescribedBy,\n    'data-testid': testId\n  } = props;\n\n  /**\n   * defaults\n   */\n  const defaultRenderers = useDefaultRenderers<R, SR>();\n  const rowHeight = rawRowHeight ?? 35;\n  const headerRowHeight = rawHeaderRowHeight ?? (typeof rowHeight === 'number' ? rowHeight : 35);\n  const summaryRowHeight = rawSummaryRowHeight ?? (typeof rowHeight === 'number' ? rowHeight : 35);\n  const rowRenderer = renderers?.rowRenderer ?? defaultRenderers?.rowRenderer ?? defaultRowRenderer;\n  const sortStatus = renderers?.sortStatus ?? defaultRenderers?.sortStatus ?? defaultSortStatus;\n  const checkboxFormatter =\n    renderers?.checkboxFormatter ?? defaultRenderers?.checkboxFormatter ?? defaultCheckboxFormatter;\n  const noRowsFallback = renderers?.noRowsFallback ?? defaultRenderers?.noRowsFallback;\n  const enableVirtualization = rawEnableVirtualization ?? true;\n  const direction = rawDirection ?? 'ltr';\n\n  const headerRowsCount = 1;\n  const topSummaryRowsCount = topSummaryRows?.length ?? 0;\n  const bottomSummaryRowsCount = bottomSummaryRows?.length ?? 0;\n  const summaryRowsCount = topSummaryRowsCount + bottomSummaryRowsCount;\n  const headerAndTopSummaryRowsCount = headerRowsCount + topSummaryRowsCount;\n  const minRowIdx = -headerAndTopSummaryRowsCount;\n\n  /**\n   * states\n   */\n  const [scrollTop, setScrollTop] = useState(0);\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [columnWidths, setColumnWidths] = useState((): ReadonlyMap<string, number> => new Map());\n  const [selectedPosition, setSelectedPosition] = useState<SelectCellState | EditCellState<R>>(\n    () => ({ idx: -1, rowIdx: minRowIdx - 1, mode: 'SELECT' })\n  );\n  const [copiedCell, setCopiedCell] = useState<{ row: R; columnKey: string } | null>(null);\n  const [isDragging, setDragging] = useState(false);\n  const [draggedOverRowIdx, setOverRowIdx] = useState<number | undefined>(undefined);\n\n  /**\n   * refs\n   */\n  const prevSelectedPosition = useRef(selectedPosition);\n  const latestDraggedOverRowIdx = useRef(draggedOverRowIdx);\n  const lastSelectedRowIdx = useRef(-1);\n  const rowRef = useRef<HTMLDivElement>(null);\n  const skipCellFocusRef = useRef(false);\n\n  /**\n   * computed values\n   */\n  const [gridRef, gridWidth, gridHeight, isWidthInitialized] = useGridDimensions();\n  const clientHeight = gridHeight - headerRowHeight - summaryRowsCount * summaryRowHeight;\n  const isSelectable = selectedRows != null && onSelectedRowsChange != null;\n  const isRtl = direction === 'rtl';\n  const leftKey = isRtl ? 'ArrowRight' : 'ArrowLeft';\n  const rightKey = isRtl ? 'ArrowLeft' : 'ArrowRight';\n\n  const defaultGridComponents = useMemo(\n    () => ({\n      sortStatus,\n      checkboxFormatter\n    }),\n    [sortStatus, checkboxFormatter]\n  );\n\n  const allRowsSelected = useMemo((): boolean => {\n    // no rows to select = explicitely unchecked\n    const { length } = rawRows;\n    return (\n      length !== 0 &&\n      selectedRows != null &&\n      rowKeyGetter != null &&\n      selectedRows.size >= length &&\n      rawRows.every((row) => selectedRows.has(rowKeyGetter(row)))\n    );\n  }, [rawRows, selectedRows, rowKeyGetter]);\n\n  const {\n    columns,\n    colSpanColumns,\n    colOverscanStartIdx,\n    colOverscanEndIdx,\n    templateColumns,\n    layoutCssVars,\n    columnMetrics,\n    lastFrozenColumnIndex,\n    totalFrozenColumnWidth,\n    groupBy\n  } = useCalculatedColumns({\n    rawColumns,\n    columnWidths,\n    scrollLeft,\n    viewportWidth: gridWidth,\n    defaultColumnOptions,\n    rawGroupBy: rowGrouper ? rawGroupBy : undefined,\n    enableVirtualization\n  });\n\n  const {\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    rowsCount,\n    totalRowHeight,\n    gridTemplateRows,\n    isGroupRow,\n    getRowTop,\n    getRowHeight,\n    findRowIdx\n  } = useViewportRows({\n    rawRows,\n    groupBy,\n    rowGrouper,\n    rowHeight,\n    clientHeight,\n    scrollTop,\n    expandedGroupIds,\n    enableVirtualization\n  });\n\n  const { viewportColumns, flexWidthViewportColumns } = useViewportColumns({\n    columns,\n    colSpanColumns,\n    colOverscanStartIdx,\n    colOverscanEndIdx,\n    lastFrozenColumnIndex,\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    topSummaryRows,\n    bottomSummaryRows,\n    columnWidths,\n    isGroupRow\n  });\n\n  const hasGroups = groupBy.length > 0 && typeof rowGrouper === 'function';\n  const minColIdx = hasGroups ? -1 : 0;\n  const maxColIdx = columns.length - 1;\n  const maxRowIdx = rows.length + bottomSummaryRowsCount - 1;\n  const selectedCellIsWithinSelectionBounds = isCellWithinSelectionBounds(selectedPosition);\n  const selectedCellIsWithinViewportBounds = isCellWithinViewportBounds(selectedPosition);\n\n  /**\n   * The identity of the wrapper function is stable so it won't break memoization\n   */\n  const handleColumnResizeLatest = useLatestFunc(handleColumnResize);\n  const onSortColumnsChangeLatest = useLatestFunc(onSortColumnsChange);\n  const onCellClickLatest = useLatestFunc(onCellClick);\n  const onCellDoubleClickLatest = useLatestFunc(onCellDoubleClick);\n  const onCellContextMenuLatest = useLatestFunc(onCellContextMenu);\n  const selectRowLatest = useLatestFunc(selectRow);\n  const handleFormatterRowChangeLatest = useLatestFunc(updateRow);\n  const selectViewportCellLatest = useLatestFunc(\n    (row: R, column: CalculatedColumn<R, SR>, enableEditor: Maybe<boolean>) => {\n      const rowIdx = rows.indexOf(row);\n      selectCell({ rowIdx, idx: column.idx }, enableEditor);\n    }\n  );\n  const selectGroupLatest = useLatestFunc((rowIdx: number) => {\n    selectCell({ rowIdx, idx: -1 });\n  });\n  const selectHeaderCellLatest = useLatestFunc((idx: number) => {\n    selectCell({ rowIdx: minRowIdx, idx });\n  });\n  const selectTopSummaryCellLatest = useLatestFunc(\n    (summaryRow: SR, column: CalculatedColumn<R, SR>) => {\n      const rowIdx = topSummaryRows!.indexOf(summaryRow);\n      selectCell({ rowIdx: rowIdx + minRowIdx + 1, idx: column.idx });\n    }\n  );\n  const selectBottomSummaryCellLatest = useLatestFunc(\n    (summaryRow: SR, column: CalculatedColumn<R, SR>) => {\n      const rowIdx = bottomSummaryRows!.indexOf(summaryRow) + rows.length;\n      selectCell({ rowIdx, idx: column.idx });\n    }\n  );\n  const toggleGroupLatest = useLatestFunc(toggleGroup);\n\n  /**\n   * effects\n   */\n  useLayoutEffect(() => {\n    if (\n      !selectedCellIsWithinSelectionBounds ||\n      isSamePosition(selectedPosition, prevSelectedPosition.current)\n    ) {\n      prevSelectedPosition.current = selectedPosition;\n      return;\n    }\n\n    prevSelectedPosition.current = selectedPosition;\n\n    if (selectedPosition.idx === -1) {\n      rowRef.current!.focus({ preventScroll: true });\n      scrollIntoView(rowRef.current);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!isWidthInitialized || flexWidthViewportColumns.length === 0) return;\n\n    setColumnWidths((columnWidths) => {\n      const newColumnWidths = new Map(columnWidths);\n      const grid = gridRef.current!;\n\n      for (const column of flexWidthViewportColumns) {\n        const measuringCell = grid.querySelector(`[data-measuring-cell-key=\"${column.key}\"]`)!;\n        // Set the actual width of the column after it is rendered\n        const { width } = measuringCell.getBoundingClientRect();\n        newColumnWidths.set(column.key, width);\n      }\n\n      return newColumnWidths;\n    });\n  }, [isWidthInitialized, flexWidthViewportColumns, gridRef]);\n\n  useImperativeHandle(ref, () => ({\n    element: gridRef.current,\n    scrollToColumn,\n    scrollToRow(rowIdx: number) {\n      const { current } = gridRef;\n      if (!current) return;\n      current.scrollTo({\n        top: getRowTop(rowIdx),\n        behavior: 'smooth'\n      });\n    },\n    selectCell\n  }));\n\n  /**\n   * callbacks\n   */\n  const setDraggedOverRowIdx = useCallback((rowIdx?: number) => {\n    setOverRowIdx(rowIdx);\n    latestDraggedOverRowIdx.current = rowIdx;\n  }, []);\n\n  /**\n   * event handlers\n   */\n  function handleColumnResize(column: CalculatedColumn<R, SR>, width: number | 'max-content') {\n    const { style } = gridRef.current!;\n    const newTemplateColumns = [...templateColumns];\n    newTemplateColumns[column.idx] = width === 'max-content' ? width : `${width}px`;\n    style.gridTemplateColumns = newTemplateColumns.join(' ');\n\n    const measuringCell = gridRef.current!.querySelector(\n      `[data-measuring-cell-key=\"${column.key}\"]`\n    )!;\n    const measuredWidth = measuringCell.getBoundingClientRect().width;\n    const measuredWidthPx = `${measuredWidth}px`;\n\n    // Immediately update `grid-template-columns` to prevent the column from jumping to its min/max allowed width.\n    // Only measuring cells have the min/max width set for proper colSpan support,\n    // which is why other cells may render at the previously set width, beyond the min/max.\n    // An alternative for the above would be to use flushSync.\n    // We also have to reset `max-content` so it doesn't remain stuck on `max-content`.\n    if (newTemplateColumns[column.idx] !== measuredWidthPx) {\n      newTemplateColumns[column.idx] = measuredWidthPx;\n      style.gridTemplateColumns = newTemplateColumns.join(' ');\n    }\n\n    if (columnWidths.get(column.key) === measuredWidth) return;\n\n    const newColumnWidths = new Map(columnWidths);\n    newColumnWidths.set(column.key, measuredWidth);\n    setColumnWidths(newColumnWidths);\n\n    onColumnResize?.(column.idx, measuredWidth);\n  }\n\n  function selectRow(args: SelectRowEvent<R>) {\n    if (!onSelectedRowsChange) return;\n    if (args.type === 'HEADER') {\n      selectAllRows(args.checked);\n      return;\n    }\n\n    const { row, checked, isShiftClick } = args;\n\n    assertIsValidKeyGetter<R, K>(rowKeyGetter);\n    const newSelectedRows = new Set(selectedRows);\n    if (isGroupRow(row)) {\n      for (const childRow of row.childRows) {\n        const rowKey = rowKeyGetter(childRow);\n        if (checked) {\n          newSelectedRows.add(rowKey);\n        } else {\n          newSelectedRows.delete(rowKey);\n        }\n      }\n      onSelectedRowsChange(newSelectedRows);\n      return;\n    }\n\n    const rowKey = rowKeyGetter(row);\n    if (checked) {\n      newSelectedRows.add(rowKey);\n      const previousRowIdx = lastSelectedRowIdx.current;\n      const rowIdx = rows.indexOf(row);\n      lastSelectedRowIdx.current = rowIdx;\n      if (isShiftClick && previousRowIdx !== -1 && previousRowIdx !== rowIdx) {\n        const step = sign(rowIdx - previousRowIdx);\n        for (let i = previousRowIdx + step; i !== rowIdx; i += step) {\n          const row = rows[i];\n          if (isGroupRow(row)) continue;\n          newSelectedRows.add(rowKeyGetter(row));\n        }\n      }\n    } else {\n      newSelectedRows.delete(rowKey);\n      lastSelectedRowIdx.current = -1;\n    }\n\n    onSelectedRowsChange(newSelectedRows);\n  }\n\n  function selectAllRows(checked: boolean) {\n    if (!onSelectedRowsChange) return;\n\n    assertIsValidKeyGetter<R, K>(rowKeyGetter);\n    const newSelectedRows = new Set(selectedRows);\n\n    for (const row of rawRows) {\n      const rowKey = rowKeyGetter(row);\n      if (checked) {\n        newSelectedRows.add(rowKey);\n      } else {\n        newSelectedRows.delete(rowKey);\n      }\n    }\n\n    onSelectedRowsChange(newSelectedRows);\n  }\n\n  function toggleGroup(expandedGroupId: unknown) {\n    if (!onExpandedGroupIdsChange) return;\n    const newExpandedGroupIds = new Set(expandedGroupIds);\n    if (newExpandedGroupIds.has(expandedGroupId)) {\n      newExpandedGroupIds.delete(expandedGroupId);\n    } else {\n      newExpandedGroupIds.add(expandedGroupId);\n    }\n    onExpandedGroupIdsChange(newExpandedGroupIds);\n  }\n\n  function handleKeyDown(event: KeyboardEvent<HTMLDivElement>) {\n    const { idx, rowIdx, mode } = selectedPosition;\n    if (mode === 'EDIT') return;\n\n    const row = rows[rowIdx];\n    if (!isGroupRow(row) && onCellKeyDown) {\n      const cellEvent = createCellEvent(event);\n      onCellKeyDown(\n        {\n          mode: 'SELECT',\n          row,\n          column: columns[idx],\n          rowIdx,\n          selectCell\n        },\n        cellEvent\n      );\n      if (cellEvent.isGridDefaultPrevented()) return;\n    }\n    if (!(event.target instanceof Element)) return;\n    const isCellEvent = event.target.closest('.rdg-cell') !== null;\n    const isRowEvent = hasGroups && event.target === rowRef.current;\n    if (!isCellEvent && !isRowEvent) return;\n\n    const { key, keyCode } = event;\n\n    if (\n      selectedCellIsWithinViewportBounds &&\n      (onPaste != null || onCopy != null) &&\n      isCtrlKeyHeldDown(event) &&\n      !isGroupRow(rows[rowIdx])\n    ) {\n      // event.key may differ by keyboard input language, so we use event.keyCode instead\n      // event.nativeEvent.code cannot be used either as it would break copy/paste for the DVORAK layout\n      const cKey = 67;\n      const vKey = 86;\n      if (keyCode === cKey) {\n        handleCopy();\n        return;\n      }\n      if (keyCode === vKey) {\n        handlePaste();\n        return;\n      }\n    }\n\n    if (\n      isRowIdxWithinViewportBounds(rowIdx) &&\n      isGroupRow(row) &&\n      selectedPosition.idx === -1 &&\n      // Collapse the current group row if it is focused and is in expanded state\n      ((key === leftKey && row.isExpanded) ||\n        // Expand the current group row if it is focused and is in collapsed state\n        (key === rightKey && !row.isExpanded))\n    ) {\n      event.preventDefault(); // Prevents scrolling\n      toggleGroup(row.id);\n      return;\n    }\n\n    switch (event.key) {\n      case 'Escape':\n        setCopiedCell(null);\n        return;\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'Tab':\n      case 'Home':\n      case 'End':\n      case 'PageUp':\n      case 'PageDown':\n        navigate(event);\n        break;\n      default:\n        handleCellInput(event);\n        break;\n    }\n  }\n\n  function handleScroll(event: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop, scrollLeft } = event.currentTarget;\n    flushSync(() => {\n      setScrollTop(scrollTop);\n      // scrollLeft is nagative when direction is rtl\n      setScrollLeft(abs(scrollLeft));\n    });\n    onScroll?.(event);\n  }\n\n  function getRawRowIdx(rowIdx: number) {\n    return hasGroups ? rawRows.indexOf(rows[rowIdx] as R) : rowIdx;\n  }\n\n  function updateRow(column: CalculatedColumn<R, SR>, rowIdx: number, row: R) {\n    if (typeof onRowsChange !== 'function') return;\n    const rawRowIdx = getRawRowIdx(rowIdx);\n    if (row === rawRows[rawRowIdx]) return;\n    const updatedRows = [...rawRows];\n    updatedRows[rawRowIdx] = row;\n    onRowsChange(updatedRows, {\n      indexes: [rawRowIdx],\n      column\n    });\n  }\n\n  function commitEditorChanges() {\n    if (selectedPosition.mode !== 'EDIT') return;\n    updateRow(columns[selectedPosition.idx], selectedPosition.rowIdx, selectedPosition.row);\n  }\n\n  function handleCopy() {\n    const { idx, rowIdx } = selectedPosition;\n    const sourceRow = rawRows[getRawRowIdx(rowIdx)];\n    const sourceColumnKey = columns[idx].key;\n    setCopiedCell({ row: sourceRow, columnKey: sourceColumnKey });\n    onCopy?.({ sourceRow, sourceColumnKey });\n  }\n\n  function handlePaste() {\n    if (!onPaste || !onRowsChange || copiedCell === null || !isCellEditable(selectedPosition)) {\n      return;\n    }\n\n    const { idx, rowIdx } = selectedPosition;\n    const targetColumn = columns[idx];\n    const targetRow = rawRows[getRawRowIdx(rowIdx)];\n\n    const updatedTargetRow = onPaste({\n      sourceRow: copiedCell.row,\n      sourceColumnKey: copiedCell.columnKey,\n      targetRow,\n      targetColumnKey: targetColumn.key\n    });\n\n    updateRow(targetColumn, rowIdx, updatedTargetRow);\n  }\n\n  function handleCellInput(event: KeyboardEvent<HTMLDivElement>) {\n    if (!selectedCellIsWithinViewportBounds) return;\n    const row = rows[selectedPosition.rowIdx];\n    if (isGroupRow(row)) return;\n    const { key, shiftKey } = event;\n\n    // Select the row on Shift + Space\n    if (isSelectable && shiftKey && key === ' ') {\n      assertIsValidKeyGetter<R, K>(rowKeyGetter);\n      const rowKey = rowKeyGetter(row);\n      selectRow({ type: 'ROW', row, checked: !selectedRows.has(rowKey), isShiftClick: false });\n      // do not scroll\n      event.preventDefault();\n      return;\n    }\n\n    if (isCellEditable(selectedPosition) && isDefaultCellInput(event)) {\n      setSelectedPosition(({ idx, rowIdx }) => ({\n        idx,\n        rowIdx,\n        mode: 'EDIT',\n        row,\n        originalRow: row\n      }));\n    }\n  }\n\n  /**\n   * utils\n   */\n  function isColIdxWithinSelectionBounds(idx: number) {\n    return idx >= minColIdx && idx <= maxColIdx;\n  }\n\n  function isRowIdxWithinViewportBounds(rowIdx: number) {\n    return rowIdx >= 0 && rowIdx < rows.length;\n  }\n\n  function isCellWithinSelectionBounds({ idx, rowIdx }: Position): boolean {\n    return rowIdx >= minRowIdx && rowIdx <= maxRowIdx && isColIdxWithinSelectionBounds(idx);\n  }\n\n  function isCellWithinViewportBounds({ idx, rowIdx }: Position): boolean {\n    return isRowIdxWithinViewportBounds(rowIdx) && isColIdxWithinSelectionBounds(idx);\n  }\n\n  function isCellEditable(position: Position): boolean {\n    return (\n      isCellWithinViewportBounds(position) &&\n      isSelectedCellEditable({ columns, rows, selectedPosition: position, isGroupRow })\n    );\n  }\n\n  function selectCell(position: Position, enableEditor?: Maybe<boolean>): void {\n    if (!isCellWithinSelectionBounds(position)) return;\n    commitEditorChanges();\n\n    if (enableEditor && isCellEditable(position)) {\n      const row = rows[position.rowIdx] as R;\n      setSelectedPosition({ ...position, mode: 'EDIT', row, originalRow: row });\n    } else if (isSamePosition(selectedPosition, position)) {\n      // Avoid re-renders if the selected cell state is the same\n      scrollIntoView(gridRef.current?.querySelector('[tabindex=\"0\"]'));\n    } else {\n      setSelectedPosition({ ...position, mode: 'SELECT' });\n    }\n  }\n\n  function scrollToColumn(idx: number): void {\n    const { current } = gridRef;\n    if (!current) return;\n\n    if (idx > lastFrozenColumnIndex) {\n      const { rowIdx } = selectedPosition;\n      if (!isCellWithinSelectionBounds({ rowIdx, idx })) return;\n      const { clientWidth } = current;\n      const column = columns[idx];\n      const { left, width } = columnMetrics.get(column)!;\n      let right = left + width;\n\n      const colSpan = getSelectedCellColSpan({\n        rows,\n        topSummaryRows,\n        bottomSummaryRows,\n        rowIdx,\n        lastFrozenColumnIndex,\n        column,\n        isGroupRow\n      });\n\n      if (colSpan !== undefined) {\n        const { left, width } = columnMetrics.get(columns[column.idx + colSpan - 1])!;\n        right = left + width;\n      }\n\n      const isCellAtLeftBoundary = left < scrollLeft + totalFrozenColumnWidth;\n      const isCellAtRightBoundary = right > clientWidth + scrollLeft;\n      const sign = isRtl ? -1 : 1;\n      if (isCellAtLeftBoundary) {\n        current.scrollLeft = (left - totalFrozenColumnWidth) * sign;\n      } else if (isCellAtRightBoundary) {\n        current.scrollLeft = (right - clientWidth) * sign;\n      }\n    }\n  }\n\n  function getNextPosition(key: string, ctrlKey: boolean, shiftKey: boolean): Position {\n    const { idx, rowIdx } = selectedPosition;\n    const row = rows[rowIdx];\n    const isRowSelected = selectedCellIsWithinSelectionBounds && idx === -1;\n\n    // If a group row is focused, and it is collapsed, move to the parent group row (if there is one).\n    if (key === leftKey && isRowSelected && isGroupRow(row) && !row.isExpanded && row.level !== 0) {\n      let parentRowIdx = -1;\n      for (let i = selectedPosition.rowIdx - 1; i >= 0; i--) {\n        const parentRow = rows[i];\n        if (isGroupRow(parentRow) && parentRow.id === row.parentId) {\n          parentRowIdx = i;\n          break;\n        }\n      }\n      if (parentRowIdx !== -1) {\n        return { idx, rowIdx: parentRowIdx };\n      }\n    }\n\n    switch (key) {\n      case 'ArrowUp':\n        return { idx, rowIdx: rowIdx - 1 };\n      case 'ArrowDown':\n        return { idx, rowIdx: rowIdx + 1 };\n      case leftKey:\n        return { idx: idx - 1, rowIdx };\n      case rightKey:\n        return { idx: idx + 1, rowIdx };\n      case 'Tab':\n        return { idx: idx + (shiftKey ? -1 : 1), rowIdx };\n      case 'Home':\n        // If row is selected then move focus to the first row\n        if (isRowSelected) return { idx, rowIdx: 0 };\n        return { idx: 0, rowIdx: ctrlKey ? minRowIdx : rowIdx };\n      case 'End':\n        // If row is selected then move focus to the last row.\n        if (isRowSelected) return { idx, rowIdx: rows.length - 1 };\n        return { idx: maxColIdx, rowIdx: ctrlKey ? maxRowIdx : rowIdx };\n      case 'PageUp': {\n        if (selectedPosition.rowIdx === minRowIdx) return selectedPosition;\n        const nextRowY = getRowTop(rowIdx) + getRowHeight(rowIdx) - clientHeight;\n        return { idx, rowIdx: nextRowY > 0 ? findRowIdx(nextRowY) : 0 };\n      }\n      case 'PageDown': {\n        if (selectedPosition.rowIdx >= rows.length) return selectedPosition;\n        const nextRowY = getRowTop(rowIdx) + clientHeight;\n        return { idx, rowIdx: nextRowY < totalRowHeight ? findRowIdx(nextRowY) : rows.length - 1 };\n      }\n      default:\n        return selectedPosition;\n    }\n  }\n\n  function navigate(event: KeyboardEvent<HTMLDivElement>) {\n    const { key, shiftKey } = event;\n    let cellNavigationMode: CellNavigationMode = 'NONE';\n    if (key === 'Tab') {\n      if (\n        canExitGrid({\n          shiftKey,\n          maxColIdx,\n          minRowIdx,\n          maxRowIdx,\n          selectedPosition\n        })\n      ) {\n        commitEditorChanges();\n        // Allow focus to leave the grid so the next control in the tab order can be focused\n        return;\n      }\n\n      cellNavigationMode = 'CHANGE_ROW';\n    }\n\n    // Do not allow focus to leave and prevent scrolling\n    event.preventDefault();\n\n    const ctrlKey = isCtrlKeyHeldDown(event);\n    const nextPosition = getNextPosition(key, ctrlKey, shiftKey);\n    if (isSamePosition(selectedPosition, nextPosition)) return;\n\n    const nextSelectedCellPosition = getNextSelectedCellPosition({\n      columns,\n      colSpanColumns,\n      rows,\n      topSummaryRows,\n      bottomSummaryRows,\n      minRowIdx,\n      maxRowIdx,\n      lastFrozenColumnIndex,\n      cellNavigationMode,\n      currentPosition: selectedPosition,\n      nextPosition,\n      isCellWithinBounds: isCellWithinSelectionBounds,\n      isGroupRow\n    });\n\n    selectCell(nextSelectedCellPosition);\n  }\n\n  function getDraggedOverCellIdx(currentRowIdx: number): number | undefined {\n    if (draggedOverRowIdx === undefined) return;\n    const { rowIdx } = selectedPosition;\n\n    const isDraggedOver =\n      rowIdx < draggedOverRowIdx\n        ? rowIdx < currentRowIdx && currentRowIdx <= draggedOverRowIdx\n        : rowIdx > currentRowIdx && currentRowIdx >= draggedOverRowIdx;\n\n    return isDraggedOver ? selectedPosition.idx : undefined;\n  }\n\n  function getLayoutCssVars() {\n    if (flexWidthViewportColumns.length === 0) return layoutCssVars;\n    const newTemplateColumns = [...templateColumns];\n    for (const column of flexWidthViewportColumns) {\n      newTemplateColumns[column.idx] = column.width as string;\n    }\n\n    return {\n      ...layoutCssVars,\n      gridTemplateColumns: newTemplateColumns.join(' ')\n    };\n  }\n\n  function getDragHandle(rowIdx: number) {\n    if (\n      selectedPosition.rowIdx !== rowIdx ||\n      selectedPosition.mode === 'EDIT' ||\n      hasGroups || // drag fill is not supported when grouping is enabled\n      onFill == null\n    ) {\n      return;\n    }\n\n    return (\n      <DragHandle\n        rows={rawRows}\n        columns={columns}\n        selectedPosition={selectedPosition}\n        isCellEditable={isCellEditable}\n        latestDraggedOverRowIdx={latestDraggedOverRowIdx}\n        onRowsChange={onRowsChange}\n        onFill={onFill}\n        setDragging={setDragging}\n        setDraggedOverRowIdx={setDraggedOverRowIdx}\n      />\n    );\n  }\n\n  function getCellEditor(rowIdx: number) {\n    if (selectedPosition.rowIdx !== rowIdx || selectedPosition.mode === 'SELECT') return;\n\n    const { idx, row } = selectedPosition;\n    const column = columns[idx];\n    const colSpan = getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row });\n\n    const closeEditor = () => {\n      setSelectedPosition(({ idx, rowIdx }) => ({ idx, rowIdx, mode: 'SELECT' }));\n    };\n\n    const onRowChange = (row: R, commitChanges?: boolean) => {\n      if (commitChanges) {\n        updateRow(column, selectedPosition.rowIdx, row);\n        closeEditor();\n      } else {\n        setSelectedPosition((position) => ({ ...position, row }));\n      }\n    };\n\n    if (rows[selectedPosition.rowIdx] !== selectedPosition.originalRow) {\n      // Discard changes if rows are updated from outside\n      closeEditor();\n    }\n\n    return (\n      <EditCell\n        key={column.key}\n        column={column}\n        colSpan={colSpan}\n        row={row}\n        rowIdx={rowIdx}\n        skipCellFocusRef={skipCellFocusRef}\n        onRowChange={onRowChange}\n        closeEditor={closeEditor}\n        onKeyDown={onCellKeyDown}\n        navigate={navigate}\n      />\n    );\n  }\n\n  function getRowViewportColumns(rowIdx: number) {\n    const selectedColumn = columns[selectedPosition.idx];\n    if (\n      // idx can be -1 if grouping is enabled\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      selectedColumn !== undefined &&\n      selectedPosition.rowIdx === rowIdx &&\n      !viewportColumns.includes(selectedColumn)\n    ) {\n      // Add the selected column to viewport columns if the cell is not within the viewport\n      return selectedPosition.idx > colOverscanEndIdx\n        ? [...viewportColumns, selectedColumn]\n        : [\n            ...viewportColumns.slice(0, lastFrozenColumnIndex + 1),\n            selectedColumn,\n            ...viewportColumns.slice(lastFrozenColumnIndex + 1)\n          ];\n    }\n    return viewportColumns;\n  }\n\n  function getViewportRows() {\n    const rowElements: React.ReactNode[] = [];\n    let startRowIndex = 0;\n\n    const { idx: selectedIdx, rowIdx: selectedRowIdx } = selectedPosition;\n\n    const startRowIdx =\n      selectedCellIsWithinViewportBounds && selectedRowIdx < rowOverscanStartIdx\n        ? rowOverscanStartIdx - 1\n        : rowOverscanStartIdx;\n    const endRowIdx =\n      selectedCellIsWithinViewportBounds && selectedRowIdx > rowOverscanEndIdx\n        ? rowOverscanEndIdx + 1\n        : rowOverscanEndIdx;\n\n    for (let viewportRowIdx = startRowIdx; viewportRowIdx <= endRowIdx; viewportRowIdx++) {\n      const isRowOutsideViewport =\n        viewportRowIdx === rowOverscanStartIdx - 1 || viewportRowIdx === rowOverscanEndIdx + 1;\n      const rowIdx = isRowOutsideViewport ? selectedRowIdx : viewportRowIdx;\n\n      let rowColumns = viewportColumns;\n      const selectedColumn = columns[selectedIdx];\n      // selectedIdx can be -1 if grouping is enabled\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (selectedColumn !== undefined) {\n        if (isRowOutsideViewport) {\n          // if the row is outside the viewport then only render the selected cell\n          rowColumns = [selectedColumn];\n        } else {\n          // if the row is within the viewport and cell is not, add the selected column to viewport columns\n          rowColumns = getRowViewportColumns(rowIdx);\n        }\n      }\n\n      const row = rows[rowIdx];\n      const gridRowStart = headerAndTopSummaryRowsCount + rowIdx + 1;\n      if (isGroupRow(row)) {\n        ({ startRowIndex } = row);\n        const isGroupRowSelected =\n          isSelectable && row.childRows.every((cr) => selectedRows.has(rowKeyGetter!(cr)));\n        rowElements.push(\n          <GroupRowRenderer\n            aria-level={row.level + 1} // aria-level is 1-based\n            aria-setsize={row.setSize}\n            aria-posinset={row.posInSet + 1} // aria-posinset is 1-based\n            aria-rowindex={headerAndTopSummaryRowsCount + startRowIndex + 1} // aria-rowindex is 1 based\n            aria-selected={isSelectable ? isGroupRowSelected : undefined}\n            key={row.id}\n            id={row.id}\n            groupKey={row.groupKey}\n            viewportColumns={rowColumns}\n            childRows={row.childRows}\n            rowIdx={rowIdx}\n            row={row}\n            gridRowStart={gridRowStart}\n            height={getRowHeight(rowIdx)}\n            level={row.level}\n            isExpanded={row.isExpanded}\n            selectedCellIdx={selectedRowIdx === rowIdx ? selectedIdx : undefined}\n            isRowSelected={isGroupRowSelected}\n            selectGroup={selectGroupLatest}\n            toggleGroup={toggleGroupLatest}\n          />\n        );\n        continue;\n      }\n\n      startRowIndex++;\n      let key;\n      let isRowSelected = false;\n      if (typeof rowKeyGetter === 'function') {\n        key = rowKeyGetter(row);\n        isRowSelected = selectedRows?.has(key) ?? false;\n      } else {\n        key = hasGroups ? startRowIndex : rowIdx;\n      }\n\n      rowElements.push(\n        rowRenderer(key, {\n          // aria-rowindex is 1 based\n          'aria-rowindex': headerAndTopSummaryRowsCount + (hasGroups ? startRowIndex : rowIdx) + 1,\n          'aria-selected': isSelectable ? isRowSelected : undefined,\n          rowIdx,\n          row,\n          viewportColumns: rowColumns,\n          isRowSelected,\n          onCellClick: onCellClickLatest,\n          onCellDoubleClick: onCellDoubleClickLatest,\n          onCellContextMenu: onCellContextMenuLatest,\n          rowClass,\n          gridRowStart,\n          height: getRowHeight(rowIdx),\n          copiedCellIdx:\n            copiedCell !== null && copiedCell.row === row\n              ? columns.findIndex((c) => c.key === copiedCell.columnKey)\n              : undefined,\n\n          selectedCellIdx: selectedRowIdx === rowIdx ? selectedIdx : undefined,\n          draggedOverCellIdx: getDraggedOverCellIdx(rowIdx),\n          setDraggedOverRowIdx: isDragging ? setDraggedOverRowIdx : undefined,\n          lastFrozenColumnIndex,\n          onRowChange: handleFormatterRowChangeLatest,\n          selectCell: selectViewportCellLatest,\n          selectedCellDragHandle: getDragHandle(rowIdx),\n          selectedCellEditor: getCellEditor(rowIdx),\n          skipCellFocusRef\n        })\n      );\n    }\n\n    return rowElements;\n  }\n\n  // Reset the positions if the current values are no longer valid. This can happen if a column or row is removed\n  if (selectedPosition.idx > maxColIdx || selectedPosition.rowIdx > maxRowIdx) {\n    setSelectedPosition({ idx: -1, rowIdx: minRowIdx - 1, mode: 'SELECT' });\n    setDraggedOverRowIdx(undefined);\n  }\n\n  let templateRows = `${headerRowHeight}px`;\n  if (topSummaryRowsCount > 0) {\n    templateRows += ` repeat(${topSummaryRowsCount}, ${summaryRowHeight}px)`;\n  }\n  if (rows.length > 0) {\n    templateRows += gridTemplateRows;\n  }\n  if (bottomSummaryRowsCount > 0) {\n    templateRows += ` repeat(${bottomSummaryRowsCount}, ${summaryRowHeight}px)`;\n  }\n\n  const isGroupRowFocused =\n    selectedPosition.idx === -1 && selectedPosition.rowIdx !== minRowIdx - 1;\n\n  return (\n    <div\n      role={hasGroups ? 'treegrid' : 'grid'}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledBy}\n      aria-describedby={ariaDescribedBy}\n      aria-multiselectable={isSelectable ? true : undefined}\n      aria-colcount={columns.length}\n      aria-rowcount={headerRowsCount + rowsCount + summaryRowsCount}\n      className={clsx(\n        rootClassname,\n        {\n          [viewportDraggingClassname]: isDragging\n        },\n        className\n      )}\n      style={\n        {\n          ...style,\n          // set scrollPadding to correctly position non-sticky cells after scrolling\n          scrollPaddingInlineStart:\n            selectedPosition.idx > lastFrozenColumnIndex\n              ? `${totalFrozenColumnWidth}px`\n              : undefined,\n          scrollPaddingBlock:\n            selectedPosition.rowIdx >= 0 && selectedPosition.rowIdx < rows.length\n              ? `${headerRowHeight + topSummaryRowsCount * summaryRowHeight}px ${\n                  bottomSummaryRowsCount * summaryRowHeight\n                }px`\n              : undefined,\n          gridTemplateRows: templateRows,\n          '--rdg-header-row-height': `${headerRowHeight}px`,\n          '--rdg-summary-row-height': `${summaryRowHeight}px`,\n          '--rdg-sign': isRtl ? -1 : 1,\n          ...getLayoutCssVars()\n        } as unknown as React.CSSProperties\n      }\n      dir={direction}\n      ref={gridRef}\n      onScroll={handleScroll}\n      onKeyDown={handleKeyDown}\n      data-testid={testId}\n    >\n      {/* extra div is needed for row navigation in a treegrid */}\n      {hasGroups && (\n        <div\n          ref={rowRef}\n          tabIndex={isGroupRowFocused ? 0 : -1}\n          className={clsx(focusSinkClassname, {\n            [rowSelected]: isGroupRowFocused,\n            [rowSelectedWithFrozenCell]: isGroupRowFocused && lastFrozenColumnIndex !== -1\n          })}\n          style={{\n            gridRowStart: selectedPosition.rowIdx + headerAndTopSummaryRowsCount + 1\n          }}\n          onKeyDown={handleKeyDown}\n        />\n      )}\n      <DataGridDefaultRenderersProvider value={defaultGridComponents}>\n        <RowSelectionChangeProvider value={selectRowLatest}>\n          <RowSelectionProvider value={allRowsSelected}>\n            <HeaderRow\n              columns={getRowViewportColumns(-1)}\n              onColumnResize={handleColumnResizeLatest}\n              sortColumns={sortColumns}\n              onSortColumnsChange={onSortColumnsChangeLatest}\n              lastFrozenColumnIndex={lastFrozenColumnIndex}\n              selectedCellIdx={\n                selectedPosition.rowIdx === minRowIdx ? selectedPosition.idx : undefined\n              }\n              selectCell={selectHeaderCellLatest}\n              shouldFocusGrid={!selectedCellIsWithinSelectionBounds}\n              direction={direction}\n            />\n          </RowSelectionProvider>\n        </RowSelectionChangeProvider>\n        {rows.length === 0 && noRowsFallback ? (\n          noRowsFallback\n        ) : (\n          <>\n            {topSummaryRows?.map((row, rowIdx) => {\n              const gridRowStart = headerRowsCount + rowIdx + 1;\n              const summaryRowIdx = rowIdx + minRowIdx + 1;\n              const isSummaryRowSelected = selectedPosition.rowIdx === summaryRowIdx;\n              const top = headerRowHeight + summaryRowHeight * rowIdx;\n\n              return (\n                <SummaryRow\n                  aria-rowindex={gridRowStart}\n                  key={rowIdx}\n                  rowIdx={rowIdx}\n                  gridRowStart={gridRowStart}\n                  row={row}\n                  top={top}\n                  bottom={undefined}\n                  lastTopRowIdx={topSummaryRowsCount - 1}\n                  viewportColumns={getRowViewportColumns(summaryRowIdx)}\n                  lastFrozenColumnIndex={lastFrozenColumnIndex}\n                  selectedCellIdx={isSummaryRowSelected ? selectedPosition.idx : undefined}\n                  selectCell={selectTopSummaryCellLatest}\n                />\n              );\n            })}\n            <RowSelectionChangeProvider value={selectRowLatest}>\n              {getViewportRows()}\n            </RowSelectionChangeProvider>\n            {bottomSummaryRows?.map((row, rowIdx) => {\n              const gridRowStart = headerAndTopSummaryRowsCount + rows.length + rowIdx + 1;\n              const summaryRowIdx = rows.length + rowIdx;\n              const isSummaryRowSelected = selectedPosition.rowIdx === summaryRowIdx;\n              const top =\n                clientHeight > totalRowHeight\n                  ? gridHeight - summaryRowHeight * (bottomSummaryRows.length - rowIdx)\n                  : undefined;\n              const bottom =\n                top === undefined\n                  ? summaryRowHeight * (bottomSummaryRows.length - 1 - rowIdx)\n                  : undefined;\n\n              return (\n                <SummaryRow\n                  aria-rowindex={headerAndTopSummaryRowsCount + rowsCount + rowIdx + 1}\n                  key={rowIdx}\n                  rowIdx={rowIdx}\n                  gridRowStart={gridRowStart}\n                  row={row}\n                  top={top}\n                  bottom={bottom}\n                  lastTopRowIdx={undefined}\n                  viewportColumns={getRowViewportColumns(summaryRowIdx)}\n                  lastFrozenColumnIndex={lastFrozenColumnIndex}\n                  selectedCellIdx={isSummaryRowSelected ? selectedPosition.idx : undefined}\n                  selectCell={selectBottomSummaryCellLatest}\n                />\n              );\n            })}\n          </>\n        )}\n\n        {/* render empty cells that span only 1 column so we can safely measure column widths, regardless of colSpan */}\n        {renderMeasuringCells(viewportColumns)}\n      </DataGridDefaultRenderersProvider>\n    </div>\n  );\n}\n\nfunction isSamePosition(p1: Position, p2: Position) {\n  return p1.idx === p2.idx && p1.rowIdx === p2.rowIdx;\n}\n\nexport default forwardRef(DataGrid) as <R, SR = unknown, K extends Key = Key>(\n  props: DataGridProps<R, SR, K> & RefAttributes<DataGridHandle>\n) => JSX.Element;\n","import { useRef, useState } from 'react';\nimport { useLayoutEffect } from './useLayoutEffect';\n\nexport function useGridDimensions(): [\n  ref: React.RefObject<HTMLDivElement>,\n  width: number,\n  height: number,\n  isWidthInitialized: boolean\n] {\n  const gridRef = useRef<HTMLDivElement>(null);\n  const [inlineSize, setInlineSize] = useState(1);\n  const [blockSize, setBlockSize] = useState(1);\n  const [isWidthInitialized, setWidthInitialized] = useState(false);\n\n  useLayoutEffect(() => {\n    const { ResizeObserver } = window;\n\n    // don't break in Node.js (SSR), jest/jsdom, and browsers that don't support ResizeObserver\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (ResizeObserver == null) return;\n\n    const { clientWidth, clientHeight, offsetWidth, offsetHeight } = gridRef.current!;\n    const { width, height } = gridRef.current!.getBoundingClientRect();\n    const initialWidth = width - offsetWidth + clientWidth;\n    const initialHeight = height - offsetHeight + clientHeight;\n\n    setInlineSize(initialWidth);\n    setBlockSize(initialHeight);\n    setWidthInitialized(true);\n\n    const resizeObserver = new ResizeObserver((entries) => {\n      const size = entries[0].contentBoxSize[0];\n      setInlineSize(size.inlineSize);\n      setBlockSize(size.blockSize);\n    });\n    resizeObserver.observe(gridRef.current!);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, []);\n\n  return [gridRef, inlineSize, blockSize, isWidthInitialized];\n}\n","import { useMemo } from 'react';\n\nimport type { CalculatedColumn, Column, Maybe } from '../types';\nimport type { DataGridProps } from '../DataGrid';\nimport { valueFormatter, toggleGroupFormatter } from '../formatters';\nimport { SELECT_COLUMN_KEY } from '../Columns';\nimport { clampColumnWidth, max, min } from '../utils';\n\ntype Mutable<T> = {\n  -readonly [P in keyof T]: T[P];\n};\n\ninterface ColumnMetric {\n  width: number;\n  left: number;\n}\n\nconst DEFAULT_COLUMN_WIDTH = 'auto';\nconst DEFAULT_COLUMN_MIN_WIDTH = 80;\n\ninterface CalculatedColumnsArgs<R, SR> extends Pick<DataGridProps<R, SR>, 'defaultColumnOptions'> {\n  rawColumns: readonly Column<R, SR>[];\n  rawGroupBy: Maybe<readonly string[]>;\n  viewportWidth: number;\n  scrollLeft: number;\n  columnWidths: ReadonlyMap<string, number>;\n  enableVirtualization: boolean;\n}\n\nexport function useCalculatedColumns<R, SR>({\n  rawColumns,\n  columnWidths,\n  viewportWidth,\n  scrollLeft,\n  defaultColumnOptions,\n  rawGroupBy,\n  enableVirtualization\n}: CalculatedColumnsArgs<R, SR>) {\n  const defaultWidth = defaultColumnOptions?.width ?? DEFAULT_COLUMN_WIDTH;\n  const defaultMinWidth = defaultColumnOptions?.minWidth ?? DEFAULT_COLUMN_MIN_WIDTH;\n  const defaultMaxWidth = defaultColumnOptions?.maxWidth ?? undefined;\n  const defaultFormatter = defaultColumnOptions?.formatter ?? valueFormatter;\n  const defaultSortable = defaultColumnOptions?.sortable ?? false;\n  const defaultResizable = defaultColumnOptions?.resizable ?? false;\n\n  const { columns, colSpanColumns, lastFrozenColumnIndex, groupBy } = useMemo((): {\n    columns: readonly CalculatedColumn<R, SR>[];\n    colSpanColumns: readonly CalculatedColumn<R, SR>[];\n    lastFrozenColumnIndex: number;\n    groupBy: readonly string[];\n  } => {\n    // Filter rawGroupBy and ignore keys that do not match the columns prop\n    const groupBy: string[] = [];\n    let lastFrozenColumnIndex = -1;\n\n    const columns = rawColumns.map((rawColumn) => {\n      const rowGroup = rawGroupBy?.includes(rawColumn.key) ?? false;\n      // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n      const frozen = rowGroup || rawColumn.frozen || false;\n\n      const column: Mutable<CalculatedColumn<R, SR>> = {\n        ...rawColumn,\n        idx: 0,\n        frozen,\n        isLastFrozenColumn: false,\n        rowGroup,\n        width: rawColumn.width ?? defaultWidth,\n        minWidth: rawColumn.minWidth ?? defaultMinWidth,\n        maxWidth: rawColumn.maxWidth ?? defaultMaxWidth,\n        sortable: rawColumn.sortable ?? defaultSortable,\n        resizable: rawColumn.resizable ?? defaultResizable,\n        formatter: rawColumn.formatter ?? defaultFormatter\n      };\n\n      if (rowGroup) {\n        column.groupFormatter ??= toggleGroupFormatter;\n      }\n\n      if (frozen) {\n        lastFrozenColumnIndex++;\n      }\n\n      return column;\n    });\n\n    columns.sort(({ key: aKey, frozen: frozenA }, { key: bKey, frozen: frozenB }) => {\n      // Sort select column first:\n      if (aKey === SELECT_COLUMN_KEY) return -1;\n      if (bKey === SELECT_COLUMN_KEY) return 1;\n\n      // Sort grouped columns second, following the groupBy order:\n      if (rawGroupBy?.includes(aKey)) {\n        if (rawGroupBy.includes(bKey)) {\n          return rawGroupBy.indexOf(aKey) - rawGroupBy.indexOf(bKey);\n        }\n        return -1;\n      }\n      if (rawGroupBy?.includes(bKey)) return 1;\n\n      // Sort frozen columns third:\n      if (frozenA) {\n        if (frozenB) return 0;\n        return -1;\n      }\n      if (frozenB) return 1;\n\n      // Sort other columns last:\n      return 0;\n    });\n\n    const colSpanColumns: CalculatedColumn<R, SR>[] = [];\n    columns.forEach((column, idx) => {\n      column.idx = idx;\n\n      if (column.rowGroup) {\n        groupBy.push(column.key);\n      }\n\n      if (column.colSpan != null) {\n        colSpanColumns.push(column);\n      }\n    });\n\n    if (lastFrozenColumnIndex !== -1) {\n      columns[lastFrozenColumnIndex].isLastFrozenColumn = true;\n    }\n\n    return {\n      columns,\n      colSpanColumns,\n      lastFrozenColumnIndex,\n      groupBy\n    };\n  }, [\n    rawColumns,\n    defaultWidth,\n    defaultMinWidth,\n    defaultMaxWidth,\n    defaultFormatter,\n    defaultResizable,\n    defaultSortable,\n    rawGroupBy\n  ]);\n\n  const { templateColumns, layoutCssVars, totalFrozenColumnWidth, columnMetrics } = useMemo((): {\n    templateColumns: readonly string[];\n    layoutCssVars: Readonly<Record<string, string>>;\n    totalFrozenColumnWidth: number;\n    columnMetrics: ReadonlyMap<CalculatedColumn<R, SR>, ColumnMetric>;\n  } => {\n    const columnMetrics = new Map<CalculatedColumn<R, SR>, ColumnMetric>();\n    let left = 0;\n    let totalFrozenColumnWidth = 0;\n    const templateColumns: string[] = [];\n\n    for (const column of columns) {\n      let width = columnWidths.get(column.key) ?? column.width;\n      if (typeof width === 'number') {\n        width = clampColumnWidth(width, column);\n      } else {\n        // This is a placeholder width so we can continue to use virtualization.\n        // The actual value is set after the column is rendered\n        width = column.minWidth;\n      }\n      templateColumns.push(`${width}px`);\n      columnMetrics.set(column, { width, left });\n      left += width;\n    }\n\n    if (lastFrozenColumnIndex !== -1) {\n      const columnMetric = columnMetrics.get(columns[lastFrozenColumnIndex])!;\n      totalFrozenColumnWidth = columnMetric.left + columnMetric.width;\n    }\n\n    const layoutCssVars: Record<string, string> = {\n      gridTemplateColumns: templateColumns.join(' ')\n    };\n\n    for (let i = 0; i <= lastFrozenColumnIndex; i++) {\n      const column = columns[i];\n      layoutCssVars[`--rdg-frozen-left-${column.idx}`] = `${columnMetrics.get(column)!.left}px`;\n    }\n\n    return { templateColumns, layoutCssVars, totalFrozenColumnWidth, columnMetrics };\n  }, [columnWidths, columns, lastFrozenColumnIndex]);\n\n  const [colOverscanStartIdx, colOverscanEndIdx] = useMemo((): [number, number] => {\n    if (!enableVirtualization) {\n      return [0, columns.length - 1];\n    }\n    // get the viewport's left side and right side positions for non-frozen columns\n    const viewportLeft = scrollLeft + totalFrozenColumnWidth;\n    const viewportRight = scrollLeft + viewportWidth;\n    // get first and last non-frozen column indexes\n    const lastColIdx = columns.length - 1;\n    const firstUnfrozenColumnIdx = min(lastFrozenColumnIndex + 1, lastColIdx);\n\n    // skip rendering non-frozen columns if the frozen columns cover the entire viewport\n    if (viewportLeft >= viewportRight) {\n      return [firstUnfrozenColumnIdx, firstUnfrozenColumnIdx];\n    }\n\n    // get the first visible non-frozen column index\n    let colVisibleStartIdx = firstUnfrozenColumnIdx;\n    while (colVisibleStartIdx < lastColIdx) {\n      const { left, width } = columnMetrics.get(columns[colVisibleStartIdx])!;\n      // if the right side of the columnn is beyond the left side of the available viewport,\n      // then it is the first column that's at least partially visible\n      if (left + width > viewportLeft) {\n        break;\n      }\n      colVisibleStartIdx++;\n    }\n\n    // get the last visible non-frozen column index\n    let colVisibleEndIdx = colVisibleStartIdx;\n    while (colVisibleEndIdx < lastColIdx) {\n      const { left, width } = columnMetrics.get(columns[colVisibleEndIdx])!;\n      // if the right side of the column is beyond or equal to the right side of the available viewport,\n      // then it the last column that's at least partially visible, as the previous column's right side is not beyond the viewport.\n      if (left + width >= viewportRight) {\n        break;\n      }\n      colVisibleEndIdx++;\n    }\n\n    const colOverscanStartIdx = max(firstUnfrozenColumnIdx, colVisibleStartIdx - 1);\n    const colOverscanEndIdx = min(lastColIdx, colVisibleEndIdx + 1);\n\n    return [colOverscanStartIdx, colOverscanEndIdx];\n  }, [\n    columnMetrics,\n    columns,\n    lastFrozenColumnIndex,\n    scrollLeft,\n    totalFrozenColumnWidth,\n    viewportWidth,\n    enableVirtualization\n  ]);\n\n  return {\n    columns,\n    colSpanColumns,\n    colOverscanStartIdx,\n    colOverscanEndIdx,\n    templateColumns,\n    layoutCssVars,\n    columnMetrics,\n    lastFrozenColumnIndex,\n    totalFrozenColumnWidth,\n    groupBy\n  };\n}\n","import { useMemo } from 'react';\nimport { floor, max, min } from '../utils';\nimport type { GroupRow, Maybe, RowHeightArgs } from '../types';\n\ntype GroupByDictionary<TRow> = Record<\n  string,\n  {\n    readonly childRows: readonly TRow[];\n    readonly childGroups: readonly TRow[] | Readonly<GroupByDictionary<TRow>>;\n    readonly startRowIndex: number;\n  }\n>;\n\ninterface ViewportRowsArgs<R> {\n  rawRows: readonly R[];\n  rowHeight: number | ((args: RowHeightArgs<R>) => number);\n  clientHeight: number;\n  scrollTop: number;\n  groupBy: readonly string[];\n  rowGrouper: Maybe<(rows: readonly R[], columnKey: string) => Record<string, readonly R[]>>;\n  expandedGroupIds: Maybe<ReadonlySet<unknown>>;\n  enableVirtualization: boolean;\n}\n\n// TODO: https://github.com/microsoft/TypeScript/issues/41808\nfunction isReadonlyArray(arr: unknown): arr is readonly unknown[] {\n  return Array.isArray(arr);\n}\n\nexport function useViewportRows<R>({\n  rawRows,\n  rowHeight,\n  clientHeight,\n  scrollTop,\n  groupBy,\n  rowGrouper,\n  expandedGroupIds,\n  enableVirtualization\n}: ViewportRowsArgs<R>) {\n  const [groupedRows, rowsCount] = useMemo(() => {\n    if (groupBy.length === 0 || rowGrouper == null) return [undefined, rawRows.length];\n\n    const groupRows = (\n      rows: readonly R[],\n      [groupByKey, ...remainingGroupByKeys]: readonly string[],\n      startRowIndex: number\n    ): [Readonly<GroupByDictionary<R>>, number] => {\n      let groupRowsCount = 0;\n      const groups: GroupByDictionary<R> = {};\n      for (const [key, childRows] of Object.entries(rowGrouper(rows, groupByKey))) {\n        // Recursively group each parent group\n        const [childGroups, childRowsCount] =\n          remainingGroupByKeys.length === 0\n            ? [childRows, childRows.length]\n            : groupRows(childRows, remainingGroupByKeys, startRowIndex + groupRowsCount + 1); // 1 for parent row\n        groups[key] = { childRows, childGroups, startRowIndex: startRowIndex + groupRowsCount };\n        groupRowsCount += childRowsCount + 1; // 1 for parent row\n      }\n\n      return [groups, groupRowsCount];\n    };\n\n    return groupRows(rawRows, groupBy, 0);\n  }, [groupBy, rowGrouper, rawRows]);\n\n  const [rows, isGroupRow] = useMemo((): [\n    ReadonlyArray<R | GroupRow<R>>,\n    (row: R | GroupRow<R>) => row is GroupRow<R>\n  ] => {\n    const allGroupRows = new Set<unknown>();\n    if (!groupedRows) return [rawRows, isGroupRow];\n\n    const flattenedRows: Array<R | GroupRow<R>> = [];\n    const expandGroup = (\n      rows: GroupByDictionary<R> | readonly R[],\n      parentId: string | undefined,\n      level: number\n    ): void => {\n      if (isReadonlyArray(rows)) {\n        flattenedRows.push(...rows);\n        return;\n      }\n      Object.keys(rows).forEach((groupKey, posInSet, keys) => {\n        // TODO: should users have control over the generated key?\n        const id = parentId !== undefined ? `${parentId}__${groupKey}` : groupKey;\n        const isExpanded = expandedGroupIds?.has(id) ?? false;\n        const { childRows, childGroups, startRowIndex } = rows[groupKey];\n\n        const groupRow: GroupRow<R> = {\n          id,\n          parentId,\n          groupKey,\n          isExpanded,\n          childRows,\n          level,\n          posInSet,\n          startRowIndex,\n          setSize: keys.length\n        };\n        flattenedRows.push(groupRow);\n        allGroupRows.add(groupRow);\n\n        if (isExpanded) {\n          expandGroup(childGroups, id, level + 1);\n        }\n      });\n    };\n\n    expandGroup(groupedRows, undefined, 0);\n    return [flattenedRows, isGroupRow];\n\n    function isGroupRow(row: R | GroupRow<R>): row is GroupRow<R> {\n      return allGroupRows.has(row);\n    }\n  }, [expandedGroupIds, groupedRows, rawRows]);\n\n  const { totalRowHeight, gridTemplateRows, getRowTop, getRowHeight, findRowIdx } = useMemo(() => {\n    if (typeof rowHeight === 'number') {\n      return {\n        totalRowHeight: rowHeight * rows.length,\n        gridTemplateRows: ` repeat(${rows.length}, ${rowHeight}px)`,\n        getRowTop: (rowIdx: number) => rowIdx * rowHeight,\n        getRowHeight: () => rowHeight,\n        findRowIdx: (offset: number) => floor(offset / rowHeight)\n      };\n    }\n\n    let totalRowHeight = 0;\n    let gridTemplateRows = ' ';\n    // Calcule the height of all the rows upfront. This can cause performance issues\n    // and we can consider using a similar approach as react-window\n    // https://github.com/bvaughn/react-window/blob/b0a470cc264e9100afcaa1b78ed59d88f7914ad4/src/VariableSizeList.js#L68\n    const rowPositions = rows.map((row: R | GroupRow<R>) => {\n      const currentRowHeight = isGroupRow(row)\n        ? rowHeight({ type: 'GROUP', row })\n        : rowHeight({ type: 'ROW', row });\n      const position = { top: totalRowHeight, height: currentRowHeight };\n      gridTemplateRows += `${currentRowHeight}px `;\n      totalRowHeight += currentRowHeight;\n      return position;\n    });\n\n    const validateRowIdx = (rowIdx: number) => {\n      return max(0, min(rows.length - 1, rowIdx));\n    };\n\n    return {\n      totalRowHeight,\n      gridTemplateRows,\n      getRowTop: (rowIdx: number) => rowPositions[validateRowIdx(rowIdx)].top,\n      getRowHeight: (rowIdx: number) => rowPositions[validateRowIdx(rowIdx)].height,\n      findRowIdx(offset: number) {\n        let start = 0;\n        let end = rowPositions.length - 1;\n        while (start <= end) {\n          const middle = start + floor((end - start) / 2);\n          const currentOffset = rowPositions[middle].top;\n\n          if (currentOffset === offset) return middle;\n\n          if (currentOffset < offset) {\n            start = middle + 1;\n          } else if (currentOffset > offset) {\n            end = middle - 1;\n          }\n\n          if (start > end) return end;\n        }\n        return 0;\n      }\n    };\n  }, [isGroupRow, rowHeight, rows]);\n\n  let rowOverscanStartIdx = 0;\n  let rowOverscanEndIdx = rows.length - 1;\n\n  if (enableVirtualization) {\n    const overscanThreshold = 4;\n    const rowVisibleStartIdx = findRowIdx(scrollTop);\n    const rowVisibleEndIdx = findRowIdx(scrollTop + clientHeight);\n    rowOverscanStartIdx = max(0, rowVisibleStartIdx - overscanThreshold);\n    rowOverscanEndIdx = min(rows.length - 1, rowVisibleEndIdx + overscanThreshold);\n  }\n\n  return {\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    rowsCount,\n    totalRowHeight,\n    gridTemplateRows,\n    isGroupRow,\n    getRowTop,\n    getRowHeight,\n    findRowIdx\n  };\n}\n","import { useMemo } from 'react';\n\nimport { getColSpan } from '../utils';\nimport type { CalculatedColumn, GroupRow, Maybe } from '../types';\n\ninterface ViewportColumnsArgs<R, SR> {\n  columns: readonly CalculatedColumn<R, SR>[];\n  colSpanColumns: readonly CalculatedColumn<R, SR>[];\n  rows: readonly (R | GroupRow<R>)[];\n  topSummaryRows: Maybe<readonly SR[]>;\n  bottomSummaryRows: Maybe<readonly SR[]>;\n  colOverscanStartIdx: number;\n  colOverscanEndIdx: number;\n  lastFrozenColumnIndex: number;\n  rowOverscanStartIdx: number;\n  rowOverscanEndIdx: number;\n  columnWidths: ReadonlyMap<string, number>;\n  isGroupRow: (row: R | GroupRow<R>) => row is GroupRow<R>;\n}\n\nexport function useViewportColumns<R, SR>({\n  columns,\n  colSpanColumns,\n  rows,\n  topSummaryRows,\n  bottomSummaryRows,\n  colOverscanStartIdx,\n  colOverscanEndIdx,\n  lastFrozenColumnIndex,\n  rowOverscanStartIdx,\n  rowOverscanEndIdx,\n  columnWidths,\n  isGroupRow\n}: ViewportColumnsArgs<R, SR>) {\n  // find the column that spans over a column within the visible columns range and adjust colOverscanStartIdx\n  const startIdx = useMemo(() => {\n    if (colOverscanStartIdx === 0) return 0;\n\n    let startIdx = colOverscanStartIdx;\n\n    const updateStartIdx = (colIdx: number, colSpan: number | undefined) => {\n      if (colSpan !== undefined && colIdx + colSpan > colOverscanStartIdx) {\n        startIdx = colIdx;\n        return true;\n      }\n      return false;\n    };\n\n    for (const column of colSpanColumns) {\n      // check header row\n      const colIdx = column.idx;\n      if (colIdx >= startIdx) break;\n      if (updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, { type: 'HEADER' }))) {\n        break;\n      }\n\n      // check viewport rows\n      for (let rowIdx = rowOverscanStartIdx; rowIdx <= rowOverscanEndIdx; rowIdx++) {\n        const row = rows[rowIdx];\n        if (isGroupRow(row)) continue;\n        if (\n          updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, { type: 'ROW', row }))\n        ) {\n          break;\n        }\n      }\n\n      // check summary rows\n      if (topSummaryRows != null) {\n        for (const row of topSummaryRows) {\n          if (\n            updateStartIdx(\n              colIdx,\n              getColSpan(column, lastFrozenColumnIndex, { type: 'SUMMARY', row })\n            )\n          ) {\n            break;\n          }\n        }\n      }\n\n      if (bottomSummaryRows != null) {\n        for (const row of bottomSummaryRows) {\n          if (\n            updateStartIdx(\n              colIdx,\n              getColSpan(column, lastFrozenColumnIndex, { type: 'SUMMARY', row })\n            )\n          ) {\n            break;\n          }\n        }\n      }\n    }\n\n    return startIdx;\n  }, [\n    rowOverscanStartIdx,\n    rowOverscanEndIdx,\n    rows,\n    topSummaryRows,\n    bottomSummaryRows,\n    colOverscanStartIdx,\n    lastFrozenColumnIndex,\n    colSpanColumns,\n    isGroupRow\n  ]);\n\n  const { viewportColumns, flexWidthViewportColumns } = useMemo((): {\n    viewportColumns: readonly CalculatedColumn<R, SR>[];\n    flexWidthViewportColumns: readonly CalculatedColumn<R, SR>[];\n  } => {\n    const viewportColumns: CalculatedColumn<R, SR>[] = [];\n    const flexWidthViewportColumns: CalculatedColumn<R, SR>[] = [];\n    for (let colIdx = 0; colIdx <= colOverscanEndIdx; colIdx++) {\n      const column = columns[colIdx];\n\n      if (colIdx < startIdx && !column.frozen) continue;\n      viewportColumns.push(column);\n      if (typeof column.width === 'string') {\n        flexWidthViewportColumns.push(column);\n      }\n    }\n\n    return { viewportColumns, flexWidthViewportColumns };\n  }, [startIdx, colOverscanEndIdx, columns]);\n\n  const unsizedFlexWidthViewportColumns = useMemo((): readonly CalculatedColumn<R, SR>[] => {\n    return flexWidthViewportColumns.filter((column) => !columnWidths.has(column.key));\n  }, [flexWidthViewportColumns, columnWidths]);\n\n  return {\n    viewportColumns,\n    flexWidthViewportColumns: unsizedFlexWidthViewportColumns\n  };\n}\n","import { css } from '@linaria/core';\nimport { row } from './row';\n\nconst lightTheme = `\n  --rdg-color: #000;\n  --rdg-border-color: #ddd;\n  --rdg-summary-border-color: #aaa;\n  --rdg-background-color: hsl(0deg 0% 100%);\n  --rdg-header-background-color: hsl(0deg 0% 97.5%);\n  --rdg-row-hover-background-color: hsl(0deg 0% 96%);\n  --rdg-row-selected-background-color: hsl(207deg 76% 92%);\n  --rdg-row-selected-hover-background-color: hsl(207deg 76% 88%);\n\n  --rdg-checkbox-color: hsl(207deg 100% 29%);\n  --rdg-checkbox-focus-color: hsl(207deg 100% 69%);\n  --rdg-checkbox-disabled-border-color: #ccc;\n  --rdg-checkbox-disabled-background-color: #ddd;\n`;\n\nconst darkTheme = `\n  --rdg-color: #ddd;\n  --rdg-border-color: #444;\n  --rdg-summary-border-color: #555;\n  --rdg-background-color: hsl(0deg 0% 13%);\n  --rdg-header-background-color: hsl(0deg 0% 10.5%);\n  --rdg-row-hover-background-color: hsl(0deg 0% 9%);\n  --rdg-row-selected-background-color: hsl(207deg 76% 42%);\n  --rdg-row-selected-hover-background-color: hsl(207deg 76% 38%);\n\n  --rdg-checkbox-color: hsl(207deg 100% 79%);\n  --rdg-checkbox-focus-color: hsl(207deg 100% 89%);\n  --rdg-checkbox-disabled-border-color: #000;\n  --rdg-checkbox-disabled-background-color: #333;\n`;\n\nconst root = css`\n  @layer rdg {\n    @layer Defaults,\n      FocusSink,\n      CheckboxInput,\n      CheckboxIcon,\n      CheckboxLabel,\n      Cell,\n      HeaderCell,\n      SummaryCell,\n      EditCell,\n      Row,\n      HeaderRow,\n      SummaryRow,\n      GroupedRow,\n      Root;\n\n    @layer Defaults {\n      *,\n      *::before,\n      *::after {\n        box-sizing: inherit;\n      }\n    }\n\n    @layer Root {\n      ${lightTheme}\n      --rdg-selection-color: #66afe9;\n      --rdg-font-size: 14px;\n\n      display: grid;\n\n      color-scheme: var(--rdg-color-scheme, light dark);\n\n      /* https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */\n      /* We set a stacking context so internal elements don't render on top of external elements. */\n      contain: strict;\n      content-visibility: auto;\n      block-size: 350px;\n      border: 1px solid var(--rdg-border-color);\n      box-sizing: border-box;\n      overflow: auto;\n      background-color: var(--rdg-background-color);\n      color: var(--rdg-color);\n      font-size: var(--rdg-font-size);\n\n      /* needed on Firefox */\n      &::before {\n        content: '';\n        grid-column: 1/-1;\n        grid-row: 1/-1;\n      }\n\n      &.rdg-dark {\n        --rdg-color-scheme: dark;\n        ${darkTheme}\n      }\n\n      &.rdg-light {\n        --rdg-color-scheme: light;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        &:not(.rdg-light) {\n          ${darkTheme}\n        }\n      }\n    }\n  }\n`;\n\nexport const rootClassname = `rdg ${root}`;\n\nconst viewportDragging = css`\n  @layer rdg.Root {\n    user-select: none;\n\n    & .${row} {\n      cursor: move;\n    }\n  }\n`;\n\nexport const viewportDraggingClassname = `rdg-viewport-dragging ${viewportDragging}`;\n\nexport const focusSinkClassname = css`\n  @layer rdg.FocusSink {\n    grid-column: 1/-1;\n    pointer-events: none;\n    /* Should have a higher value than 2 to show up above header row */\n    z-index: 3;\n  }\n`;\n","import { cloneElement } from 'react';\nimport type { ReactElement } from 'react';\n\nimport type { DataGridProps } from '../../src';\n\nexport async function exportToCsv<R, SR>(\n  gridElement: ReactElement<DataGridProps<R, SR>>,\n  fileName: string\n) {\n  const { head, body, foot } = await getGridContent(gridElement);\n  const content = [...head, ...body, ...foot]\n    .map((cells) => cells.map(serialiseCellValue).join(','))\n    .join('\\n');\n\n  downloadFile(fileName, new Blob([content], { type: 'text/csv;charset=utf-8;' }));\n}\n\nexport async function exportToXlsx<R, SR>(\n  gridElement: ReactElement<DataGridProps<R, SR>>,\n  fileName: string\n) {\n  const [{ utils, writeFile }, { head, body, foot }] = await Promise.all([\n    import('xlsx'),\n    getGridContent(gridElement)\n  ]);\n  const wb = utils.book_new();\n  const ws = utils.aoa_to_sheet([...head, ...body, ...foot]);\n  utils.book_append_sheet(wb, ws, 'Sheet 1');\n  writeFile(wb, fileName);\n}\n\nexport async function exportToPdf<R, SR>(\n  gridElement: ReactElement<DataGridProps<R, SR>>,\n  fileName: string\n) {\n  const [{ jsPDF }, autoTable, { head, body, foot }] = await Promise.all([\n    import('jspdf'),\n    (await import('jspdf-autotable')).default,\n    await getGridContent(gridElement)\n  ]);\n  const doc = new jsPDF({\n    orientation: 'l',\n    unit: 'px'\n  });\n\n  autoTable(doc, {\n    head,\n    body,\n    foot,\n    horizontalPageBreak: true,\n    styles: { cellPadding: 1.5, fontSize: 8, cellWidth: 'wrap' },\n    tableWidth: 'wrap'\n  });\n  doc.save(fileName);\n}\n\nasync function getGridContent<R, SR>(gridElement: ReactElement<DataGridProps<R, SR>>) {\n  const { renderToStaticMarkup } = await import('react-dom/server');\n  const grid = document.createElement('div');\n  grid.innerHTML = renderToStaticMarkup(\n    cloneElement(gridElement, {\n      enableVirtualization: false\n    })\n  );\n\n  return {\n    head: getRows('.rdg-header-row'),\n    body: getRows('.rdg-row:not(.rdg-summary-row)'),\n    foot: getRows('.rdg-summary-row')\n  };\n\n  function getRows(selector: string) {\n    return Array.from(grid.querySelectorAll<HTMLDivElement>(selector)).map((gridRow) => {\n      return Array.from(gridRow.querySelectorAll<HTMLDivElement>('.rdg-cell')).map(\n        (gridCell) => gridCell.innerText\n      );\n    });\n  }\n}\n\nfunction serialiseCellValue(value: unknown) {\n  if (typeof value === 'string') {\n    const formattedValue = value.replace(/\"/g, '\"\"');\n    return formattedValue.includes(',') ? `\"${formattedValue}\"` : formattedValue;\n  }\n  return value;\n}\n\nfunction downloadFile(fileName: string, data: Blob) {\n  const downloadLink = document.createElement('a');\n  downloadLink.download = fileName;\n  const url = URL.createObjectURL(data);\n  downloadLink.href = url;\n  downloadLink.click();\n  URL.revokeObjectURL(url);\n}\n","import { useState, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { css } from '@linaria/core';\nimport { faker } from '@faker-js/faker';\n\nimport DataGrid, { SelectColumn, textEditor, SelectCellFormatter } from '../../src';\nimport type { Column, SortColumn } from '../../src';\nimport { exportToCsv, exportToXlsx, exportToPdf } from './exportUtils';\nimport { textEditorClassname } from '../../src/editors/textEditor';\nimport type { Props } from './types';\nimport type { Direction } from '../../src/types';\n\nconst toolbarClassname = css`\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-block-end: 8px;\n`;\n\nconst dialogContainerClassname = css`\n  position: absolute;\n  inset: 0;\n  display: flex;\n  place-items: center;\n  background: rgba(0, 0, 0, 0.1);\n\n  > dialog {\n    width: 300px;\n    > input {\n      width: 100%;\n    }\n\n    > menu {\n      text-align: end;\n    }\n  }\n`;\n\nconst dateFormatter = new Intl.DateTimeFormat(navigator.language);\nconst currencyFormatter = new Intl.NumberFormat(navigator.language, {\n  style: 'currency',\n  currency: 'eur'\n});\n\nfunction TimestampFormatter({ timestamp }: { timestamp: number }) {\n  return <>{dateFormatter.format(timestamp)}</>;\n}\n\nfunction CurrencyFormatter({ value }: { value: number }) {\n  return <>{currencyFormatter.format(value)}</>;\n}\n\ninterface SummaryRow {\n  id: string;\n  totalCount: number;\n  yesCount: number;\n}\n\ninterface Row {\n  id: number;\n  title: string;\n  client: string;\n  area: string;\n  country: string;\n  contact: string;\n  assignee: string;\n  progress: number;\n  startTimestamp: number;\n  endTimestamp: number;\n  budget: number;\n  transaction: string;\n  account: string;\n  version: string;\n  available: boolean;\n}\n\nfunction getColumns(countries: string[], direction: Direction): readonly Column<Row, SummaryRow>[] {\n  return [\n    SelectColumn,\n    {\n      key: 'id',\n      name: 'ID',\n      width: 60,\n      frozen: true,\n      resizable: false,\n      summaryFormatter() {\n        return <strong>Total</strong>;\n      }\n    },\n    {\n      key: 'title',\n      name: 'Task',\n      width: 120,\n      frozen: true,\n      editor: textEditor,\n      summaryFormatter({ row }) {\n        return <>{row.totalCount} records</>;\n      }\n    },\n    {\n      key: 'client',\n      name: 'Client',\n      width: 'max-content',\n      editor: textEditor\n    },\n    {\n      key: 'area',\n      name: 'Area',\n      width: 120,\n      editor: textEditor\n    },\n    {\n      key: 'country',\n      name: 'Country',\n      width: 180,\n      editor: (p) => (\n        <select\n          autoFocus\n          className={textEditorClassname}\n          value={p.row.country}\n          onChange={(e) => p.onRowChange({ ...p.row, country: e.target.value }, true)}\n        >\n          {countries.map((country) => (\n            <option key={country}>{country}</option>\n          ))}\n        </select>\n      )\n    },\n    {\n      key: 'contact',\n      name: 'Contact',\n      width: 160,\n      editor: textEditor\n    },\n    {\n      key: 'assignee',\n      name: 'Assignee',\n      width: 150,\n      editor: textEditor\n    },\n    {\n      key: 'progress',\n      name: 'Completion',\n      width: 110,\n      formatter(props) {\n        const value = props.row.progress;\n        return (\n          <>\n            <progress max={100} value={value} style={{ inlineSize: 50 }} /> {Math.round(value)}%\n          </>\n        );\n      },\n      editor({ row, onRowChange, onClose }) {\n        return createPortal(\n          <div\n            dir={direction}\n            className={dialogContainerClassname}\n            onKeyDown={(event) => {\n              if (event.key === 'Escape') {\n                onClose();\n              }\n            }}\n          >\n            <dialog open>\n              <input\n                autoFocus\n                type=\"range\"\n                min=\"0\"\n                max=\"100\"\n                value={row.progress}\n                onChange={(e) => onRowChange({ ...row, progress: e.target.valueAsNumber })}\n              />\n              <menu>\n                <button onClick={() => onClose()}>Cancel</button>\n                <button onClick={() => onClose(true)}>Save</button>\n              </menu>\n            </dialog>\n          </div>,\n          document.body\n        );\n      },\n      editorOptions: {\n        renderFormatter: true\n      }\n    },\n    {\n      key: 'startTimestamp',\n      name: 'Start date',\n      width: 100,\n      formatter(props) {\n        return <TimestampFormatter timestamp={props.row.startTimestamp} />;\n      }\n    },\n    {\n      key: 'endTimestamp',\n      name: 'Deadline',\n      width: 100,\n      formatter(props) {\n        return <TimestampFormatter timestamp={props.row.endTimestamp} />;\n      }\n    },\n    {\n      key: 'budget',\n      name: 'Budget',\n      width: 100,\n      formatter(props) {\n        return <CurrencyFormatter value={props.row.budget} />;\n      }\n    },\n    {\n      key: 'transaction',\n      name: 'Transaction type'\n    },\n    {\n      key: 'account',\n      name: 'Account',\n      width: 150\n    },\n    {\n      key: 'version',\n      name: 'Version',\n      editor: textEditor\n    },\n    {\n      key: 'available',\n      name: 'Available',\n      width: 80,\n      formatter({ row, onRowChange, isCellSelected }) {\n        return (\n          <SelectCellFormatter\n            value={row.available}\n            onChange={() => {\n              onRowChange({ ...row, available: !row.available });\n            }}\n            isCellSelected={isCellSelected}\n          />\n        );\n      },\n      summaryFormatter({ row: { yesCount, totalCount } }) {\n        return <>{`${Math.floor((100 * yesCount) / totalCount)}% ✔️`}</>;\n      }\n    }\n  ];\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfunction createRows(): readonly Row[] {\n  const now = Date.now();\n  const rows: Row[] = [];\n\n  for (let i = 0; i < 1000; i++) {\n    rows.push({\n      id: i,\n      title: `Task #${i + 1}`,\n      client: faker.company.name(),\n      area: faker.name.jobArea(),\n      country: faker.address.country(),\n      contact: faker.internet.exampleEmail(),\n      assignee: faker.name.fullName(),\n      progress: Math.random() * 100,\n      startTimestamp: now - Math.round(Math.random() * 1e10),\n      endTimestamp: now + Math.round(Math.random() * 1e10),\n      budget: 500 + Math.random() * 10500,\n      transaction: faker.finance.transactionType(),\n      account: faker.finance.iban(),\n      version: faker.system.semver(),\n      available: Math.random() > 0.5\n    });\n  }\n\n  return rows;\n}\n\ntype Comparator = (a: Row, b: Row) => number;\nfunction getComparator(sortColumn: string): Comparator {\n  switch (sortColumn) {\n    case 'assignee':\n    case 'title':\n    case 'client':\n    case 'area':\n    case 'country':\n    case 'contact':\n    case 'transaction':\n    case 'account':\n    case 'version':\n      return (a, b) => {\n        return a[sortColumn].localeCompare(b[sortColumn]);\n      };\n    case 'available':\n      return (a, b) => {\n        return a[sortColumn] === b[sortColumn] ? 0 : a[sortColumn] ? 1 : -1;\n      };\n    case 'id':\n    case 'progress':\n    case 'startTimestamp':\n    case 'endTimestamp':\n    case 'budget':\n      return (a, b) => {\n        return a[sortColumn] - b[sortColumn];\n      };\n    default:\n      throw new Error(`unsupported sortColumn: \"${sortColumn}\"`);\n  }\n}\n\nexport default function CommonFeatures({ direction }: Props) {\n  const [rows, setRows] = useState(createRows);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const [selectedRows, setSelectedRows] = useState<ReadonlySet<number>>(() => new Set());\n\n  const countries = useMemo(() => {\n    return [...new Set(rows.map((r) => r.country))].sort(new Intl.Collator().compare);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const columns = useMemo(() => getColumns(countries, direction), [countries, direction]);\n\n  const summaryRows = useMemo(() => {\n    const summaryRow: SummaryRow = {\n      id: 'total_0',\n      totalCount: rows.length,\n      yesCount: rows.filter((r) => r.available).length\n    };\n    return [summaryRow];\n  }, [rows]);\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n\n    return [...rows].sort((a, b) => {\n      for (const sort of sortColumns) {\n        const comparator = getComparator(sort.columnKey);\n        const compResult = comparator(a, b);\n        if (compResult !== 0) {\n          return sort.direction === 'ASC' ? compResult : -compResult;\n        }\n      }\n      return 0;\n    });\n  }, [rows, sortColumns]);\n\n  const gridElement = (\n    <DataGrid\n      rowKeyGetter={rowKeyGetter}\n      columns={columns}\n      rows={sortedRows}\n      defaultColumnOptions={{\n        sortable: true,\n        resizable: true\n      }}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      onRowsChange={setRows}\n      sortColumns={sortColumns}\n      onSortColumnsChange={setSortColumns}\n      topSummaryRows={summaryRows}\n      bottomSummaryRows={summaryRows}\n      className=\"fill-grid\"\n      direction={direction}\n    />\n  );\n\n  return (\n    <>\n      <div className={toolbarClassname}>\n        <ExportButton onExport={() => exportToCsv(gridElement, 'CommonFeatures.csv')}>\n          Export to CSV\n        </ExportButton>\n        <ExportButton onExport={() => exportToXlsx(gridElement, 'CommonFeatures.xlsx')}>\n          Export to XSLX\n        </ExportButton>\n        <ExportButton onExport={() => exportToPdf(gridElement, 'CommonFeatures.pdf')}>\n          Export to PDF\n        </ExportButton>\n      </div>\n      {gridElement}\n    </>\n  );\n}\n\nfunction ExportButton({\n  onExport,\n  children\n}: {\n  onExport: () => Promise<unknown>;\n  children: React.ReactChild;\n}) {\n  const [exporting, setExporting] = useState(false);\n  return (\n    <button\n      disabled={exporting}\n      onClick={async () => {\n        setExporting(true);\n        await onExport();\n        setExporting(false);\n      }}\n    >\n      {exporting ? 'Exporting' : children}\n    </button>\n  );\n}\n","import { textEditorClassname } from '../../../../src/editors/textEditor';\nimport type { EditorProps } from '../../../../src';\nimport type { Row } from '../../AllFeatures';\n\nconst titles = ['Dr.', 'Mr.', 'Mrs.', 'Miss', 'Ms.'] as const;\n\nexport default function dropDownEditor({ row, onRowChange }: EditorProps<Row>) {\n  return (\n    <select\n      className={textEditorClassname}\n      value={row.title}\n      onChange={(event) => onRowChange({ ...row, title: event.target.value }, true)}\n      autoFocus\n    >\n      {titles.map((title) => (\n        <option key={title} value={title}>\n          {title}\n        </option>\n      ))}\n    </select>\n  );\n}\n","import { css } from '@linaria/core';\n\nconst wrapperClassname = css`\n  display: flex;\n  justify-content: space-around;\n`;\n\nconst imageCellClassname = css`\n  background: #efefef;\n  background-size: 100%;\n  display: inline-block;\n  block-size: 28px;\n  inline-size: 28px;\n  vertical-align: middle;\n  background-position: center;\n`;\n\ninterface Props {\n  /** image url, used as background-image */\n  value: string;\n}\n\nexport function ImageFormatter({ value }: Props) {\n  return (\n    <div className={wrapperClassname}>\n      <div className={imageCellClassname} style={{ backgroundImage: `url(${value})` }} />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { css } from '@linaria/core';\nimport { faker } from '@faker-js/faker';\n\nimport DataGrid, { SelectColumn, textEditor } from '../../src';\nimport type { Column, FillEvent, CopyEvent, PasteEvent } from '../../src';\nimport dropDownEditor from './components/Editors/dropDownEditor';\nimport { ImageFormatter } from './components/Formatters';\nimport type { Props } from './types';\n\nconst highlightClassname = css`\n  .rdg-cell {\n    background-color: #9370db;\n    color: white;\n  }\n\n  &:hover .rdg-cell {\n    background-color: #800080;\n  }\n`;\n\nexport interface Row {\n  id: string;\n  avatar: string;\n  email: string;\n  title: string;\n  firstName: string;\n  lastName: string;\n  street: string;\n  zipCode: string;\n  date: string;\n  bs: string;\n  catchPhrase: string;\n  companyName: string;\n  words: string;\n  sentence: string;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nconst columns: readonly Column<Row>[] = [\n  SelectColumn,\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80,\n    resizable: true,\n    frozen: true\n  },\n  {\n    key: 'avatar',\n    name: 'Avatar',\n    width: 40,\n    resizable: true,\n    headerRenderer: () => <ImageFormatter value={faker.image.cats()} />,\n    formatter: ({ row }) => <ImageFormatter value={row.avatar} />\n  },\n  {\n    key: 'title',\n    name: 'Title',\n    width: 200,\n    resizable: true,\n    formatter(props) {\n      return <>{props.row.title}</>;\n    },\n    editor: dropDownEditor\n  },\n  {\n    key: 'firstName',\n    name: 'First Name',\n    width: 200,\n    resizable: true,\n    frozen: true,\n    editor: textEditor\n  },\n  {\n    key: 'lastName',\n    name: 'Last Name',\n    width: 200,\n    resizable: true,\n    frozen: true,\n    editor: textEditor\n  },\n  {\n    key: 'email',\n    name: 'Email',\n    width: 'max-content',\n    resizable: true,\n    editor: textEditor\n  },\n  {\n    key: 'street',\n    name: 'Street',\n    width: 200,\n    resizable: true,\n    editor: textEditor\n  },\n  {\n    key: 'zipCode',\n    name: 'ZipCode',\n    width: 200,\n    resizable: true,\n    editor: textEditor\n  },\n  {\n    key: 'date',\n    name: 'Date',\n    width: 200,\n    resizable: true,\n    editor: textEditor\n  },\n  {\n    key: 'bs',\n    name: 'bs',\n    width: 200,\n    resizable: true,\n    editor: textEditor\n  },\n  {\n    key: 'catchPhrase',\n    name: 'Catch Phrase',\n    width: 'max-content',\n    resizable: true,\n    editor: textEditor\n  },\n  {\n    key: 'companyName',\n    name: 'Company Name',\n    width: 200,\n    resizable: true,\n    editor: textEditor\n  },\n  {\n    key: 'sentence',\n    name: 'Sentence',\n    width: 'max-content',\n    resizable: true,\n    editor: textEditor\n  }\n];\n\nfunction createRows(): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 0; i < 2000; i++) {\n    rows.push({\n      id: `id_${i}`,\n      avatar: faker.image.avatar(),\n      email: faker.internet.email(),\n      title: faker.name.prefix(),\n      firstName: faker.name.firstName(),\n      lastName: faker.name.lastName(),\n      street: faker.address.street(),\n      zipCode: faker.address.zipCode(),\n      date: faker.date.past().toLocaleDateString(),\n      bs: faker.company.bs(),\n      catchPhrase: faker.company.catchPhrase(),\n      companyName: faker.company.name(),\n      words: faker.lorem.words(),\n      sentence: faker.lorem.sentence()\n    });\n  }\n\n  return rows;\n}\n\nexport default function AllFeatures({ direction }: Props) {\n  const [rows, setRows] = useState(createRows);\n  const [selectedRows, setSelectedRows] = useState<ReadonlySet<string>>(() => new Set());\n\n  function handleFill({ columnKey, sourceRow, targetRow }: FillEvent<Row>): Row {\n    return { ...targetRow, [columnKey]: sourceRow[columnKey as keyof Row] };\n  }\n\n  function handlePaste({\n    sourceColumnKey,\n    sourceRow,\n    targetColumnKey,\n    targetRow\n  }: PasteEvent<Row>): Row {\n    const incompatibleColumns = ['email', 'zipCode', 'date'];\n    if (\n      sourceColumnKey === 'avatar' ||\n      ['id', 'avatar'].includes(targetColumnKey) ||\n      ((incompatibleColumns.includes(targetColumnKey) ||\n        incompatibleColumns.includes(sourceColumnKey)) &&\n        sourceColumnKey !== targetColumnKey)\n    ) {\n      return targetRow;\n    }\n\n    return { ...targetRow, [targetColumnKey]: sourceRow[sourceColumnKey as keyof Row] };\n  }\n\n  function handleCopy({ sourceRow, sourceColumnKey }: CopyEvent<Row>): void {\n    if (window.isSecureContext) {\n      navigator.clipboard.writeText(sourceRow[sourceColumnKey as keyof Row]);\n    }\n  }\n\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      rowKeyGetter={rowKeyGetter}\n      onRowsChange={setRows}\n      onFill={handleFill}\n      onCopy={handleCopy}\n      onPaste={handlePaste}\n      rowHeight={30}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      className=\"fill-grid\"\n      rowClass={(row) => (row.id.includes('7') ? highlightClassname : undefined)}\n      direction={direction}\n      onCellClick={(args, event) => {\n        if (args.column.key === 'title') {\n          event.preventGridDefault();\n          args.selectCell(true);\n        }\n      }}\n    />\n  );\n}\n","import { useState } from 'react';\n\nimport DataGrid from '../../src';\nimport type { Column, CellKeyDownArgs, CellKeyboardEvent } from '../../src';\nimport type { Props } from './types';\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n  startDate: string;\n  completeDate: string;\n}\n\ntype CellNavigationMode = 'NONE' | 'CHANGE_ROW' | 'LOOP_OVER_ROW' | 'LOOP_OVER_COLUMN' | 'NO_TAB';\n\nconst columns: Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title'\n  },\n  {\n    key: 'priority',\n    name: 'Priority'\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type'\n  },\n  {\n    key: 'complete',\n    name: '% Complete'\n  },\n  {\n    key: 'startDate',\n    name: 'Start Date'\n  },\n  {\n    key: 'completeDate',\n    name: 'Expected Complete',\n    width: 200\n  }\n];\n\nfunction getRandomDate(start: Date, end: Date) {\n  return new Date(\n    start.getTime() + Math.random() * (end.getTime() - start.getTime())\n  ).toLocaleDateString();\n}\n\nfunction createRows(): Row[] {\n  const rows = [];\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.floor(Math.random() * 3 + 1)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.floor(Math.random() * 3 + 1)],\n      startDate: getRandomDate(new Date(2015, 3, 1), new Date()),\n      completeDate: getRandomDate(new Date(), new Date(2016, 0, 1))\n    });\n  }\n\n  return rows;\n}\n\nexport default function CellNavigation({ direction }: Props) {\n  const [rows] = useState(createRows);\n  const [cellNavigationMode, setCellNavigationMode] = useState<CellNavigationMode>('CHANGE_ROW');\n\n  function handleCellKeyDown(args: CellKeyDownArgs<Row>, event: CellKeyboardEvent) {\n    if (args.mode === 'EDIT') return;\n    const { column, rowIdx, selectCell } = args;\n    const { idx } = column;\n    const { key, shiftKey } = event;\n    const loopOverNavigation = () => {\n      if ((key === 'ArrowRight' || (key === 'Tab' && !shiftKey)) && idx === columns.length - 1) {\n        selectCell({ rowIdx, idx: 0 });\n        event.preventDefault();\n      } else if ((key === 'ArrowLeft' || (key === 'Tab' && shiftKey)) && idx === 0) {\n        selectCell({ rowIdx, idx: columns.length - 1 });\n        event.preventDefault();\n      }\n    };\n\n    const changeRowNavigation = () => {\n      if (key === 'ArrowRight' && idx === columns.length - 1) {\n        if (rows.length === 0) return;\n        if (rowIdx === -1) {\n          selectCell({ rowIdx: 0, idx: 0 });\n        } else {\n          if (rowIdx === rows.length - 1) return;\n          selectCell({ rowIdx: rowIdx + 1, idx: 0 });\n        }\n        event.preventDefault();\n      } else if (key === 'ArrowLeft' && idx === 0) {\n        if (rowIdx === -1) return;\n        selectCell({ rowIdx: rowIdx - 1, idx: columns.length - 1 });\n        event.preventDefault();\n      }\n    };\n\n    const loopOverColumnNavigation = () => {\n      let newRowIdx: number;\n      if (rowIdx === -1) {\n        newRowIdx = shiftKey ? rows.length - 1 : 0;\n      } else {\n        newRowIdx = shiftKey ? rowIdx - 1 : rowIdx === rows.length - 1 ? -1 : rowIdx + 1;\n      }\n      selectCell({ rowIdx: newRowIdx, idx });\n      event.preventDefault();\n    };\n\n    if (cellNavigationMode === 'LOOP_OVER_ROW') {\n      loopOverNavigation();\n    } else if (cellNavigationMode === 'CHANGE_ROW') {\n      changeRowNavigation();\n    } else if (cellNavigationMode === 'LOOP_OVER_COLUMN' && key === 'Tab') {\n      loopOverColumnNavigation();\n    } else if (cellNavigationMode === 'NO_TAB' && key === 'Tab') {\n      // Need to allow default event to focus the next element\n      event.preventGridDefault();\n    }\n  }\n\n  return (\n    <>\n      <div style={{ marginBlockEnd: 5 }}>\n        Cell Navigation Modes:\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'NONE'}\n            onChange={() => setCellNavigationMode('NONE')}\n          />\n          None\n        </label>\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'CHANGE_ROW'}\n            onChange={() => setCellNavigationMode('CHANGE_ROW')}\n          />\n          Change Row\n        </label>\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'LOOP_OVER_ROW'}\n            onChange={() => setCellNavigationMode('LOOP_OVER_ROW')}\n          />\n          Loop Over Row\n        </label>\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'LOOP_OVER_COLUMN'}\n            onChange={() => setCellNavigationMode('LOOP_OVER_COLUMN')}\n          />\n          Loop Over Column\n        </label>\n        <label>\n          <input\n            type=\"radio\"\n            name=\"mode\"\n            checked={cellNavigationMode === 'NO_TAB'}\n            onChange={() => setCellNavigationMode('NO_TAB')}\n          />\n          No Tab\n        </label>\n      </div>\n      <DataGrid\n        columns={columns}\n        rows={rows}\n        direction={direction}\n        onCellKeyDown={handleCellKeyDown}\n      />\n    </>\n  );\n}\n","import { useMemo } from 'react';\nimport { css } from '@linaria/core';\n\nimport DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\nimport type { Props } from './types';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(100).keys()];\n\nconst colSpanClassname = css`\n  background-color: #ffb300;\n  color: black;\n  text-align: center;\n`;\n\nfunction cellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nexport default function ColumnSpanning({ direction }: Props) {\n  const columns = useMemo((): readonly Column<Row>[] => {\n    const columns: Column<Row>[] = [];\n\n    for (let i = 0; i < 30; i++) {\n      const key = String(i);\n      columns.push({\n        key,\n        name: key,\n        frozen: i < 5,\n        resizable: true,\n        formatter: cellFormatter,\n        colSpan(args) {\n          if (args.type === 'ROW') {\n            if (key === '2' && args.row === 2) return 3;\n            if (key === '4' && args.row === 4) return 6; // Will not work as colspan includes both frozen and regular columns\n            if (key === '0' && args.row === 5) return 5;\n            if (key === '27' && args.row === 8) return 3;\n            if (key === '6' && args.row < 8) return 2;\n          }\n          if (args.type === 'HEADER' && key === '8') {\n            return 3;\n          }\n          return undefined;\n        },\n        cellClass(row) {\n          if (\n            (key === '0' && row === 5) ||\n            (key === '2' && row === 2) ||\n            (key === '27' && row === 8) ||\n            (key === '6' && row < 8)\n          ) {\n            return colSpanClassname;\n          }\n          return undefined;\n        }\n      });\n    }\n\n    return columns;\n  }, []);\n\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      rowHeight={22}\n      className=\"fill-grid\"\n      direction={direction}\n    />\n  );\n}\n","import { useDrag, useDrop } from 'react-dnd';\n\nimport { headerRenderer } from '../../../../src';\nimport type { HeaderRendererProps } from '../../../../src';\n\ninterface DraggableHeaderRendererProps<R> extends HeaderRendererProps<R> {\n  onColumnsReorder: (sourceKey: string, targetKey: string) => void;\n}\n\nexport function DraggableHeaderRenderer<R>({\n  onColumnsReorder,\n  column,\n  ...props\n}: DraggableHeaderRendererProps<R>) {\n  const [{ isDragging }, drag] = useDrag({\n    type: 'COLUMN_DRAG',\n    item: { key: column.key },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n\n  const [{ isOver }, drop] = useDrop({\n    accept: 'COLUMN_DRAG',\n    drop({ key }: { key: string }) {\n      onColumnsReorder(key, column.key);\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n\n  return (\n    <div\n      ref={(ref) => {\n        drag(ref);\n        drop(ref);\n      }}\n      style={{\n        opacity: isDragging ? 0.5 : 1,\n        backgroundColor: isOver ? '#ececec' : undefined,\n        cursor: 'move'\n      }}\n    >\n      {headerRenderer({ column, ...props })}\n    </div>\n  );\n}\n","import { useState, useMemo, useCallback } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport { DraggableHeaderRenderer } from './components/HeaderRenderers';\nimport DataGrid from '../../src';\nimport type { Column, HeaderRendererProps, SortColumn } from '../../src';\nimport type { Props } from './types';\n\ninterface Row {\n  readonly id: number;\n  readonly task: string;\n  readonly complete: number;\n  readonly priority: string;\n  readonly issueType: string;\n}\n\nfunction createRows(): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nfunction createColumns(): Column<Row>[] {\n  return [\n    {\n      key: 'id',\n      name: 'ID',\n      width: 80\n    },\n    {\n      key: 'task',\n      name: 'Title',\n      resizable: true,\n      sortable: true\n    },\n    {\n      key: 'priority',\n      name: 'Priority',\n      resizable: true,\n      sortable: true\n    },\n    {\n      key: 'issueType',\n      name: 'Issue Type',\n      resizable: true,\n      sortable: true\n    },\n    {\n      key: 'complete',\n      name: '% Complete',\n      resizable: true,\n      sortable: true\n    }\n  ];\n}\n\nexport default function ColumnsReordering({ direction }: Props) {\n  const [rows] = useState(createRows);\n  const [columns, setColumns] = useState(createColumns);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const onSortColumnsChange = useCallback((sortColumns: SortColumn[]) => {\n    setSortColumns(sortColumns.slice(-1));\n  }, []);\n\n  const draggableColumns = useMemo(() => {\n    function headerRenderer(props: HeaderRendererProps<Row>) {\n      return <DraggableHeaderRenderer {...props} onColumnsReorder={handleColumnsReorder} />;\n    }\n\n    function handleColumnsReorder(sourceKey: string, targetKey: string) {\n      const sourceColumnIndex = columns.findIndex((c) => c.key === sourceKey);\n      const targetColumnIndex = columns.findIndex((c) => c.key === targetKey);\n      const reorderedColumns = [...columns];\n\n      reorderedColumns.splice(\n        targetColumnIndex,\n        0,\n        reorderedColumns.splice(sourceColumnIndex, 1)[0]\n      );\n\n      setColumns(reorderedColumns);\n    }\n\n    return columns.map((c) => {\n      if (c.key === 'id') return c;\n      return { ...c, headerRenderer };\n    });\n  }, [columns]);\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n    const { columnKey, direction } = sortColumns[0];\n\n    let sortedRows: Row[] = [...rows];\n\n    switch (columnKey) {\n      case 'task':\n      case 'priority':\n      case 'issueType':\n        sortedRows = sortedRows.sort((a, b) => a[columnKey].localeCompare(b[columnKey]));\n        break;\n      case 'complete':\n        sortedRows = sortedRows.sort((a, b) => a[columnKey] - b[columnKey]);\n        break;\n      default:\n    }\n    return direction === 'DESC' ? sortedRows.reverse() : sortedRows;\n  }, [rows, sortColumns]);\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <DataGrid\n        columns={draggableColumns}\n        rows={sortedRows}\n        sortColumns={sortColumns}\n        onSortColumnsChange={onSortColumnsChange}\n        direction={direction}\n        defaultColumnOptions={{ width: '1fr' }}\n      />\n    </DndProvider>\n  );\n}\n","import { useMemo, useState } from 'react';\nimport { css } from '@linaria/core';\n\nimport DataGrid, { SelectColumn, textEditor } from '../../src';\nimport type { Column, CheckboxFormatterProps, SortColumn, SortStatusProps } from '../../src';\nimport type { Props } from './types';\n\nconst selectCellClassname = css`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > input {\n    margin: 0;\n  }\n`;\n\nconst sortPriorityClassname = css`\n  color: grey;\n  margin-left: 2px;\n`;\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    ...SelectColumn,\n    headerCellClass: selectCellClassname,\n    cellClass: selectCellClassname\n  },\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    editor: textEditor,\n    sortable: true\n  },\n  {\n    key: 'priority',\n    name: 'Priority',\n    sortable: true\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type',\n    sortable: true\n  },\n  {\n    key: 'complete',\n    name: '% Complete',\n    sortable: true\n  }\n];\n\nexport default function CustomizableRenderers({ direction }: Props) {\n  const [rows, setRows] = useState(createRows);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const [selectedRows, setSelectedRows] = useState<ReadonlySet<number>>(() => new Set());\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n\n    return [...rows].sort((a, b) => {\n      for (const sort of sortColumns) {\n        const comparator = getComparator(sort.columnKey);\n        const compResult = comparator(a, b);\n        if (compResult !== 0) {\n          return sort.direction === 'ASC' ? compResult : -compResult;\n        }\n      }\n      return 0;\n    });\n  }, [rows, sortColumns]);\n\n  return (\n    <DataGrid\n      className=\"fill-grid\"\n      columns={columns}\n      rows={sortedRows}\n      rowKeyGetter={rowKeyGetter}\n      onRowsChange={setRows}\n      sortColumns={sortColumns}\n      onSortColumnsChange={setSortColumns}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      renderers={{ sortStatus, checkboxFormatter }}\n      direction={direction}\n    />\n  );\n}\n\nfunction checkboxFormatter(\n  { onChange, ...props }: CheckboxFormatterProps,\n  ref: React.RefObject<HTMLInputElement>\n) {\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    onChange(e.target.checked, (e.nativeEvent as MouseEvent).shiftKey);\n  }\n\n  return <input type=\"checkbox\" ref={ref} {...props} onChange={handleChange} />;\n}\n\nfunction sortStatus({ sortDirection, priority }: SortStatusProps) {\n  return (\n    <>\n      {sortDirection !== undefined ? (sortDirection === 'ASC' ? '\\u2B9D' : '\\u2B9F') : null}\n      <span className={sortPriorityClassname}>{priority}</span>\n    </>\n  );\n}\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\ntype Comparator = (a: Row, b: Row) => number;\nfunction getComparator(sortColumn: string): Comparator {\n  switch (sortColumn) {\n    case 'task':\n    case 'priority':\n    case 'issueType':\n      return (a, b) => {\n        return a[sortColumn].localeCompare(b[sortColumn]);\n      };\n    case 'complete':\n      return (a, b) => {\n        return a[sortColumn] - b[sortColumn];\n      };\n    default:\n      throw new Error(`unsupported sortColumn: \"${sortColumn}\"`);\n  }\n}\n","// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport { useState, useReducer, useRef, useLayoutEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { css } from '@linaria/core';\nimport { faker } from '@faker-js/faker';\n\nimport DataGrid from '../../src';\nimport type { Column } from '../../src';\nimport type { Props } from './types';\n\nconst contextMenuClassname = css`\n  position: absolute;\n  background-color: #ffffff;\n  border: 1px solid black;\n  padding: 16px;\n  list-style: none;\n\n  > li {\n    padding: 8px;\n  }\n`;\n\ninterface Row {\n  id: number;\n  product: string;\n  price: string;\n}\n\nfunction createRows(): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 1000; i++) {\n    rows.push({\n      id: i,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  { key: 'id', name: 'ID' },\n  { key: 'product', name: 'Product' },\n  { key: 'price', name: 'Price' }\n];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nexport default function ContextMenuDemo({ direction }: Props) {\n  const [rows, setRows] = useState(createRows);\n  const [nextId, setNextId] = useReducer((id: number) => id + 1, rows[rows.length - 1].id + 1);\n  const [contextMenuProps, setContextMenuProps] = useState<{\n    rowIdx: number;\n    top: number;\n    left: number;\n  } | null>(null);\n  const menuRef = useRef<HTMLMenuElement | null>(null);\n  const isContextMenuOpen = contextMenuProps !== null;\n\n  useLayoutEffect(() => {\n    if (!isContextMenuOpen) return;\n\n    function onClick(event: MouseEvent) {\n      if (event.target instanceof Node && menuRef.current?.contains(event.target)) {\n        return;\n      }\n      setContextMenuProps(null);\n    }\n\n    addEventListener('click', onClick);\n\n    return () => {\n      removeEventListener('click', onClick);\n    };\n  }, [isContextMenuOpen]);\n\n  function insertRow(insertRowIdx: number) {\n    const newRow: Row = {\n      id: nextId,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    };\n\n    setRows([...rows.slice(0, insertRowIdx), newRow, ...rows.slice(insertRowIdx)]);\n    setNextId();\n  }\n\n  return (\n    <>\n      <DataGrid\n        rowKeyGetter={rowKeyGetter}\n        columns={columns}\n        rows={rows}\n        className=\"fill-grid\"\n        direction={direction}\n        onCellContextMenu={({ row }, event) => {\n          event.preventDefault();\n          setContextMenuProps({\n            rowIdx: rows.indexOf(row),\n            top: event.clientY,\n            left: event.clientX\n          });\n        }}\n      />\n      {isContextMenuOpen &&\n        createPortal(\n          <menu\n            ref={menuRef}\n            className={contextMenuClassname}\n            style={\n              {\n                top: contextMenuProps.top,\n                left: contextMenuProps.left\n              } as unknown as React.CSSProperties\n            }\n          >\n            <li>\n              <button\n                onClick={() => {\n                  const { rowIdx } = contextMenuProps;\n                  setRows([...rows.slice(0, rowIdx), ...rows.slice(rowIdx + 1)]);\n                  setContextMenuProps(null);\n                }}\n              >\n                Delete Row\n              </button>\n            </li>\n            <li>\n              <button\n                onClick={() => {\n                  const { rowIdx } = contextMenuProps;\n                  insertRow(rowIdx);\n                  setContextMenuProps(null);\n                }}\n              >\n                Insert Row Above\n              </button>\n            </li>\n            <li>\n              <button\n                onClick={() => {\n                  const { rowIdx } = contextMenuProps;\n                  insertRow(rowIdx + 1);\n                  setContextMenuProps(null);\n                }}\n              >\n                Insert Row Below\n              </button>\n            </li>\n          </menu>,\n          document.body\n        )}\n    </>\n  );\n}\n","import { useState } from 'react';\nimport { groupBy as rowGrouper } from 'lodash';\nimport { css } from '@linaria/core';\nimport { faker } from '@faker-js/faker';\n\nimport DataGrid, { SelectColumn } from '../../src';\nimport type { Column } from '../../src';\nimport type { Props } from './types';\n\nconst groupingClassname = css`\n  display: flex;\n  flex-direction: column;\n  block-size: 100%;\n  gap: 8px;\n\n  > .rdg {\n    flex: 1;\n  }\n`;\n\nconst optionsClassname = css`\n  display: flex;\n  gap: 8px;\n  text-transform: capitalize;\n`;\n\ninterface Row {\n  id: number;\n  country: string;\n  year: number;\n  sport: string;\n  athlete: string;\n  gold: number;\n  silver: number;\n  bronze: number;\n}\n\nconst sports = [\n  'Swimming',\n  'Gymnastics',\n  'Speed Skating',\n  'Cross Country Skiing',\n  'Short-Track Speed Skating',\n  'Diving',\n  'Cycling',\n  'Biathlon',\n  'Alpine Skiing',\n  'Ski Jumping',\n  'Nordic Combined',\n  'Athletics',\n  'Table Tennis',\n  'Tennis',\n  'Synchronized Swimming',\n  'Shooting',\n  'Rowing',\n  'Fencing',\n  'Equestrian',\n  'Canoeing',\n  'Bobsleigh',\n  'Badminton',\n  'Archery',\n  'Wrestling',\n  'Weightlifting',\n  'Waterpolo',\n  'Wrestling',\n  'Weightlifting'\n];\n\nconst columns: readonly Column<Row>[] = [\n  SelectColumn,\n  {\n    key: 'country',\n    name: 'Country'\n  },\n  {\n    key: 'year',\n    name: 'Year'\n  },\n  {\n    key: 'sport',\n    name: 'Sport'\n  },\n  {\n    key: 'athlete',\n    name: 'Athlete'\n  },\n  {\n    key: 'gold',\n    name: 'Gold',\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, { gold }) => prev + gold, 0)}</>;\n    }\n  },\n  {\n    key: 'silver',\n    name: 'Silver',\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, { silver }) => prev + silver, 0)}</>;\n    }\n  },\n  {\n    key: 'bronze',\n    name: 'Bronze',\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, { silver }) => prev + silver, 0)}</>;\n    }\n  },\n  {\n    key: 'total',\n    name: 'Total',\n    formatter({ row }) {\n      return <>{row.gold + row.silver + row.bronze}</>;\n    },\n    groupFormatter({ childRows }) {\n      return <>{childRows.reduce((prev, row) => prev + row.gold + row.silver + row.bronze, 0)}</>;\n    }\n  }\n];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n  for (let i = 1; i < 10000; i++) {\n    rows.push({\n      id: i,\n      year: 2015 + faker.datatype.number(3),\n      country: faker.address.country(),\n      sport: sports[faker.datatype.number(sports.length - 1)],\n      athlete: faker.name.fullName(),\n      gold: faker.datatype.number(5),\n      silver: faker.datatype.number(5),\n      bronze: faker.datatype.number(5)\n    });\n  }\n\n  return rows.sort((r1, r2) => r2.country.localeCompare(r1.country));\n}\n\nconst options = ['country', 'year', 'sport', 'athlete'] as const;\n\nexport default function Grouping({ direction }: Props) {\n  const [rows] = useState(createRows);\n  const [selectedRows, setSelectedRows] = useState<ReadonlySet<number>>(() => new Set());\n  const [selectedOptions, setSelectedOptions] = useState<readonly string[]>([\n    options[0],\n    options[1]\n  ]);\n  const [expandedGroupIds, setExpandedGroupIds] = useState<ReadonlySet<unknown>>(\n    () => new Set<unknown>(['United States of America', 'United States of America__2015'])\n  );\n\n  function toggleOption(option: string, enabled: boolean) {\n    const index = selectedOptions.indexOf(option);\n    if (enabled) {\n      if (index === -1) {\n        setSelectedOptions((options) => [...options, option]);\n      }\n    } else if (index !== -1) {\n      setSelectedOptions((options) => {\n        const newOptions = [...options];\n        newOptions.splice(index, 1);\n        return newOptions;\n      });\n    }\n    setExpandedGroupIds(new Set());\n  }\n\n  return (\n    <div className={groupingClassname}>\n      <b>Group by columns:</b>\n      <div className={optionsClassname}>\n        {options.map((option) => (\n          <label key={option}>\n            <input\n              type=\"checkbox\"\n              checked={selectedOptions.includes(option)}\n              onChange={(event) => toggleOption(option, event.target.checked)}\n            />{' '}\n            {option}\n          </label>\n        ))}\n      </div>\n\n      <DataGrid\n        columns={columns}\n        rows={rows}\n        rowKeyGetter={rowKeyGetter}\n        selectedRows={selectedRows}\n        onSelectedRowsChange={setSelectedRows}\n        groupBy={selectedOptions}\n        rowGrouper={rowGrouper}\n        expandedGroupIds={expandedGroupIds}\n        onExpandedGroupIdsChange={setExpandedGroupIds}\n        defaultColumnOptions={{ resizable: true }}\n        direction={direction}\n      />\n    </div>\n  );\n}\n","import { createContext, useContext, useMemo, useState } from 'react';\nimport { css } from '@linaria/core';\nimport { faker } from '@faker-js/faker';\n\nimport DataGrid, { useFocusRef } from '../../src';\nimport type { Column, HeaderRendererProps } from '../../src';\nimport type { Omit } from '../../src/types';\nimport type { Props } from './types';\n\nconst rootClassname = css`\n  display: flex;\n  flex-direction: column;\n  block-size: 100%;\n  gap: 10px;\n\n  > .rdg {\n    flex: 1;\n  }\n`;\n\nconst toolbarClassname = css`\n  text-align: end;\n`;\n\nconst filterColumnClassName = 'filter-cell';\n\nconst filterContainerClassname = css`\n  .${filterColumnClassName} {\n    line-height: 35px;\n    padding: 0;\n\n    > div {\n      padding-block: 0;\n      padding-inline: 8px;\n\n      &:first-child {\n        border-block-end: 1px solid var(--rdg-border-color);\n      }\n    }\n  }\n`;\n\nconst filterClassname = css`\n  inline-size: 100%;\n  padding: 4px;\n  font-size: 14px;\n`;\n\ninterface Row {\n  id: number;\n  task: string;\n  priority: string;\n  issueType: string;\n  developer: string;\n  complete: number;\n}\n\ninterface Filter extends Omit<Row, 'id' | 'complete'> {\n  complete: number | undefined;\n  enabled: boolean;\n}\n\n// Context is needed to read filter values otherwise columns are\n// re-created when filters are changed and filter loses focus\nconst FilterContext = createContext<Filter | undefined>(undefined);\n\nfunction inputStopPropagation(event: React.KeyboardEvent<HTMLInputElement>) {\n  if (['ArrowLeft', 'ArrowRight'].includes(event.key)) {\n    event.stopPropagation();\n  }\n}\n\nfunction selectStopPropagation(event: React.KeyboardEvent<HTMLSelectElement>) {\n  if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(event.key)) {\n    event.stopPropagation();\n  }\n}\n\nexport default function HeaderFilters({ direction }: Props) {\n  const [rows] = useState(createRows);\n  const [filters, setFilters] = useState<Filter>({\n    task: '',\n    priority: 'Critical',\n    issueType: 'All',\n    developer: '',\n    complete: undefined,\n    enabled: true\n  });\n\n  const developerOptions = useMemo(\n    () =>\n      Array.from(new Set(rows.map((r) => r.developer))).map((d) => ({\n        label: d,\n        value: d\n      })),\n    [rows]\n  );\n\n  const columns = useMemo((): readonly Column<Row>[] => {\n    return [\n      {\n        key: 'id',\n        name: 'ID',\n        width: 50\n      },\n      {\n        key: 'task',\n        name: 'Title',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLInputElement> {...p}>\n            {({ filters, ...rest }) => (\n              <input\n                {...rest}\n                className={filterClassname}\n                value={filters.task}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    task: e.target.value\n                  })\n                }\n                onKeyDown={inputStopPropagation}\n              />\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'priority',\n        name: 'Priority',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLSelectElement> {...p}>\n            {({ filters, ...rest }) => (\n              <select\n                {...rest}\n                className={filterClassname}\n                value={filters.priority}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    priority: e.target.value\n                  })\n                }\n                onKeyDown={selectStopPropagation}\n              >\n                <option value=\"All\">All</option>\n                <option value=\"Critical\">Critical</option>\n                <option value=\"High\">High</option>\n                <option value=\"Medium\">Medium</option>\n                <option value=\"Low\">Low</option>\n              </select>\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'issueType',\n        name: 'Issue Type',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLSelectElement> {...p}>\n            {({ filters, ...rest }) => (\n              <select\n                {...rest}\n                className={filterClassname}\n                value={filters.issueType}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    issueType: e.target.value\n                  })\n                }\n                onKeyDown={selectStopPropagation}\n              >\n                <option value=\"All\">All</option>\n                <option value=\"Bug\">Bug</option>\n                <option value=\"Improvement\">Improvement</option>\n                <option value=\"Epic\">Epic</option>\n                <option value=\"Story\">Story</option>\n              </select>\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'developer',\n        name: 'Developer',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLInputElement> {...p}>\n            {({ filters, ...rest }) => (\n              <input\n                {...rest}\n                className={filterClassname}\n                value={filters.developer}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    developer: e.target.value\n                  })\n                }\n                onKeyDown={inputStopPropagation}\n                list=\"developers\"\n              />\n            )}\n          </FilterRenderer>\n        )\n      },\n      {\n        key: 'complete',\n        name: '% Complete',\n        headerCellClass: filterColumnClassName,\n        headerRenderer: (p) => (\n          <FilterRenderer<Row, unknown, HTMLInputElement> {...p}>\n            {({ filters, ...rest }) => (\n              <input\n                {...rest}\n                type=\"number\"\n                className={filterClassname}\n                value={filters.complete}\n                onChange={(e) =>\n                  setFilters({\n                    ...filters,\n                    complete: Number.isFinite(e.target.valueAsNumber)\n                      ? e.target.valueAsNumber\n                      : undefined\n                  })\n                }\n                onKeyDown={inputStopPropagation}\n              />\n            )}\n          </FilterRenderer>\n        )\n      }\n    ];\n  }, []);\n\n  const filteredRows = useMemo(() => {\n    return rows.filter((r) => {\n      return (\n        (filters.task ? r.task.includes(filters.task) : true) &&\n        (filters.priority !== 'All' ? r.priority === filters.priority : true) &&\n        (filters.issueType !== 'All' ? r.issueType === filters.issueType : true) &&\n        (filters.developer\n          ? r.developer.toLowerCase().startsWith(filters.developer.toLowerCase())\n          : true) &&\n        (filters.complete !== undefined ? r.complete >= filters.complete : true)\n      );\n    });\n  }, [rows, filters]);\n\n  function clearFilters() {\n    setFilters({\n      task: '',\n      priority: 'All',\n      issueType: 'All',\n      developer: '',\n      complete: undefined,\n      enabled: true\n    });\n  }\n\n  function toggleFilters() {\n    setFilters((filters) => ({\n      ...filters,\n      enabled: !filters.enabled\n    }));\n  }\n\n  return (\n    <div className={rootClassname}>\n      <div className={toolbarClassname}>\n        <button type=\"button\" onClick={toggleFilters}>\n          Toggle Filters\n        </button>{' '}\n        <button type=\"button\" onClick={clearFilters}>\n          Clear Filters\n        </button>\n      </div>\n      <FilterContext.Provider value={filters}>\n        <DataGrid\n          className={filters.enabled ? filterContainerClassname : undefined}\n          columns={columns}\n          rows={filteredRows}\n          headerRowHeight={filters.enabled ? 70 : undefined}\n          direction={direction}\n        />\n      </FilterContext.Provider>\n      <datalist id=\"developers\">\n        {developerOptions.map(({ label, value }) => (\n          <option key={value} value={value}>\n            {label}\n          </option>\n        ))}\n      </datalist>\n    </div>\n  );\n}\n\nfunction FilterRenderer<R, SR, T extends HTMLOrSVGElement>({\n  isCellSelected,\n  column,\n  children\n}: HeaderRendererProps<R, SR> & {\n  children: (args: {\n    ref: React.RefObject<T>;\n    tabIndex: number;\n    filters: Filter;\n  }) => React.ReactElement;\n}) {\n  const filters = useContext(FilterContext)!;\n  const { ref, tabIndex } = useFocusRef<T>(isCellSelected);\n\n  return (\n    <>\n      <div>{column.name}</div>\n      {filters.enabled && <div>{children({ ref, tabIndex, filters })}</div>}\n    </>\n  );\n}\n\nfunction createRows() {\n  const rows: Row[] = [];\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.floor(Math.random() * 4)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.floor(Math.random() * 4)],\n      developer: faker.name.fullName()\n    });\n  }\n  return rows;\n}\n","import { useState } from 'react';\nimport { css } from '@linaria/core';\nimport { faker } from '@faker-js/faker';\n\nimport DataGrid from '../../src';\nimport type { Column } from '../../src';\nimport type { Props } from './types';\n\nconst loadMoreRowsClassname = css`\n  inline-size: 180px;\n  padding-block: 8px;\n  padding-inline: 16px;\n  position: absolute;\n  inset-block-end: 8px;\n  inset-inline-end: 8px;\n  color: white;\n  line-height: 35px;\n  background: rgb(0 0 0 / 0.6);\n`;\n\ninterface Row {\n  id: string;\n  email: string;\n  title: string;\n  firstName: string;\n  lastName: string;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID'\n  },\n  {\n    key: 'title',\n    name: 'Title'\n  },\n  {\n    key: 'firstName',\n    name: 'First Name'\n  },\n  {\n    key: 'lastName',\n    name: 'Last Name'\n  },\n  {\n    key: 'email',\n    name: 'Email'\n  }\n];\n\nfunction createFakeRowObjectData(index: number): Row {\n  return {\n    id: `id_${index}`,\n    email: faker.internet.email(),\n    title: faker.name.prefix(),\n    firstName: faker.name.firstName(),\n    lastName: faker.name.lastName()\n  };\n}\n\nfunction createRows(numberOfRows: number): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 0; i < numberOfRows; i++) {\n    rows[i] = createFakeRowObjectData(i);\n  }\n\n  return rows;\n}\n\nfunction isAtBottom({ currentTarget }: React.UIEvent<HTMLDivElement>): boolean {\n  return currentTarget.scrollTop + 10 >= currentTarget.scrollHeight - currentTarget.clientHeight;\n}\n\nfunction loadMoreRows(newRowsCount: number, length: number): Promise<Row[]> {\n  return new Promise((resolve) => {\n    const newRows: Row[] = [];\n\n    for (let i = 0; i < newRowsCount; i++) {\n      newRows[i] = createFakeRowObjectData(i + length);\n    }\n\n    setTimeout(() => resolve(newRows), 1000);\n  });\n}\n\nexport default function InfiniteScrolling({ direction }: Props) {\n  const [rows, setRows] = useState(() => createRows(50));\n  const [isLoading, setIsLoading] = useState(false);\n\n  async function handleScroll(event: React.UIEvent<HTMLDivElement>) {\n    if (isLoading || !isAtBottom(event)) return;\n\n    setIsLoading(true);\n\n    const newRows = await loadMoreRows(50, rows.length);\n\n    setRows([...rows, ...newRows]);\n    setIsLoading(false);\n  }\n\n  return (\n    <>\n      <DataGrid\n        columns={columns}\n        rows={rows}\n        rowKeyGetter={rowKeyGetter}\n        onRowsChange={setRows}\n        rowHeight={30}\n        onScroll={handleScroll}\n        className=\"fill-grid\"\n        direction={direction}\n      />\n      {isLoading && <div className={loadMoreRowsClassname}>Loading more rows...</div>}\n    </>\n  );\n}\n","import { css } from '@linaria/core';\nimport { useFocusRef } from '../../../../src';\n\nconst cellExpandClassname = css`\n  /* needed on chrome */\n  float: right;\n  float: inline-end;\n  display: table;\n  block-size: 100%;\n\n  > span {\n    display: table-cell;\n    vertical-align: middle;\n    cursor: pointer;\n  }\n`;\n\ninterface CellExpanderFormatterProps {\n  isCellSelected: boolean;\n  expanded: boolean;\n  onCellExpand: () => void;\n}\n\nexport function CellExpanderFormatter({\n  isCellSelected,\n  expanded,\n  onCellExpand\n}: CellExpanderFormatterProps) {\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown(e: React.KeyboardEvent<HTMLSpanElement>) {\n    if (e.key === ' ' || e.key === 'Enter') {\n      e.preventDefault();\n      onCellExpand();\n    }\n  }\n\n  return (\n    <div className={cellExpandClassname}>\n      <span onClick={onCellExpand} onKeyDown={handleKeyDown}>\n        <span ref={ref} tabIndex={tabIndex}>\n          {expanded ? '\\u25BC' : '\\u25B6'}\n        </span>\n      </span>\n    </div>\n  );\n}\n","import { useEffect, useMemo, useRef, useState } from 'react';\nimport { css } from '@linaria/core';\nimport { faker } from '@faker-js/faker';\n\nimport DataGrid from '../../src';\nimport type { Column, RowsChangeData, DataGridHandle } from '../../src';\nimport { CellExpanderFormatter } from './components/Formatters';\nimport type { Props } from './types';\nimport type { Direction } from '../../src/types';\n\ntype DepartmentRow =\n  | {\n      type: 'MASTER';\n      id: number;\n      department: string;\n      expanded: boolean;\n    }\n  | {\n      type: 'DETAIL';\n      id: number;\n      parentId: number;\n    };\n\ninterface ProductRow {\n  id: number;\n  product: string;\n  description: string;\n  price: string;\n}\n\nfunction createDepartments(): readonly DepartmentRow[] {\n  const departments: DepartmentRow[] = [];\n  for (let i = 1; i < 30; i++) {\n    departments.push({\n      type: 'MASTER',\n      id: i,\n      department: faker.commerce.department(),\n      expanded: false\n    });\n  }\n  return departments;\n}\n\nconst productsMap = new Map<number, readonly ProductRow[]>();\nfunction getProducts(parentId: number): readonly ProductRow[] {\n  if (productsMap.has(parentId)) return productsMap.get(parentId)!;\n  const products: ProductRow[] = [];\n  for (let i = 0; i < 20; i++) {\n    products.push({\n      id: i,\n      product: faker.commerce.productName(),\n      description: faker.commerce.productDescription(),\n      price: faker.commerce.price()\n    });\n  }\n  productsMap.set(parentId, products);\n  return products;\n}\n\nconst productColumns: readonly Column<ProductRow>[] = [\n  { key: 'id', name: 'ID', width: 35 },\n  { key: 'product', name: 'Product' },\n  { key: 'description', name: 'Description' },\n  { key: 'price', name: 'Price' }\n];\n\nexport default function MasterDetail({ direction }: Props) {\n  const columns = useMemo((): readonly Column<DepartmentRow>[] => {\n    return [\n      {\n        key: 'expanded',\n        name: '',\n        minWidth: 30,\n        width: 30,\n        colSpan(args) {\n          return args.type === 'ROW' && args.row.type === 'DETAIL' ? 3 : undefined;\n        },\n        cellClass(row) {\n          return row.type === 'DETAIL'\n            ? css`\n                padding: 24px;\n              `\n            : undefined;\n        },\n        formatter({ row, isCellSelected, onRowChange }) {\n          if (row.type === 'DETAIL') {\n            return (\n              <ProductGrid\n                isCellSelected={isCellSelected}\n                parentId={row.parentId}\n                direction={direction}\n              />\n            );\n          }\n\n          return (\n            <CellExpanderFormatter\n              expanded={row.expanded}\n              isCellSelected={isCellSelected}\n              onCellExpand={() => {\n                onRowChange({ ...row, expanded: !row.expanded });\n              }}\n            />\n          );\n        }\n      },\n      { key: 'id', name: 'ID', width: 35 },\n      { key: 'department', name: 'Department' }\n    ];\n  }, [direction]);\n  const [rows, setRows] = useState(createDepartments);\n\n  function onRowsChange(rows: DepartmentRow[], { indexes }: RowsChangeData<DepartmentRow>) {\n    const row = rows[indexes[0]];\n    if (row.type === 'MASTER') {\n      if (!row.expanded) {\n        rows.splice(indexes[0] + 1, 1);\n      } else {\n        rows.splice(indexes[0] + 1, 0, {\n          type: 'DETAIL',\n          id: row.id + 100,\n          parentId: row.id\n        });\n      }\n      setRows(rows);\n    }\n  }\n\n  return (\n    <DataGrid\n      rowKeyGetter={rowKeyGetter}\n      columns={columns}\n      rows={rows}\n      onRowsChange={onRowsChange}\n      headerRowHeight={45}\n      rowHeight={(args) => (args.type === 'ROW' && args.row.type === 'DETAIL' ? 300 : 45)}\n      className=\"fill-grid\"\n      enableVirtualization={false}\n      direction={direction}\n      onCellKeyDown={(_, event) => {\n        if (event.isDefaultPrevented()) {\n          // skip parent grid keyboard navigation if nested grid handled it\n          event.preventGridDefault();\n        }\n      }}\n    />\n  );\n}\n\nfunction ProductGrid({\n  parentId,\n  isCellSelected,\n  direction\n}: {\n  parentId: number;\n  isCellSelected: boolean;\n  direction: Direction;\n}) {\n  const gridRef = useRef<DataGridHandle>(null);\n  useEffect(() => {\n    if (!isCellSelected) return;\n    gridRef\n      .current!.element!.querySelector<HTMLDivElement>('[tabindex=\"0\"]')!\n      .focus({ preventScroll: true });\n  }, [isCellSelected]);\n  const products = getProducts(parentId);\n\n  return (\n    <DataGrid\n      ref={gridRef}\n      rows={products}\n      columns={productColumns}\n      rowKeyGetter={rowKeyGetter}\n      style={{ blockSize: 250 }}\n      direction={direction}\n    />\n  );\n}\n\nfunction rowKeyGetter(row: DepartmentRow | ProductRow) {\n  return row.id;\n}\n","import { useMemo } from 'react';\nimport DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\nimport type { Props } from './types';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(1000).keys()];\n\nfunction cellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nexport default function MillionCells({ direction }: Props) {\n  const columns = useMemo((): readonly Column<Row>[] => {\n    const columns: Column<Row>[] = [];\n\n    for (let i = 0; i < 1000; i++) {\n      const key = String(i);\n      columns.push({\n        key,\n        name: key,\n        frozen: i < 5,\n        width: 80,\n        resizable: true,\n        formatter: cellFormatter\n      });\n    }\n\n    return columns;\n  }, []);\n\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      rowHeight={22}\n      className=\"fill-grid\"\n      direction={direction}\n    />\n  );\n}\n","import { useState } from 'react';\nimport DataGrid, { SelectColumn } from '../../src';\nimport type { Column } from '../../src';\nimport type { Props } from './types';\n\nfunction EmptyRowsRenderer() {\n  return (\n    <div style={{ textAlign: 'center', gridColumn: '1/-1' }}>\n      Nothing to show{' '}\n      <span lang=\"ja\" title=\"ショボーン\">\n        (´・ω・`)\n      </span>\n    </div>\n  );\n}\n\ninterface Row {\n  id: number;\n  title: string;\n  count: number;\n}\n\nconst columns: readonly Column<Row>[] = [\n  SelectColumn,\n  { key: 'id', name: 'ID' },\n  { key: 'title', name: 'Title' },\n  { key: 'count', name: 'Count' }\n];\n\nconst rows: readonly Row[] = [];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nexport default function NoRows({ direction }: Props) {\n  const [selectedRows, onSelectedRowsChange] = useState((): ReadonlySet<number> => new Set());\n\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      renderers={{ noRowsFallback: <EmptyRowsRenderer /> }}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={onSelectedRowsChange}\n      rowKeyGetter={rowKeyGetter}\n      className=\"small-grid\"\n      direction={direction}\n    />\n  );\n}\n","import DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\nimport type { Props } from './types';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(100).keys()];\n\nfunction cellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nconst columns: Column<Row>[] = [];\n\nfor (let i = 0; i < 50; i++) {\n  const key = String(i);\n  columns.push({\n    key,\n    name: key,\n    formatter: cellFormatter\n  });\n}\n\nexport default function ResizableGrid({ direction }: Props) {\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      className=\"fill-grid\"\n      style={{ resize: 'both' }}\n      direction={direction}\n    />\n  );\n}\n","import { useDrag, useDrop } from 'react-dnd';\nimport clsx from 'clsx';\nimport { css } from '@linaria/core';\n\nimport { Row } from '../../../../src';\nimport type { RowRendererProps } from '../../../../src';\n\nconst rowDraggingClassname = css`\n  opacity: 0.5;\n`;\n\nconst rowOverClassname = css`\n  background-color: #ececec;\n`;\n\ninterface DraggableRowRenderProps<R, SR> extends RowRendererProps<R, SR> {\n  onRowReorder: (sourceIndex: number, targetIndex: number) => void;\n}\n\nexport function DraggableRowRenderer<R, SR>({\n  rowIdx,\n  isRowSelected,\n  className,\n  onRowReorder,\n  ...props\n}: DraggableRowRenderProps<R, SR>) {\n  const [{ isDragging }, drag] = useDrag({\n    type: 'ROW_DRAG',\n    item: { index: rowIdx },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n\n  const [{ isOver }, drop] = useDrop({\n    accept: 'ROW_DRAG',\n    drop({ index }: { index: number }) {\n      onRowReorder(index, rowIdx);\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n\n  className = clsx(className, {\n    [rowDraggingClassname]: isDragging,\n    [rowOverClassname]: isOver\n  });\n\n  return (\n    <Row\n      ref={(ref) => {\n        if (ref) {\n          drag(ref.firstElementChild);\n        }\n        drop(ref);\n      }}\n      rowIdx={rowIdx}\n      isRowSelected={isRowSelected}\n      className={className}\n      {...props}\n    />\n  );\n}\n","import { useCallback, useState } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport { DraggableRowRenderer } from './components/RowRenderers';\nimport DataGrid, { textEditor } from '../../src';\nimport type { Column, RowRendererProps } from '../../src';\nimport type { Props } from './types';\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    editor: textEditor\n  },\n  {\n    key: 'priority',\n    name: 'Priority'\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type'\n  },\n  {\n    key: 'complete',\n    name: '% Complete'\n  }\n];\n\nexport default function RowsReordering({ direction }: Props) {\n  const [rows, setRows] = useState(createRows);\n\n  const rowRenderer = useCallback((key: React.Key, props: RowRendererProps<Row>) => {\n    function onRowReorder(fromIndex: number, toIndex: number) {\n      setRows((rows) => {\n        const newRows = [...rows];\n        newRows.splice(toIndex, 0, newRows.splice(fromIndex, 1)[0]);\n        return newRows;\n      });\n    }\n\n    return <DraggableRowRenderer key={key} {...props} onRowReorder={onRowReorder} />;\n  }, []);\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <DataGrid\n        columns={columns}\n        rows={rows}\n        onRowsChange={setRows}\n        renderers={{ rowRenderer }}\n        direction={direction}\n      />\n    </DndProvider>\n  );\n}\n","import { useState, useRef } from 'react';\nimport DataGrid from '../../src';\nimport type { Column, DataGridHandle } from '../../src';\nimport type { Props } from './types';\n\ninterface Row {\n  id: number;\n  title: string;\n  count: number;\n}\n\nconst columns: readonly Column<Row>[] = [\n  { key: 'id', name: 'ID' },\n  { key: 'title', name: 'Title' },\n  { key: 'count', name: 'Count' }\n];\n\nexport default function ScrollToRow({ direction }: Props) {\n  const [rows] = useState(() => {\n    const rows: Row[] = [];\n\n    for (let i = 0; i < 1000; i++) {\n      rows.push({\n        id: i,\n        title: `Title ${i}`,\n        count: i * 1000\n      });\n    }\n\n    return rows;\n  });\n  const [value, setValue] = useState(10);\n  const gridRef = useRef<DataGridHandle>(null);\n\n  return (\n    <>\n      <div style={{ marginBlockEnd: 5 }}>\n        <span style={{ marginInlineEnd: 5 }}>Row index: </span>\n        <input\n          style={{ inlineSize: 50 }}\n          type=\"number\"\n          value={value}\n          onChange={(event) => setValue(event.target.valueAsNumber)}\n        />\n        <button type=\"button\" onClick={() => gridRef.current!.scrollToRow(value)}>\n          Scroll to row\n        </button>\n      </div>\n      <DataGrid ref={gridRef} columns={columns} rows={rows} direction={direction} />\n    </>\n  );\n}\n","import { css } from '@linaria/core';\nimport { useFocusRef } from '../../../../src';\n\nconst childRowActionCrossClassname = css`\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background: grey;\n  }\n\n  &::before {\n    inset-inline-start: 21px;\n    inline-size: 1px;\n    block-size: 100%;\n  }\n\n  &::after {\n    inset-block-start: 50%;\n    inset-inline-start: 20px;\n    block-size: 1px;\n    inline-size: 15px;\n  }\n\n  &:hover {\n    background: red;\n  }\n`;\n\nconst childRowButtonClassname = css`\n  cursor: pointer;\n  position: absolute;\n  inset-inline-start: 21px;\n  transform: translateX(-50%);\n  filter: grayscale(1);\n  &:dir(rtl) {\n    transform: translateX(50%);\n  }\n`;\n\ninterface ChildRowDeleteButtonProps {\n  isCellSelected: boolean;\n  isDeleteSubRowEnabled: boolean;\n  onDeleteSubRow: () => void;\n}\n\nexport function ChildRowDeleteButton({\n  isCellSelected,\n  onDeleteSubRow,\n  isDeleteSubRowEnabled\n}: ChildRowDeleteButtonProps) {\n  const { ref, tabIndex } = useFocusRef<HTMLSpanElement>(isCellSelected);\n\n  function handleKeyDown(e: React.KeyboardEvent<HTMLSpanElement>) {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      onDeleteSubRow();\n    }\n  }\n\n  return (\n    <>\n      <div className={childRowActionCrossClassname} />\n      {isDeleteSubRowEnabled && (\n        <div className={childRowButtonClassname} onClick={onDeleteSubRow}>\n          <span ref={ref} tabIndex={tabIndex} onKeyDown={handleKeyDown}>\n            ❌\n          </span>\n        </div>\n      )}\n    </>\n  );\n}\n","import { useState, useReducer, useMemo } from 'react';\n\nimport DataGrid from '../../src';\nimport type { Column } from '../../src';\nimport { CellExpanderFormatter, ChildRowDeleteButton } from './components/Formatters';\nimport type { Props } from './types';\n\ninterface Row {\n  id: string;\n  name: string;\n  format: string;\n  position: string;\n  price: number;\n  children?: Row[];\n  parentId?: string;\n  isExpanded?: boolean;\n}\n\ninterface Action {\n  type: 'toggleSubRow' | 'deleteSubRow';\n  id: string;\n}\n\nfunction createRows(): Row[] {\n  const rows = [];\n  for (let i = 0; i < 100; i++) {\n    const price = Math.random() * 30;\n    const id = `row${i}`;\n    const row: Row = {\n      id,\n      name: `supplier ${i}`,\n      format: `package ${i}`,\n      position: 'Run of site',\n      price,\n      children: [\n        {\n          id: `${id}-0`,\n          parentId: id,\n          name: `supplier ${i}`,\n          format: '728x90',\n          position: 'run of site',\n          price: price / 2\n        },\n        {\n          id: `${id}-1`,\n          parentId: id,\n          name: `supplier ${i}`,\n          format: '480x600',\n          position: 'run of site',\n          price: price * 0.25\n        },\n        {\n          id: `${id}-2`,\n          parentId: id,\n          name: `supplier ${i}`,\n          format: '328x70',\n          position: 'run of site',\n          price: price * 0.25\n        }\n      ],\n      isExpanded: false\n    };\n    rows.push(row);\n  }\n  return rows;\n}\n\nfunction toggleSubRow(rows: Row[], id: string): Row[] {\n  const rowIndex = rows.findIndex((r) => r.id === id);\n  const row = rows[rowIndex];\n  const { children } = row;\n  if (!children) return rows;\n\n  const newRows = [...rows];\n  newRows[rowIndex] = { ...row, isExpanded: !row.isExpanded };\n  if (!row.isExpanded) {\n    newRows.splice(rowIndex + 1, 0, ...children);\n  } else {\n    newRows.splice(rowIndex + 1, children.length);\n  }\n  return newRows;\n}\n\nfunction deleteSubRow(rows: Row[], id: string): Row[] {\n  const row = rows.find((r) => r.id === id);\n  if (row?.parentId === undefined) return rows;\n\n  // Remove sub row from flattened rows.\n  const newRows = rows.filter((r) => r.id !== id);\n\n  // Remove sub row from parent row.\n  const parentRowIndex = newRows.findIndex((r) => r.id === row.parentId);\n  const { children } = newRows[parentRowIndex];\n  if (children) {\n    const newChildren = children.filter((sr) => sr.id !== id);\n    newRows[parentRowIndex] = { ...newRows[parentRowIndex], children: newChildren };\n  }\n\n  return newRows;\n}\n\nfunction reducer(rows: Row[], { type, id }: Action): Row[] {\n  switch (type) {\n    case 'toggleSubRow':\n      return toggleSubRow(rows, id);\n    case 'deleteSubRow':\n      return deleteSubRow(rows, id);\n    default:\n      return rows;\n  }\n}\n\nconst defaultRows = createRows();\n\nexport default function TreeView({ direction }: Props) {\n  const [rows, dispatch] = useReducer(reducer, defaultRows);\n  const [allowDelete, setAllowDelete] = useState(true);\n  const columns: Column<Row>[] = useMemo(() => {\n    return [\n      {\n        key: 'id',\n        name: 'id',\n        frozen: true\n      },\n      {\n        key: 'name',\n        name: 'Name'\n      },\n      {\n        key: 'format',\n        name: 'format',\n        formatter({ row, isCellSelected }) {\n          const hasChildren = row.children !== undefined;\n          const style = !hasChildren ? { marginInlineStart: 30 } : undefined;\n          return (\n            <>\n              {hasChildren && (\n                <CellExpanderFormatter\n                  isCellSelected={isCellSelected}\n                  expanded={row.isExpanded === true}\n                  onCellExpand={() => dispatch({ id: row.id, type: 'toggleSubRow' })}\n                />\n              )}\n              <div className=\"rdg-cell-value\">\n                {!hasChildren && (\n                  <ChildRowDeleteButton\n                    isCellSelected={isCellSelected}\n                    isDeleteSubRowEnabled={allowDelete}\n                    onDeleteSubRow={() => dispatch({ id: row.id, type: 'deleteSubRow' })}\n                  />\n                )}\n                <div style={style}>{row.format}</div>\n              </div>\n            </>\n          );\n        }\n      },\n      {\n        key: 'position',\n        name: 'position'\n      },\n      {\n        key: 'price',\n        name: 'price'\n      }\n    ];\n  }, [allowDelete]);\n\n  return (\n    <>\n      <label>\n        Allow Delete\n        <input\n          type=\"checkbox\"\n          checked={allowDelete}\n          onChange={() => setAllowDelete(!allowDelete)}\n        />\n      </label>\n      <DataGrid columns={columns} rows={rows} className=\"big-grid\" direction={direction} />\n    </>\n  );\n}\n","import { useMemo } from 'react';\n\nimport DataGrid from '../../src';\nimport type { Column, FormatterProps } from '../../src';\nimport type { Props } from './types';\n\ntype Row = number;\nconst rows: readonly Row[] = [...Array(500).keys()];\n\nfunction cellFormatter(props: FormatterProps<Row>) {\n  return (\n    <>\n      {props.column.key}&times;{props.row}\n    </>\n  );\n}\n\nexport default function VariableRowHeight({ direction }: Props) {\n  const columns = useMemo((): readonly Column<Row>[] => {\n    const columns: Column<Row>[] = [];\n\n    for (let i = 0; i < 30; i++) {\n      const key = String(i);\n      columns.push({\n        key,\n        name: key,\n        frozen: i < 5,\n        resizable: true,\n        formatter: cellFormatter\n      });\n    }\n\n    return columns;\n  }, []);\n\n  return (\n    <DataGrid\n      columns={columns}\n      rows={rows}\n      rowHeight={rowHeight}\n      className=\"fill-grid\"\n      direction={direction}\n    />\n  );\n}\n\nfunction rowHeight() {\n  // should be based on the content of the row\n  return 25 + Math.round(Math.random() * 75);\n}\n","import { useState } from 'react';\nimport { css } from '@linaria/core';\n\nimport DataGrid from '../../src';\nimport type { Column } from '../../src';\nimport type { Props } from './types';\n\nconst rangeClassname = css`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n`;\n\nconst transitionClassname = css`\n  transition: grid-template-rows 0.5s ease;\n\n  > :is(.rdg-header-row, .rdg-row) {\n    transition: line-height 0.5s ease;\n  }\n`;\n\ninterface Row {\n  readonly id: number;\n  readonly task: string;\n  readonly complete: number;\n  readonly priority: string;\n  readonly issueType: string;\n}\n\nfunction createRows(): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    resizable: true\n  },\n  {\n    key: 'priority',\n    name: 'Priority',\n    resizable: true\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type',\n    resizable: true\n  },\n  {\n    key: 'complete',\n    name: '% Complete',\n    resizable: true\n  }\n];\n\nconst rows = createRows();\n\nexport default function ColumnsReordering({ direction }: Props) {\n  const [rowHeight, setRowHeight] = useState(30);\n\n  return (\n    <>\n      <div className={rangeClassname}>\n        Row Height\n        <button onClick={() => setRowHeight(30)}>Small</button>\n        <button onClick={() => setRowHeight(60)}>Medium</button>\n        <button onClick={() => setRowHeight(90)}>Large</button>\n      </div>\n      <DataGrid\n        className={`${transitionClassname} fill-grid`}\n        columns={columns}\n        rows={rows}\n        direction={direction}\n        rowHeight={rowHeight}\n      />\n    </>\n  );\n}\n","import { StrictMode, useState } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { css } from '@linaria/core';\nimport { HashRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\n\nimport type { Direction } from '../src/types';\nimport Nav from './Nav';\n\nimport CommonFeatures from './demos/CommonFeatures';\nimport AllFeatures from './demos/AllFeatures';\nimport CellNavigation from './demos/CellNavigation';\nimport ColumnSpanning from './demos/ColumnSpanning';\nimport ColumnsReordering from './demos/ColumnsReordering';\nimport CustomizableRenderers from './demos/CustomizableRenderers';\nimport ContextMenuDemo from './demos/ContextMenu';\nimport Grouping from './demos/Grouping';\nimport HeaderFilters from './demos/HeaderFilters';\nimport InfiniteScrolling from './demos/InfiniteScrolling';\nimport MasterDetail from './demos/MasterDetail';\nimport MillionCells from './demos/MillionCells';\nimport NoRows from './demos/NoRows';\nimport ResizableGrid from './demos/Resizable';\nimport RowsReordering from './demos/RowsReordering';\nimport ScrollToRow from './demos/ScrollToRow';\nimport TreeView from './demos/TreeView';\nimport VariableRowHeight from './demos/VariableRowHeight';\nimport Animation from './demos/Animation';\n\ncss`\n  @at-root {\n    :root,\n    body {\n      padding: 0;\n      margin: 0;\n      font-family: sans-serif;\n    }\n\n    :root {\n      color-scheme: light dark;\n\n      @media (prefers-color-scheme: light) {\n        background-color: #fff;\n        color: #111;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        background-color: hsl(0deg 0% 10%);\n        color: #fff;\n      }\n    }\n\n    #root {\n      display: grid;\n      grid-template-columns: auto 1fr;\n    }\n\n    .rdg.fill-grid {\n      block-size: 100%;\n    }\n\n    .rdg.small-grid {\n      block-size: 300px;\n    }\n\n    .rdg.big-grid {\n      block-size: 600px;\n    }\n\n    .rdg-cell .Select {\n      max-height: 30px;\n      font-size: 12px;\n      font-weight: normal;\n    }\n  }\n`;\n\nconst mainClassname = css`\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  block-size: 100vh;\n  padding: 8px;\n  overflow: hidden;\n`;\n\nfunction Root() {\n  const [direction, setDirection] = useState<Direction>('ltr');\n  return (\n    <Router>\n      <Nav direction={direction} onDirectionChange={setDirection} />\n      <main className={mainClassname} dir={direction}>\n        <Routes>\n          <Route index element={<Navigate to=\"common-features\" replace />} />\n          <Route path=\"common-features\" element={<CommonFeatures direction={direction} />} />\n          <Route path=\"all-features\" element={<AllFeatures direction={direction} />} />\n          <Route path=\"cell-navigation\" element={<CellNavigation direction={direction} />} />\n          <Route path=\"column-spanning\" element={<ColumnSpanning direction={direction} />} />\n          <Route path=\"columns-reordering\" element={<ColumnsReordering direction={direction} />} />\n          <Route path=\"context-menu\" element={<ContextMenuDemo direction={direction} />} />\n          <Route\n            path=\"customizable-renderers\"\n            element={<CustomizableRenderers direction={direction} />}\n          />\n          <Route path=\"grouping\" element={<Grouping direction={direction} />} />\n          <Route path=\"header-filters\" element={<HeaderFilters direction={direction} />} />\n          <Route path=\"infinite-scrolling\" element={<InfiniteScrolling direction={direction} />} />\n          <Route path=\"master-detail\" element={<MasterDetail direction={direction} />} />\n          <Route path=\"million-cells\" element={<MillionCells direction={direction} />} />\n          <Route path=\"no-rows\" element={<NoRows direction={direction} />} />\n          <Route path=\"resizable-grid\" element={<ResizableGrid direction={direction} />} />\n          <Route path=\"rows-reordering\" element={<RowsReordering direction={direction} />} />\n          <Route path=\"scroll-to-row\" element={<ScrollToRow direction={direction} />} />\n          <Route path=\"tree-view\" element={<TreeView direction={direction} />} />\n          <Route path=\"variable-row-height\" element={<VariableRowHeight direction={direction} />} />\n          <Route path=\"animation\" element={<Animation direction={direction} />} />\n          <Route path=\"*\" element=\"Nothing to see here\" />\n        </Routes>\n      </main>\n    </Router>\n  );\n}\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <Root />\n  </StrictMode>\n);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"105\":\"b6524c54499c982f386b\",\"120\":\"b639b2ce9b732b17f227\",\"159\":\"c298eb1c329079dfd56d\",\"168\":\"5c9aa1aeca3c12b9d952\",\"392\":\"530aa8a86e78ddb8a8ca\",\"762\":\"3d14eebdda7b3c46b936\",\"856\":\"3439adf514be4eae97c5\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkreact_data_grid\"] = globalThis[\"webpackChunkreact_data_grid\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [359], () => (__webpack_require__(5985)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","Nav","direction","onDirectionChange","className","to","end","getActiveClassname","href","target","rel","type","checked","onChange","isActive","useLayoutEffect","window","useEffect","useOriginalLayoutEffect","useFocusRef","isSelected","ref","useRef","current","focus","preventScroll","tabIndex","DataGridDefaultRenderersContext","createContext","undefined","DataGridDefaultRenderersProvider","Provider","useDefaultRenderers","useContext","SelectCellFormatter","value","isCellSelected","disabled","ariaLabel","ariaLabelledBy","checkboxFormatter","RowSelectionContext","RowSelectionProvider","RowSelectionChangeContext","RowSelectionChangeProvider","useRowSelection","rowSelectionContext","rowSelectionChangeContext","Error","SELECT_COLUMN_KEY","HeaderRenderer","props","isRowSelected","onRowSelectionChange","SelectFormatter","isShiftClick","row","SelectGroupFormatter","SelectColumn","key","name","width","minWidth","maxWidth","resizable","sortable","frozen","headerRenderer","formatter","groupFormatter","textEditorClassname","autoFocusAndSelect","input","select","textEditor","column","onRowChange","onClose","event","onBlur","rowClassname","rowSelectedClassname","valueFormatter","toggleGroupFormatter","ToggleGroup","groupKey","isExpanded","toggleGroup","d","onKeyDown","viewBox","height","min","max","round","floor","sign","abs","Math","assertIsValidKeyGetter","keyGetter","clampColumnWidth","getColSpan","lastFrozenColumnIndex","args","colSpan","Number","isInteger","idx","useLatestFunc","fn","callbackFn","useCallback","sortDirection","priority","onSort","SortableHeaderCell","children","sortStatus","onClick","ctrlKey","metaKey","preventDefault","getRowStyle","rowIdx","getCellStyle","gridColumnStart","gridColumnEnd","insetInlineStart","getCellClassname","extraClasses","clsx","isLastFrozenColumn","scrollIntoView","element","inline","block","useRovingCellRef","skipCellFocusRef","isChildFocused","setIsChildFocused","useState","cell","contains","document","activeElement","onFocus","currentTarget","HeaderCell","onColumnResize","sortColumns","onSortColumnsChange","selectCell","shouldFocusGrid","isRtl","sortIndex","findIndex","sort","columnKey","sortColumn","length","ariaSort","headerCellClass","defaultHeaderRenderer","role","style","onDoubleClick","right","left","getBoundingClientRect","clientX","onPointerDown","pointerType","buttons","pointerId","offset","onPointerMove","setPointerCapture","addEventListener","onLostPointerCapture","removeEventListener","ctrlClick","sortDescendingFirst","nextSort","nextSortColumn","nextSortColumns","splice","HeaderRow","columns","selectedCellIdx","cells","index","push","memo","createCellEvent","defaultPrevented","cellEvent","preventGridDefault","isGridDefaultPrevented","this","isDefaultPrevented","Object","setPrototypeOf","getPrototypeOf","isSelectedCellEditable","selectedPosition","rows","isGroupRow","isCellEditable","editor","rowGroup","editable","getSelectedCellColSpan","topSummaryRows","bottomSummaryRows","topSummaryRowsCount","minRowIdx","Cell","isCopied","isDraggedOver","dragHandle","onContextMenu","cellClass","selectCellWrapper","openEditor","newRow","Row","gridRowStart","copiedCellIdx","draggedOverCellIdx","viewportColumns","selectedCellEditor","selectedCellDragHandle","onCellClick","onCellDoubleClick","onCellContextMenu","rowClass","setDraggedOverRowIdx","onMouseEnter","handleRowChange","RowComponent","forwardRef","defaultRowRenderer","GroupCell","id","childRows","groupColumnIndex","toggleGroupWrapper","isLevelMatching","cursor","GroupedRow","level","selectGroup","map","SummaryCell","summaryCellClass","summaryFormatter","SummaryRow","top","bottom","lastTopRowIdx","ariaRowIndex","isTop","nonInputKeys","Set","isCtrlKeyHeldDown","e","EditCell","closeEditor","navigate","frameRequestRef","commitOnOutsideClick","editorOptions","commitOnOutsideMouseDown","cancelFrameRequest","cancelAnimationFrame","commitChanges","onWindowCaptureMouseDown","requestAnimationFrame","capture","renderFormatter","mode","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","matches","onEditorNavigation","onMouseDownCapture","DragHandle","latestDraggedOverRowIdx","onRowsChange","onFill","setDragging","updateRows","startRowIdx","endRowIdx","sourceRow","updatedRows","indexes","i","updatedRow","targetRow","onMouseDown","onMouseOver","onMouseUp","overRowIdx","handleDragEnd","stopPropagation","sortIcon","sortPriority","nativeEvent","shiftKey","renderMeasuringCells","DataGrid","rawColumns","rawRows","rowKeyGetter","rowHeight","rawRowHeight","headerRowHeight","rawHeaderRowHeight","summaryRowHeight","rawSummaryRowHeight","selectedRows","onSelectedRowsChange","defaultColumnOptions","groupBy","rawGroupBy","rowGrouper","expandedGroupIds","onExpandedGroupIdsChange","onCellKeyDown","onScroll","onCopy","onPaste","enableVirtualization","rawEnableVirtualization","renderers","rawDirection","ariaDescribedBy","testId","defaultRenderers","rowRenderer","defaultSortStatus","defaultCheckboxFormatter","noRowsFallback","bottomSummaryRowsCount","summaryRowsCount","headerAndTopSummaryRowsCount","scrollTop","setScrollTop","scrollLeft","setScrollLeft","columnWidths","setColumnWidths","Map","setSelectedPosition","copiedCell","setCopiedCell","isDragging","draggedOverRowIdx","setOverRowIdx","prevSelectedPosition","lastSelectedRowIdx","rowRef","gridRef","gridWidth","gridHeight","isWidthInitialized","inlineSize","setInlineSize","blockSize","setBlockSize","setWidthInitialized","ResizeObserver","clientWidth","clientHeight","offsetWidth","offsetHeight","initialHeight","resizeObserver","entries","size","contentBoxSize","observe","disconnect","useGridDimensions","isSelectable","leftKey","rightKey","defaultGridComponents","useMemo","allRowsSelected","every","has","colSpanColumns","colOverscanStartIdx","colOverscanEndIdx","templateColumns","layoutCssVars","columnMetrics","totalFrozenColumnWidth","viewportWidth","defaultWidth","defaultMinWidth","defaultMaxWidth","defaultFormatter","defaultSortable","defaultResizable","rawColumn","includes","aKey","frozenA","bKey","frozenB","indexOf","forEach","get","set","columnMetric","gridTemplateColumns","join","viewportLeft","viewportRight","lastColIdx","firstUnfrozenColumnIdx","colVisibleStartIdx","colVisibleEndIdx","useCalculatedColumns","rowOverscanStartIdx","rowOverscanEndIdx","rowsCount","totalRowHeight","gridTemplateRows","getRowTop","getRowHeight","findRowIdx","groupedRows","groupRows","groupByKey","remainingGroupByKeys","startRowIndex","groupRowsCount","groups","childGroups","childRowsCount","allGroupRows","flattenedRows","expandGroup","parentId","arr","Array","isArray","keys","posInSet","groupRow","setSize","add","rowPositions","currentRowHeight","position","validateRowIdx","start","middle","currentOffset","overscanThreshold","rowVisibleStartIdx","rowVisibleEndIdx","useViewportRows","flexWidthViewportColumns","startIdx","updateStartIdx","colIdx","filter","useViewportColumns","hasGroups","minColIdx","maxColIdx","maxRowIdx","selectedCellIsWithinSelectionBounds","isCellWithinSelectionBounds","selectedCellIsWithinViewportBounds","isCellWithinViewportBounds","handleColumnResizeLatest","newTemplateColumns","measuredWidth","querySelector","measuredWidthPx","newColumnWidths","onSortColumnsChangeLatest","onCellClickLatest","onCellDoubleClickLatest","onCellContextMenuLatest","selectRowLatest","selectRow","handleFormatterRowChangeLatest","updateRow","selectViewportCellLatest","enableEditor","selectGroupLatest","selectHeaderCellLatest","selectTopSummaryCellLatest","summaryRow","selectBottomSummaryCellLatest","toggleGroupLatest","isSamePosition","grid","measuringCell","useImperativeHandle","scrollToColumn","scrollToRow","scrollTo","behavior","newSelectedRows","rowKey","delete","selectAllRows","childRow","previousRowIdx","step","expandedGroupId","newExpandedGroupIds","handleKeyDown","Element","isCellEvent","closest","isRowEvent","keyCode","vKey","getRawRowIdx","sourceColumnKey","handleCopy","targetColumn","targetColumnKey","handlePaste","isRowIdxWithinViewportBounds","isDefaultCellInput","originalRow","handleCellInput","rawRowIdx","commitEditorChanges","isColIdxWithinSelectionBounds","isCellAtRightBoundary","cellNavigationMode","canExitGrid","nextPosition","parentRowIdx","parentRow","nextRowY","getNextPosition","nextSelectedCellPosition","currentPosition","currentIdx","isCellWithinBounds","nextIdx","nextRowIdx","setColSpan","moveRight","columnsCount","isBeforeFirstColumn","getNextSelectedCellPosition","getDraggedOverCellIdx","currentRowIdx","getDragHandle","getCellEditor","getRowViewportColumns","selectedColumn","slice","templateRows","isGroupRowFocused","scrollPaddingInlineStart","scrollPaddingBlock","getLayoutCssVars","dir","flushSync","summaryRowIdx","isSummaryRowSelected","rowElements","selectedIdx","selectedRowIdx","viewportRowIdx","isRowOutsideViewport","rowColumns","isGroupRowSelected","cr","GroupRow","c","getViewportRows","p1","p2","async","getGridContent","gridElement","renderToStaticMarkup","createElement","innerHTML","cloneElement","head","getRows","body","foot","selector","from","querySelectorAll","gridRow","gridCell","innerText","serialiseCellValue","formattedValue","replace","dateFormatter","Intl","DateTimeFormat","navigator","language","currencyFormatter","NumberFormat","currency","TimestampFormatter","timestamp","format","CurrencyFormatter","createRows","now","Date","title","client","faker","area","country","contact","assignee","progress","random","startTimestamp","endTimestamp","budget","transaction","account","version","available","getComparator","a","b","localeCompare","CommonFeatures","setRows","setSortColumns","setSelectedRows","countries","r","Collator","compare","totalCount","p","autoFocus","createPortal","open","valueAsNumber","yesCount","getColumns","summaryRows","sortedRows","compResult","comparator","ExportButton","onExport","fileName","content","data","downloadLink","download","url","URL","createObjectURL","click","revokeObjectURL","downloadFile","Blob","exportToCsv","utils","writeFile","Promise","all","wb","book_new","ws","aoa_to_sheet","book_append_sheet","exportToXlsx","jsPDF","autoTable","default","doc","orientation","unit","horizontalPageBreak","styles","cellPadding","fontSize","cellWidth","tableWidth","save","exportToPdf","exporting","setExporting","titles","ImageFormatter","backgroundImage","avatar","email","firstName","lastName","street","zipCode","date","toLocaleDateString","bs","catchPhrase","companyName","words","sentence","AllFeatures","isSecureContext","clipboard","writeText","incompatibleColumns","getRandomDate","getTime","task","complete","issueType","startDate","completeDate","CellNavigation","setCellNavigationMode","marginBlockEnd","changeRowNavigation","newRowIdx","loopOverColumnNavigation","cellFormatter","ColumnSpanning","String","DraggableHeaderRenderer","onColumnsReorder","drag","useDrag","item","collect","monitor","isOver","drop","useDrop","accept","canDrop","opacity","backgroundColor","createColumns","ColumnsReordering","setColumns","draggableColumns","handleColumnsReorder","sourceKey","targetKey","sourceColumnIndex","targetColumnIndex","reorderedColumns","reverse","DndProvider","backend","HTML5Backend","selectCellClassname","CustomizableRenderers","product","price","ContextMenuDemo","nextId","setNextId","useReducer","contextMenuProps","setContextMenuProps","menuRef","isContextMenuOpen","insertRow","insertRowIdx","Node","clientY","sports","reduce","prev","gold","silver","bronze","year","sport","athlete","r1","r2","options","Grouping","selectedOptions","setSelectedOptions","setExpandedGroupIds","option","enabled","newOptions","toggleOption","filterColumnClassName","filterClassname","FilterContext","inputStopPropagation","selectStopPropagation","HeaderFilters","filters","setFilters","developer","developerOptions","label","FilterRenderer","rest","list","isFinite","filteredRows","toLowerCase","startsWith","createFakeRowObjectData","InfiniteScrolling","numberOfRows","isLoading","setIsLoading","scrollHeight","isAtBottom","newRows","resolve","setTimeout","CellExpanderFormatter","expanded","onCellExpand","createDepartments","departments","department","productsMap","productColumns","MasterDetail","ProductGrid","_","products","description","getProducts","MillionCells","EmptyRowsRenderer","textAlign","gridColumn","lang","NoRows","ResizableGrid","resize","DraggableRowRenderer","onRowReorder","firstElementChild","RowsReordering","fromIndex","toIndex","ScrollToRow","count","setValue","marginInlineEnd","ChildRowDeleteButton","onDeleteSubRow","isDeleteSubRowEnabled","reducer","rowIndex","toggleSubRow","find","parentRowIndex","newChildren","sr","deleteSubRow","defaultRows","TreeView","dispatch","allowDelete","setAllowDelete","hasChildren","marginInlineStart","VariableRowHeight","setRowHeight","Root","setDirection","path","createRoot","getElementById","render","StrictMode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","result","chunkIds","notFulfilled","Infinity","fulfilled","j","obj","t","__esModule","then","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","timeout","nc","setAttribute","src","onScriptComplete","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","appendChild","Symbol","toStringTag","scriptUrl","importScripts","location","currentScript","installedChunks","installedChunkData","promise","reject","error","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}