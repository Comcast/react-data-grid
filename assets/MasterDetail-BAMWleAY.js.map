{"version":3,"file":"MasterDetail-BAMWleAY.js","names":["useMemo","useState","faker","css","DataGrid","CellExpanderFormatter","useDirection","DepartmentRow","type","id","department","expanded","parentId","ProductRow","product","description","price","createDepartments","departments","i","push","commerce","productsMap","Map","getProducts","has","get","products","productName","productDescription","set","productColumns","Column","key","name","width","MasterDetail","direction","columns","minWidth","colSpan","args","row","undefined","cellClass","renderCell","tabIndex","onRowChange","rows","setRows","onRowsChange","indexes","RowsChangeData","splice","rowKeyGetter","_","event","isDefaultPrevented","preventGridDefault","ProductGrid","Direction","blockSize","component"],"sources":["../../website/routes/MasterDetail.tsx?tsr-split=component"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { faker } from '@faker-js/faker';\nimport { createFileRoute } from '@tanstack/react-router';\nimport { css } from 'ecij';\n\nimport { DataGrid, type Column, type Direction, type RowsChangeData } from '../../src';\nimport { CellExpanderFormatter } from '../components';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute('/MasterDetail')({\n  component: MasterDetail\n});\n\ntype DepartmentRow =\n  | {\n      type: 'MASTER';\n      id: number;\n      department: string;\n      expanded: boolean;\n    }\n  | {\n      type: 'DETAIL';\n      id: number;\n      parentId: number;\n    };\n\ninterface ProductRow {\n  id: number;\n  product: string;\n  description: string;\n  price: string;\n}\n\nfunction createDepartments(): readonly DepartmentRow[] {\n  const departments: DepartmentRow[] = [];\n  for (let i = 1; i < 30; i++) {\n    departments.push({\n      type: 'MASTER',\n      id: i,\n      department: faker.commerce.department(),\n      expanded: false\n    });\n  }\n  return departments;\n}\n\nconst productsMap = new Map<number, readonly ProductRow[]>();\n\nfunction getProducts(parentId: number): readonly ProductRow[] {\n  if (productsMap.has(parentId)) return productsMap.get(parentId)!;\n  const products: ProductRow[] = [];\n  for (let i = 0; i < 20; i++) {\n    products.push({\n      id: i,\n      product: faker.commerce.productName(),\n      description: faker.commerce.productDescription(),\n      price: faker.commerce.price()\n    });\n  }\n  productsMap.set(parentId, products);\n  return products;\n}\n\nconst productColumns: readonly Column<ProductRow>[] = [\n  { key: 'id', name: 'ID', width: 35 },\n  { key: 'product', name: 'Product' },\n  { key: 'description', name: 'Description' },\n  { key: 'price', name: 'Price' }\n];\n\nfunction MasterDetail() {\n  const direction = useDirection();\n\n  const columns = useMemo((): readonly Column<DepartmentRow>[] => {\n    return [\n      {\n        key: 'expanded',\n        name: '',\n        minWidth: 30,\n        width: 30,\n        colSpan(args) {\n          return args.type === 'ROW' && args.row.type === 'DETAIL' ? 3 : undefined;\n        },\n        cellClass(row) {\n          return row.type === 'DETAIL'\n            ? css`\n                padding: 24px;\n              `\n            : undefined;\n        },\n        renderCell({ row, tabIndex, onRowChange }) {\n          if (row.type === 'DETAIL') {\n            return <ProductGrid parentId={row.parentId} direction={direction} />;\n          }\n\n          return (\n            <CellExpanderFormatter\n              expanded={row.expanded}\n              tabIndex={tabIndex}\n              onCellExpand={() => {\n                onRowChange({ ...row, expanded: !row.expanded });\n              }}\n            />\n          );\n        }\n      },\n      { key: 'id', name: 'ID', width: 35 },\n      { key: 'department', name: 'Department' }\n    ];\n  }, [direction]);\n  const [rows, setRows] = useState(createDepartments);\n\n  function onRowsChange(rows: DepartmentRow[], { indexes }: RowsChangeData<DepartmentRow>) {\n    const row = rows[indexes[0]];\n    if (row.type === 'MASTER') {\n      if (row.expanded) {\n        rows.splice(indexes[0] + 1, 0, {\n          type: 'DETAIL',\n          id: row.id + 100,\n          parentId: row.id\n        });\n      } else {\n        rows.splice(indexes[0] + 1, 1);\n      }\n      setRows(rows);\n    }\n  }\n\n  return (\n    <DataGrid\n      aria-label=\"Master Detail Example\"\n      rowKeyGetter={rowKeyGetter}\n      columns={columns}\n      rows={rows}\n      onRowsChange={onRowsChange}\n      headerRowHeight={45}\n      rowHeight={(row) => (row.type === 'DETAIL' ? 300 : 45)}\n      className=\"fill-grid\"\n      enableVirtualization={false}\n      direction={direction}\n      onCellKeyDown={(_, event) => {\n        if (event.isDefaultPrevented()) {\n          // skip parent grid keyboard navigation if nested grid handled it\n          event.preventGridDefault();\n        }\n      }}\n    />\n  );\n}\n\nfunction ProductGrid({ parentId, direction }: { parentId: number; direction: Direction }) {\n  const products = getProducts(parentId);\n\n  return (\n    <DataGrid\n      rows={products}\n      columns={productColumns}\n      rowKeyGetter={rowKeyGetter}\n      style={{ blockSize: 250 }}\n      direction={direction}\n    />\n  );\n}\n\nfunction rowKeyGetter(row: DepartmentRow | ProductRow) {\n  return row.id;\n}\n"],"mappings":"sQAkCQkB,GAAiC,CACvC,IAAK,EAAe,EAAA,CAClBA,IAAAA,IAAAA,EAAYE,EAAAA,EAAK,GAAA,IAAA,EACT,KAAA,CACNX,KAAIU,SACJT,GAAAA,EACAC,WAAU,EAAA,SAAA,YAAA,CACX,SAAC,cAON,IAAA,EAASa,IAAYZ,IACnB,SAAIU,EAAgBV,EAAW,CAC/B,GAAA,EAAMe,IAA2B,EAAA,CAAA,OAAA,EAAA,IAAA,EAAA,CACjC,IAAK,EAAWR,EAAAA,CACdQ,IAAAA,IAAAA,EAASP,EAAK,EAAA,GAAA,IAAA,EACRD,KAAAA,CACJL,GAAAA,EACAC,QAAAA,EAAab,SAAMmB,aAASQ,CAC5Bb,YAAaK,EAAAA,SAASL,oBAAAA,CACvB,MAAC,EAAA,SAAA,OAAA,UAGJ,EAAOW,IAAAA,EAAAA,EAAAA,OAIP,EAAA,EAAaO,IAAAA,KAAYC,KAAAA,KAAW,MAAA,GACpC,EAAkBD,IAAAA,UAAiB,KAAA,UACnC,EAAsBA,IAAAA,cAAqB,KAAA,cAC3C,EAAgBA,IAAAA,qBACjB,CAED,UACQG,GAAY/B,CAElB,IAAMgC,EAAUtC,GAAgD,CAC9D,GAAA,EAAA,EAAA,aACE,EAEEkC,IAAAA,WACAK,KAAAA,GACAJ,SAAO,GACPK,MAAAA,GACE,QAAOC,EAAKjC,wDAGZ,UAAOkC,EAAIlC,qGAMbqC,EAAAA,OAAkBC,UACC,EAAA,EAAA,KAAU,EAAA,CACzB,SAAO,EAAA,SAAa,YAAmCT,CAAAA,cAGzD,SACE,EAAA,SACE,WACUS,iBAAAA,CACV,EAAA,CACEC,GAAAA,EAAc,SAAGL,CAAAA,EAAAA,SAAK/B,CAAAA,OAMhC,IAAA,KAAEsB,KAAK,KAAMC,MAAM,GAAMC,EACzB,IAAA,aAAEF,KAAK,aAAcC,EACtB,CAAA,EAAA,CAAA,CACCG,CAAAA,EAAAA,IAAAA,EAAAA,EAAAA,UAAW,EAAA,CACf,SAAOW,EAAMC,EAAWhD,CAAAA,WAASgB,CAEjC,IAAA,EAASiC,EAAAA,EAAaF,IACpB,EAAMN,OAAWS,WACbT,EAAIlC,SACN,EAAIkC,OAAI/B,EAAU,GAAA,EAAA,EAAA,CAChBqC,KAAKK,SACH7C,GAAAA,EAAM,GAAA,IACNC,SAAQA,EAAK,GACbG,CAAAA,UAEG,EAAA,GAAA,EAAA,EAAA,0BAOX,aACE,wBACE,eACc0C,UACLhB,OACHU,eACQE,gBAAAA,GACd,UAAA,GAAiB,EAAA,OAAA,SAAA,IAAA,GACjB,UAAA,YACA,qBAAU,GACV,YACWb,eAAAA,EAAAA,IAAAA,CACX,EAAA,oBAA6B,EAC3B,EAAImB,oBAAMC,yCAUhB,OAAiBjC,EAAAA,EAAAA,KAAAA,EAAqB,CAEtC,KAHOmC,EAAc/C,EAAUyB,CAK3B,QAAMV,EACN,eACc2B,MAAAA,CAAAA,UAAAA,IAAAA,CACd,YACWjB,CAAAA,eAKjB,OAAA,EAASiB"}