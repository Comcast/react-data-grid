const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-1r3fwDf2.js","assets/index-DWL4DTos.js","assets/index-VUwQrtBI.css"])))=>i.map(i=>d[i]);
import{_ as b,u as F,r as l,j as o,f as c,a as d}from"./index-DWL4DTos.js";import{t as i,a as _}from"./textEditor-DGm8m0Wb.js";import{D as A,l as D,m as M}from"./DataGrid-Czk7R4Vl.js";function P(t,r){const{head:e,body:n,foot:a}=S(t),s=[...e,...n,...a].map(u=>u.map(I).join(",")).join(`
`);L(r,new Blob([s],{type:"text/csv;charset=utf-8;"}))}async function z(t,r){const{head:e,body:n,foot:a}=S(t),[{jsPDF:s},{default:u}]=await Promise.all([b(()=>import("./jspdf.es.min-1r3fwDf2.js").then(y=>y.j),__vite__mapDeps([0,1,2])),b(()=>import("./jspdf.plugin.autotable-HajQ1zqV.js"),[])]),m=new s({orientation:"l",unit:"px"});u(m,{head:e,body:n,foot:a,horizontalPageBreak:!0,styles:{cellPadding:1.5,fontSize:8,cellWidth:"wrap"},tableWidth:"wrap"}),m.save(r)}function S(t){return{head:r(".rdg-header-row"),body:r(".rdg-row:not(.rdg-summary-row)"),foot:r(".rdg-summary-row")};function r(e){return Array.from(t.querySelectorAll(e)).map(n=>Array.from(n.querySelectorAll(".rdg-cell")).map(a=>a.innerText))}}function I(t){if(typeof t=="string"){const r=t.replace(/"/g,'""');return r.includes(",")?`"${r}"`:r}return t}function L(t,r){const e=document.createElement("a");e.download=t;const n=URL.createObjectURL(r);e.href=n,e.click(),URL.revokeObjectURL(n)}const N="t7hd9f8",V="dhwnept",x=new Intl.DateTimeFormat(navigator.language),O=new Intl.NumberFormat(navigator.language,{style:"currency",currency:"eur"});function $(t,r){return[D,{key:"id",name:"ID",frozen:!0,resizable:!1,renderSummaryCell(){return o.jsx("strong",{children:"Total"})}},{key:"title",name:"Task",frozen:!0,renderEditCell:i,renderSummaryCell({row:e}){return`${e.totalCount} records`}},{key:"client",name:"Client",width:"max-content",draggable:!0,renderEditCell:i},{key:"area",name:"Area",renderEditCell:i},{key:"country",name:"Country",renderEditCell:e=>o.jsx("select",{autoFocus:!0,className:_,value:e.row.country,onChange:n=>e.onRowChange({...e.row,country:n.target.value},!0),children:t.map(n=>o.jsx("option",{children:n},n))})},{key:"contact",name:"Contact",renderEditCell:i},{key:"assignee",name:"Assignee",renderEditCell:i},{key:"progress",name:"Completion",renderCell(e){const n=e.row.progress;return o.jsxs(o.Fragment,{children:[o.jsx("progress",{max:100,value:n,style:{inlineSize:50}})," ",Math.round(n),"%"]})},renderEditCell({row:e,onRowChange:n,onClose:a}){return d.createPortal(o.jsx("div",{dir:r,className:V,onKeyDown:s=>{s.key==="Escape"&&a()},children:o.jsxs("dialog",{open:!0,children:[o.jsx("input",{autoFocus:!0,type:"range",min:"0",max:"100",value:e.progress,onChange:s=>n({...e,progress:s.target.valueAsNumber})}),o.jsxs("menu",{children:[o.jsx("button",{type:"button",onClick:()=>a(),children:"Cancel"}),o.jsx("button",{type:"button",onClick:()=>a(!0),children:"Save"})]})]})}),document.body)},editorOptions:{displayCellContent:!0}},{key:"startTimestamp",name:"Start date",renderCell(e){return x.format(e.row.startTimestamp)}},{key:"endTimestamp",name:"Deadline",renderCell(e){return x.format(e.row.endTimestamp)}},{key:"budget",name:"Budget",renderCell(e){return O.format(e.row.budget)}},{key:"transaction",name:"Transaction type"},{key:"account",name:"Account"},{key:"version",name:"Version",renderEditCell:i},{key:"available",name:"Available",renderCell({row:e,onRowChange:n,tabIndex:a}){return o.jsx(M,{value:e.available,onChange:()=>{n({...e,available:!e.available})},tabIndex:a})},renderSummaryCell({row:{yesCount:e,totalCount:n}}){return`${Math.floor(100*e/n)}% ✔️`}}]}function U(t){return t.id}let v=[];function B(){const t=Date.now(),r=[],e=new Set;for(let n=0;n<1e3;n++){const a=c.location.country();e.add(a),r.push({id:n,title:`Task #${n+1}`,client:c.company.name(),area:c.person.jobArea(),country:a,contact:c.internet.exampleEmail(),assignee:c.person.fullName(),progress:Math.random()*100,startTimestamp:t-Math.round(Math.random()*1e10),endTimestamp:t+Math.round(Math.random()*1e10),budget:500+Math.random()*10500,transaction:c.finance.transactionType(),account:c.finance.iban(),version:c.system.semver(),available:Math.random()>.5})}return v=[...e].sort(new Intl.Collator().compare),r}function G(t){switch(t){case"assignee":case"title":case"client":case"area":case"country":case"contact":case"transaction":case"account":case"version":return(r,e)=>r[t].localeCompare(e[t]);case"available":return(r,e)=>r[t]===e[t]?0:r[t]?1:-1;case"id":case"progress":case"startTimestamp":case"endTimestamp":case"budget":return(r,e)=>r[t]-e[t];default:throw new Error(`unsupported sortColumn: "${t}"`)}}const J=function(){const r=F(),[e,n]=l.useState(B),[a,s]=l.useState([]),[u,m]=l.useState(()=>new Set),[y,p]=l.useState(!1),f=l.useRef(null),E=l.useMemo(()=>$(v,r),[r]),C=l.useMemo(()=>[{id:"total_0",totalCount:e.length,yesCount:e.filter(g=>g.available).length}],[e]),j=l.useMemo(()=>a.length===0?e:e.toSorted((g,T)=>{for(const w of a){const h=G(w.columnKey)(g,T);if(h!==0)return w.direction==="ASC"?h:-h}return 0}),[e,a]);function k(){d.flushSync(()=>{p(!0)}),P(f.current.element,"CommonFeatures.csv"),d.flushSync(()=>{p(!1)})}async function R(){d.flushSync(()=>{p(!0)}),await z(f.current.element,"CommonFeatures.pdf"),d.flushSync(()=>{p(!1)})}return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:N,children:[o.jsx("button",{type:"button",onClick:k,children:"Export to CSV"}),o.jsx("button",{type:"button",onClick:R,children:"Export to PDF"})]}),o.jsx(A,{ref:f,rowKeyGetter:U,columns:E,rows:j,defaultColumnOptions:{sortable:!0,resizable:!0},selectedRows:u,onSelectedRowsChange:m,onRowsChange:n,sortColumns:a,onSortColumnsChange:s,topSummaryRows:C,bottomSummaryRows:C,className:"fill-grid",direction:r,enableVirtualization:!y})]})};export{J as component};
//# sourceMappingURL=CommonFeatures-D9thnwBv.js.map
