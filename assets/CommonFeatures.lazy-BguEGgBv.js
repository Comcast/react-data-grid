const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-BEZt1gQp.js","assets/index-CuAQ4yZx.js","assets/index-Dn9dI3_U.css","assets/jspdf.plugin.autotable-B8Y742_8.js","assets/_commonjsHelpers-BosuxZz1.js"])))=>i.map(i=>d[i]);
import{_ as b,c as T,u as F,r as l,j as a,a as p,f as i}from"./index-CuAQ4yZx.js";import{t as u,a as _}from"./textEditor-5euQdiU6.js";import{D as A,l as D,m as M}from"./DataGrid-uXGIfgG5.js";function P(r,t){const{head:e,body:n,foot:o}=v(r),s=[...e,...n,...o].map(m=>m.map(L).join(",")).join(`
`);I(t,new Blob([s],{type:"text/csv;charset=utf-8;"}))}async function z(r,t){const{head:e,body:n,foot:o}=v(r),[{jsPDF:s},{default:m}]=await Promise.all([b(()=>import("./jspdf.es.min-BEZt1gQp.js").then(c=>c.j),__vite__mapDeps([0,1,2])),b(()=>import("./jspdf.plugin.autotable-B8Y742_8.js").then(c=>c.j),__vite__mapDeps([3,4,0,1,2]))]),y=new s({orientation:"l",unit:"px"});m(y,{head:e,body:n,foot:o,horizontalPageBreak:!0,styles:{cellPadding:1.5,fontSize:8,cellWidth:"wrap"},tableWidth:"wrap"}),y.save(t)}function v(r){return{head:t(".rdg-header-row"),body:t(".rdg-row:not(.rdg-summary-row)"),foot:t(".rdg-summary-row")};function t(e){return Array.from(r.querySelectorAll(e)).map(n=>Array.from(n.querySelectorAll(".rdg-cell")).map(o=>o.innerText))}}function L(r){if(typeof r=="string"){const t=r.replace(/"/g,'""');return t.includes(",")?`"${t}"`:t}return r}function I(r,t){const e=document.createElement("a");e.download=r;const n=URL.createObjectURL(t);e.href=n,e.click(),URL.revokeObjectURL(n)}const Q=T("/CommonFeatures")({component:K}),N="t1sn5bov",V="d53963l",x=new Intl.DateTimeFormat(navigator.language),O=new Intl.NumberFormat(navigator.language,{style:"currency",currency:"eur"});function $(r,t){return[D,{key:"id",name:"ID",frozen:!0,resizable:!1,renderSummaryCell(){return a.jsx("strong",{children:"Total"})}},{key:"title",name:"Task",frozen:!0,renderEditCell:u,renderSummaryCell({row:e}){return`${e.totalCount} records`}},{key:"client",name:"Client",width:"max-content",draggable:!0,renderEditCell:u},{key:"area",name:"Area",renderEditCell:u},{key:"country",name:"Country",renderEditCell:e=>a.jsx("select",{autoFocus:!0,className:_,value:e.row.country,onChange:n=>e.onRowChange({...e.row,country:n.target.value},!0),children:r.map(n=>a.jsx("option",{children:n},n))})},{key:"contact",name:"Contact",renderEditCell:u},{key:"assignee",name:"Assignee",renderEditCell:u},{key:"progress",name:"Completion",renderCell(e){const n=e.row.progress;return a.jsxs(a.Fragment,{children:[a.jsx("progress",{max:100,value:n,style:{inlineSize:50}})," ",Math.round(n),"%"]})},renderEditCell({row:e,onRowChange:n,onClose:o}){return p.createPortal(a.jsx("div",{dir:t,className:V,onKeyDown:s=>{s.key==="Escape"&&o()},children:a.jsxs("dialog",{open:!0,children:[a.jsx("input",{autoFocus:!0,type:"range",min:"0",max:"100",value:e.progress,onChange:s=>n({...e,progress:s.target.valueAsNumber})}),a.jsxs("menu",{children:[a.jsx("button",{type:"button",onClick:()=>o(),children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>o(!0),children:"Save"})]})]})}),document.body)},editorOptions:{displayCellContent:!0}},{key:"startTimestamp",name:"Start date",renderCell(e){return x.format(e.row.startTimestamp)}},{key:"endTimestamp",name:"Deadline",renderCell(e){return x.format(e.row.endTimestamp)}},{key:"budget",name:"Budget",renderCell(e){return O.format(e.row.budget)}},{key:"transaction",name:"Transaction type"},{key:"account",name:"Account"},{key:"version",name:"Version",renderEditCell:u},{key:"available",name:"Available",renderCell({row:e,onRowChange:n,tabIndex:o}){return a.jsx(M,{value:e.available,onChange:()=>{n({...e,available:!e.available})},tabIndex:o})},renderSummaryCell({row:{yesCount:e,totalCount:n}}){return`${Math.floor(100*e/n)}% ✔️`}}]}function U(r){return r.id}function B(){const r=Date.now(),t=[];for(let e=0;e<1e3;e++)t.push({id:e,title:`Task #${e+1}`,client:i.company.name(),area:i.person.jobArea(),country:i.location.country(),contact:i.internet.exampleEmail(),assignee:i.person.fullName(),progress:Math.random()*100,startTimestamp:r-Math.round(Math.random()*1e10),endTimestamp:r+Math.round(Math.random()*1e10),budget:500+Math.random()*10500,transaction:i.finance.transactionType(),account:i.finance.iban(),version:i.system.semver(),available:Math.random()>.5});return t}function G(r){switch(r){case"assignee":case"title":case"client":case"area":case"country":case"contact":case"transaction":case"account":case"version":return(t,e)=>t[r].localeCompare(e[r]);case"available":return(t,e)=>t[r]===e[r]?0:t[r]?1:-1;case"id":case"progress":case"startTimestamp":case"endTimestamp":case"budget":return(t,e)=>t[r]-e[r];default:throw new Error(`unsupported sortColumn: "${r}"`)}}function K(){const r=F(),[t,e]=l.useState(B),[n,o]=l.useState([]),[s,m]=l.useState(()=>new Set),[y,c]=l.useState(!1),f=l.useRef(null),h=l.useMemo(()=>[...new Set(t.map(d=>d.country))].sort(new Intl.Collator().compare),[]),S=l.useMemo(()=>$(h,r),[h,r]),C=l.useMemo(()=>[{id:"total_0",totalCount:t.length,yesCount:t.filter(d=>d.available).length}],[t]),j=l.useMemo(()=>n.length===0?t:[...t].sort((d,R)=>{for(const w of n){const g=G(w.columnKey)(d,R);if(g!==0)return w.direction==="ASC"?g:-g}return 0}),[t,n]);function E(){p.flushSync(()=>{c(!0)}),P(f.current.element,"CommonFeatures.csv"),p.flushSync(()=>{c(!1)})}async function k(){p.flushSync(()=>{c(!0)}),await z(f.current.element,"CommonFeatures.pdf"),p.flushSync(()=>{c(!1)})}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:N,children:[a.jsx("button",{type:"button",onClick:E,children:"Export to CSV"}),a.jsx("button",{type:"button",onClick:k,children:"Export to PDF"})]}),a.jsx(A,{ref:f,rowKeyGetter:U,columns:S,rows:j,defaultColumnOptions:{sortable:!0,resizable:!0},selectedRows:s,onSelectedRowsChange:m,onRowsChange:e,sortColumns:n,onSortColumnsChange:o,topSummaryRows:C,bottomSummaryRows:C,className:"fill-grid",direction:r,enableVirtualization:!y})]})}export{Q as Route};
//# sourceMappingURL=CommonFeatures.lazy-BguEGgBv.js.map
