const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-Jg85Z_Vo.js","assets/index-P3rv_nSE.js","assets/index-Dn9dI3_U.css","assets/jspdf.plugin.autotable-YMJZAJZr.js","assets/_commonjsHelpers-BosuxZz1.js","assets/server.browser-Bgut58sf.js"])))=>i.map(i=>d[i]);
import{_ as w,r as l,c as j,u as k,j as a,a as S,f as c}from"./index-P3rv_nSE.js";import{t as u,a as T}from"./textEditor-CWvZLme7.js";import{l as _,m as R,D as F}from"./DataGrid-Ds4rVw-T.js";async function M(t,r){const{head:e,body:n,foot:o}=await b(t),s=[...e,...n,...o].map(i=>i.map(D).join(",")).join(`
`);P(r,new Blob([s],{type:"text/csv;charset=utf-8;"}))}async function A(t,r){const[{jsPDF:e},n,{head:o,body:s,foot:i}]=await Promise.all([w(()=>import("./jspdf.es.min-Jg85Z_Vo.js").then(d=>d.j),__vite__mapDeps([0,1,2])),(await w(async()=>{const{default:d}=await import("./jspdf.plugin.autotable-YMJZAJZr.js").then(y=>y.j);return{default:d}},__vite__mapDeps([3,4,0,1,2]))).default,await b(t)]),m=new e({orientation:"l",unit:"px"});n(m,{head:o,body:s,foot:i,horizontalPageBreak:!0,styles:{cellPadding:1.5,fontSize:8,cellWidth:"wrap"},tableWidth:"wrap"}),m.save(r)}async function b(t){const{renderToStaticMarkup:r}=await w(async()=>{const{renderToStaticMarkup:o}=await import("./server.browser-Bgut58sf.js").then(s=>s.s);return{renderToStaticMarkup:o}},__vite__mapDeps([5,1,2])),e=document.createElement("div");return e.innerHTML=r(l.cloneElement(t,{enableVirtualization:!1})),{head:n(".rdg-header-row"),body:n(".rdg-row:not(.rdg-summary-row)"),foot:n(".rdg-summary-row")};function n(o){return Array.from(e.querySelectorAll(o)).map(s=>Array.from(s.querySelectorAll(".rdg-cell")).map(i=>i.innerText))}}function D(t){if(typeof t=="string"){const r=t.replace(/"/g,'""');return r.includes(",")?`"${r}"`:r}return t}function P(t,r){const e=document.createElement("a");e.download=t;const n=URL.createObjectURL(r);e.href=n,e.click(),URL.revokeObjectURL(n)}const W=j("/CommonFeatures")({component:B}),L="t1sn5bov",z="d53963l",h=new Intl.DateTimeFormat(navigator.language),V=new Intl.NumberFormat(navigator.language,{style:"currency",currency:"eur"});function I(t,r){return[_,{key:"id",name:"ID",frozen:!0,resizable:!1,renderSummaryCell(){return a.jsx("strong",{children:"Total"})}},{key:"title",name:"Task",frozen:!0,renderEditCell:u,renderSummaryCell({row:e}){return`${e.totalCount} records`}},{key:"client",name:"Client",width:"max-content",draggable:!0,renderEditCell:u},{key:"area",name:"Area",renderEditCell:u},{key:"country",name:"Country",renderEditCell:e=>a.jsx("select",{autoFocus:!0,className:T,value:e.row.country,onChange:n=>e.onRowChange({...e.row,country:n.target.value},!0),children:t.map(n=>a.jsx("option",{children:n},n))})},{key:"contact",name:"Contact",renderEditCell:u},{key:"assignee",name:"Assignee",renderEditCell:u},{key:"progress",name:"Completion",renderCell(e){const n=e.row.progress;return a.jsxs(a.Fragment,{children:[a.jsx("progress",{max:100,value:n,style:{inlineSize:50}})," ",Math.round(n),"%"]})},renderEditCell({row:e,onRowChange:n,onClose:o}){return S.createPortal(a.jsx("div",{dir:r,className:z,onKeyDown:s=>{s.key==="Escape"&&o()},children:a.jsxs("dialog",{open:!0,children:[a.jsx("input",{autoFocus:!0,type:"range",min:"0",max:"100",value:e.progress,onChange:s=>n({...e,progress:s.target.valueAsNumber})}),a.jsxs("menu",{children:[a.jsx("button",{type:"button",onClick:()=>o(),children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>o(!0),children:"Save"})]})]})}),document.body)},editorOptions:{displayCellContent:!0}},{key:"startTimestamp",name:"Start date",renderCell(e){return h.format(e.row.startTimestamp)}},{key:"endTimestamp",name:"Deadline",renderCell(e){return h.format(e.row.endTimestamp)}},{key:"budget",name:"Budget",renderCell(e){return V.format(e.row.budget)}},{key:"transaction",name:"Transaction type"},{key:"account",name:"Account"},{key:"version",name:"Version",renderEditCell:u},{key:"available",name:"Available",renderCell({row:e,onRowChange:n,tabIndex:o}){return a.jsx(R,{value:e.available,onChange:()=>{n({...e,available:!e.available})},tabIndex:o})},renderSummaryCell({row:{yesCount:e,totalCount:n}}){return`${Math.floor(100*e/n)}% ✔️`}}]}function N(t){return t.id}function O(){const t=Date.now(),r=[];for(let e=0;e<1e3;e++)r.push({id:e,title:`Task #${e+1}`,client:c.company.name(),area:c.person.jobArea(),country:c.location.country(),contact:c.internet.exampleEmail(),assignee:c.person.fullName(),progress:Math.random()*100,startTimestamp:t-Math.round(Math.random()*1e10),endTimestamp:t+Math.round(Math.random()*1e10),budget:500+Math.random()*10500,transaction:c.finance.transactionType(),account:c.finance.iban(),version:c.system.semver(),available:Math.random()>.5});return r}function $(t){switch(t){case"assignee":case"title":case"client":case"area":case"country":case"contact":case"transaction":case"account":case"version":return(r,e)=>r[t].localeCompare(e[t]);case"available":return(r,e)=>r[t]===e[t]?0:r[t]?1:-1;case"id":case"progress":case"startTimestamp":case"endTimestamp":case"budget":return(r,e)=>r[t]-e[t];default:throw new Error(`unsupported sortColumn: "${t}"`)}}function B(){const t=k(),[r,e]=l.useState(O),[n,o]=l.useState([]),[s,i]=l.useState(()=>new Set),m=l.useMemo(()=>[...new Set(r.map(p=>p.country))].sort(new Intl.Collator().compare),[]),d=l.useMemo(()=>I(m,t),[m,t]),y=l.useMemo(()=>[{id:"total_0",totalCount:r.length,yesCount:r.filter(p=>p.available).length}],[r]),v=l.useMemo(()=>n.length===0?r:[...r].sort((p,E)=>{for(const C of n){const f=$(C.columnKey)(p,E);if(f!==0)return C.direction==="ASC"?f:-f}return 0}),[r,n]),g=a.jsx(F,{rowKeyGetter:N,columns:d,rows:v,defaultColumnOptions:{sortable:!0,resizable:!0},selectedRows:s,onSelectedRowsChange:i,onRowsChange:e,sortColumns:n,onSortColumnsChange:o,topSummaryRows:y,bottomSummaryRows:y,className:"fill-grid",direction:t});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:L,children:[a.jsx(x,{onExport:()=>M(g,"CommonFeatures.csv"),children:"Export to CSV"}),a.jsx(x,{onExport:()=>A(g,"CommonFeatures.pdf"),children:"Export to PDF"})]}),g]})}function x({onExport:t,children:r}){const[e,n]=l.useState(!1);return a.jsx("button",{type:"button",disabled:e,onClick:async()=>{n(!0),await t(),n(!1)},children:e?"Exporting":r})}export{W as Route};
//# sourceMappingURL=CommonFeatures.lazy-Cd3ZJQm1.js.map
