{"version":3,"file":"CustomizableRenderers-BBLDmwD_.js","names":["useMemo","useState","css","Row","BaseRow","Cell","DataGrid","SelectColumn","textEditor","CellRendererProps","Column","RenderCheckboxProps","RenderRowProps","RenderSortStatusProps","SortColumn","useDirection","Route","selectCellClassname","sortPriorityClassname","id","task","complete","priority","issueType","createRows","rows","i","push","Math","min","round","random","columns","headerCellClass","cellClass","key","name","width","renderEditCell","sortable","renderCheckbox","onChange","indeterminate","props","handleChange","e","React","ChangeEvent","HTMLInputElement","target","checked","nativeEvent","MouseEvent","shiftKey","el","renderSortStatus","sortDirection","undefined","cellStyle","CSSProperties","color","renderCell","Key","style","column","row","rowStyle","renderRow","rowKeyGetter","Comparator","a","b","getComparator","sortColumn","localeCompare","Error","SplitComponent","CustomizableRenderers","direction","setRows","sortColumns","setSortColumns","selectedRows","setSelectedRows","ReadonlySet","Set","sortedRows","length","toSorted","sort","comparator","columnKey","compResult","component"],"sources":["../../website/routes/CustomizableRenderers.tsx?tsr-split=component"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { css } from '@linaria/core';\n\nimport { Row as BaseRow, Cell, DataGrid, SelectColumn, textEditor } from '../../src';\nimport type {\n  CellRendererProps,\n  Column,\n  RenderCheckboxProps,\n  RenderRowProps,\n  RenderSortStatusProps,\n  SortColumn\n} from '../../src';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: CustomizableRenderers\n});\n\nconst selectCellClassname = css`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > input {\n    margin: 0;\n  }\n`;\n\nconst sortPriorityClassname = css`\n  color: grey;\n  margin-left: 2px;\n`;\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    ...SelectColumn,\n    headerCellClass: selectCellClassname,\n    cellClass: selectCellClassname\n  },\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    renderEditCell: textEditor,\n    sortable: true\n  },\n  {\n    key: 'priority',\n    name: 'Priority',\n    sortable: true\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type',\n    sortable: true\n  },\n  {\n    key: 'complete',\n    name: '% Complete',\n    sortable: true\n  }\n];\n\nfunction CustomizableRenderers() {\n  const direction = useDirection();\n  const [rows, setRows] = useState(createRows);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const [selectedRows, setSelectedRows] = useState((): ReadonlySet<number> => new Set());\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n\n    return rows.toSorted((a, b) => {\n      for (const sort of sortColumns) {\n        const comparator = getComparator(sort.columnKey);\n        const compResult = comparator(a, b);\n        if (compResult !== 0) {\n          return sort.direction === 'ASC' ? compResult : -compResult;\n        }\n      }\n      return 0;\n    });\n  }, [rows, sortColumns]);\n\n  return (\n    <DataGrid\n      aria-label=\"Customizable Renderers Example\"\n      className=\"fill-grid\"\n      columns={columns}\n      rows={sortedRows}\n      rowKeyGetter={rowKeyGetter}\n      onRowsChange={setRows}\n      sortColumns={sortColumns}\n      onSortColumnsChange={setSortColumns}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      renderers={{ renderSortStatus, renderCheckbox, renderCell, renderRow }}\n      direction={direction}\n    />\n  );\n}\n\nfunction renderCheckbox({ onChange, indeterminate, ...props }: RenderCheckboxProps) {\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    onChange(e.target.checked, (e.nativeEvent as MouseEvent).shiftKey);\n  }\n\n  return (\n    <input\n      ref={(el) => {\n        if (el) {\n          el.indeterminate = indeterminate === true;\n        }\n      }}\n      type=\"checkbox\"\n      {...props}\n      onChange={handleChange}\n    />\n  );\n}\n\nfunction renderSortStatus({ sortDirection, priority }: RenderSortStatusProps) {\n  return (\n    <>\n      {sortDirection !== undefined ? (sortDirection === 'ASC' ? '\\u2B9D' : '\\u2B9F') : null}\n      <span className={sortPriorityClassname}>{priority}</span>\n    </>\n  );\n}\n\nconst cellStyle: React.CSSProperties = { color: 'red' };\n\nfunction renderCell(key: React.Key, props: CellRendererProps<Row, unknown>) {\n  const style =\n    props.column.key === 'priority' && props.row.priority === 'Critical' ? cellStyle : undefined;\n\n  return <Cell key={key} {...props} style={style} />;\n}\n\nconst rowStyle: React.CSSProperties = { color: 'green' };\n\nfunction renderRow(key: React.Key, props: RenderRowProps<Row>) {\n  const style = props.row.complete === 100 ? rowStyle : undefined;\n\n  return <BaseRow key={key} {...props} style={style} />;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\ntype Comparator = (a: Row, b: Row) => number;\n\nfunction getComparator(sortColumn: string): Comparator {\n  switch (sortColumn) {\n    case 'task':\n    case 'priority':\n    case 'issueType':\n      return (a, b) => {\n        return a[sortColumn].localeCompare(b[sortColumn]);\n      };\n    case 'complete':\n      return (a, b) => {\n        return a[sortColumn] - b[sortColumn];\n      };\n    default:\n      throw new Error(`unsupported sortColumn: \"${sortColumn}\"`);\n  }\n}\n"],"mappings":"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"}