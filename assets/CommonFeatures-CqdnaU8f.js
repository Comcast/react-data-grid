import{c as e,e as t,f as n,i as r,j as i,k as a,l as o,o as s}from"./index-sjTQdq_W.js";import{b as c,k as l,m as u}from"./DataGrid-BfMREbBK.js";import{b as d,c as f}from"./textEditor-FAoUwxgq.js";var p=s(i()),m=s(a()),h=s(o());const g=new Intl.DateTimeFormat(navigator.language),_=new Intl.NumberFormat(navigator.language,{style:`currency`,currency:`eur`});function v(e,t){return[l,{key:`id`,name:`ID`,frozen:!0,resizable:!1,renderSummaryCell(){return(0,p.jsx)(`strong`,{children:`Total`})}},{key:`title`,name:`Task`,frozen:!0,renderEditCell:d,renderSummaryCell({row:e}){return`${e.totalCount} records`}},{key:`client`,name:`Client`,width:`max-content`,draggable:!0,renderEditCell:d},{key:`area`,name:`Area`,renderEditCell:d},{key:`country`,name:`Country`,renderEditCell:t=>(0,p.jsx)(`select`,{autoFocus:!0,className:f,value:t.row.country,onChange:e=>t.onRowChange({...t.row,country:e.target.value},!0),children:e.map(e=>(0,p.jsx)(`option`,{children:e},e))})},{key:`contact`,name:`Contact`,renderEditCell:d},{key:`assignee`,name:`Assignee`,renderEditCell:d},{key:`progress`,name:`Completion`,renderCell(e){let t=e.row.progress;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(`progress`,{max:100,value:t,style:{inlineSize:50}}),` `,Math.round(t),`%`]})},renderEditCell({row:e,onRowChange:n,onClose:r}){return(0,m.createPortal)((0,p.jsx)(`div`,{dir:t,className:`dhwnept`,onKeyDown:e=>{e.key===`Escape`&&r()},children:(0,p.jsxs)(`dialog`,{open:!0,children:[(0,p.jsx)(`input`,{autoFocus:!0,type:`range`,min:`0`,max:`100`,value:e.progress,onChange:t=>n({...e,progress:t.target.valueAsNumber})}),(0,p.jsxs)(`menu`,{children:[(0,p.jsx)(`button`,{type:`button`,onClick:()=>r(),children:`Cancel`}),(0,p.jsx)(`button`,{type:`button`,onClick:()=>r(!0),children:`Save`})]})]})}),document.body)},editorOptions:{displayCellContent:!0}},{key:`startTimestamp`,name:`Start date`,renderCell(e){return g.format(e.row.startTimestamp)}},{key:`endTimestamp`,name:`Deadline`,renderCell(e){return g.format(e.row.endTimestamp)}},{key:`budget`,name:`Budget`,renderCell(e){return _.format(e.row.budget)}},{key:`transaction`,name:`Transaction type`},{key:`account`,name:`Account`},{key:`version`,name:`Version`,renderEditCell:d},{key:`available`,name:`Available`,renderCell({row:e,onRowChange:t,tabIndex:n}){return(0,p.jsx)(u,{value:e.available,onChange:()=>{t({...e,available:!e.available})},tabIndex:n})},renderSummaryCell({row:{yesCount:e,totalCount:t}}){return`${Math.floor(100*e/t)}% ✔️`}}]}function y(e){return e.id}let b=[];function x(){let t=Date.now(),n=[],r=new Set;for(let i=0;i<1e3;i++){let a=e.location.country();r.add(a),n.push({id:i,title:`Task #${i+1}`,client:e.company.name(),area:e.person.jobArea(),country:a,contact:e.internet.exampleEmail(),assignee:e.person.fullName(),progress:Math.random()*100,startTimestamp:t-Math.round(Math.random()*1e10),endTimestamp:t+Math.round(Math.random()*1e10),budget:500+Math.random()*10500,transaction:e.finance.transactionType(),account:e.finance.iban(),version:e.system.semver(),available:Math.random()>.5})}return b=[...r].sort(new Intl.Collator().compare),n}function S(e){switch(e){case`assignee`:case`title`:case`client`:case`area`:case`country`:case`contact`:case`transaction`:case`account`:case`version`:return(t,n)=>t[e].localeCompare(n[e]);case`available`:return(t,n)=>t[e]===n[e]?0:t[e]?1:-1;case`id`:case`progress`:case`startTimestamp`:case`endTimestamp`:case`budget`:return(t,n)=>t[e]-n[e];default:throw Error(`unsupported sortColumn: "${e}"`)}}function C(){let e=r(),[i,a]=(0,h.useState)(x),[o,s]=(0,h.useState)([]),[l,u]=(0,h.useState)(()=>new Set),[d,f]=(0,h.useState)(!1),g=(0,h.useRef)(null),_=(0,h.useMemo)(()=>v(b,e),[e]),C=(0,h.useMemo)(()=>[{id:`total_0`,totalCount:i.length,yesCount:i.filter(e=>e.available).length}],[i]),w=(0,h.useMemo)(()=>o.length===0?i:i.toSorted((e,t)=>{for(let n of o){let r=S(n.columnKey),i=r(e,t);if(i!==0)return n.direction===`ASC`?i:-i}return 0}),[i,o]);function T(){(0,m.flushSync)(()=>{f(!0)}),t(g.current.element,`CommonFeatures.csv`),(0,m.flushSync)(()=>{f(!1)})}async function E(){(0,m.flushSync)(()=>{f(!0)}),await n(g.current.element,`CommonFeatures.pdf`),(0,m.flushSync)(()=>{f(!1)})}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(`div`,{className:`t7hd9f8`,children:[(0,p.jsx)(`button`,{type:`button`,onClick:T,children:`Export to CSV`}),(0,p.jsx)(`button`,{type:`button`,onClick:E,children:`Export to PDF`})]}),(0,p.jsx)(c,{ref:g,"aria-label":`Common Features Example`,rowKeyGetter:y,columns:_,rows:w,defaultColumnOptions:{sortable:!0,resizable:!0},selectedRows:l,onSelectedRowsChange:u,onRowsChange:a,sortColumns:o,onSortColumnsChange:s,topSummaryRows:C,bottomSummaryRows:C,className:`fill-grid`,direction:e,enableVirtualization:!d})]})}export{C as component};
//# sourceMappingURL=CommonFeatures-CqdnaU8f.js.map