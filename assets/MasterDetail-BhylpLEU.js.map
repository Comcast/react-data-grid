{"version":3,"file":"MasterDetail-BhylpLEU.js","names":["useMemo","useState","faker","css","DataGrid","Column","RowsChangeData","Direction","CellExpanderFormatter","useDirection","Route","DepartmentRow","type","id","department","expanded","parentId","ProductRow","product","description","price","createDepartments","departments","i","push","commerce","productsMap","Map","getProducts","has","get","products","productName","productDescription","set","productColumns","key","name","width","ProductGrid","direction","rowKeyGetter","blockSize","row","SplitComponent","MasterDetail","columns","minWidth","colSpan","args","undefined","cellClass","renderCell","tabIndex","onRowChange","rows","setRows","onRowsChange","indexes","splice","_","event","isDefaultPrevented","preventGridDefault","component"],"sources":["../../website/routes/MasterDetail.tsx?tsr-split=component"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { faker } from '@faker-js/faker';\nimport { css } from '@linaria/core';\n\nimport { DataGrid } from '../../src';\nimport type { Column, RowsChangeData } from '../../src';\nimport type { Direction } from '../../src/types';\nimport { CellExpanderFormatter } from '../components';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: MasterDetail\n});\n\ntype DepartmentRow =\n  | {\n      type: 'MASTER';\n      id: number;\n      department: string;\n      expanded: boolean;\n    }\n  | {\n      type: 'DETAIL';\n      id: number;\n      parentId: number;\n    };\n\ninterface ProductRow {\n  id: number;\n  product: string;\n  description: string;\n  price: string;\n}\n\nfunction createDepartments(): readonly DepartmentRow[] {\n  const departments: DepartmentRow[] = [];\n  for (let i = 1; i < 30; i++) {\n    departments.push({\n      type: 'MASTER',\n      id: i,\n      department: faker.commerce.department(),\n      expanded: false\n    });\n  }\n  return departments;\n}\n\nconst productsMap = new Map<number, readonly ProductRow[]>();\n\nfunction getProducts(parentId: number): readonly ProductRow[] {\n  if (productsMap.has(parentId)) return productsMap.get(parentId)!;\n  const products: ProductRow[] = [];\n  for (let i = 0; i < 20; i++) {\n    products.push({\n      id: i,\n      product: faker.commerce.productName(),\n      description: faker.commerce.productDescription(),\n      price: faker.commerce.price()\n    });\n  }\n  productsMap.set(parentId, products);\n  return products;\n}\n\nconst productColumns: readonly Column<ProductRow>[] = [\n  { key: 'id', name: 'ID', width: 35 },\n  { key: 'product', name: 'Product' },\n  { key: 'description', name: 'Description' },\n  { key: 'price', name: 'Price' }\n];\n\nfunction MasterDetail() {\n  const direction = useDirection();\n\n  const columns = useMemo((): readonly Column<DepartmentRow>[] => {\n    return [\n      {\n        key: 'expanded',\n        name: '',\n        minWidth: 30,\n        width: 30,\n        colSpan(args) {\n          return args.type === 'ROW' && args.row.type === 'DETAIL' ? 3 : undefined;\n        },\n        cellClass(row) {\n          return row.type === 'DETAIL'\n            ? css`\n                padding: 24px;\n              `\n            : undefined;\n        },\n        renderCell({ row, tabIndex, onRowChange }) {\n          if (row.type === 'DETAIL') {\n            return <ProductGrid parentId={row.parentId} direction={direction} />;\n          }\n\n          return (\n            <CellExpanderFormatter\n              expanded={row.expanded}\n              tabIndex={tabIndex}\n              onCellExpand={() => {\n                onRowChange({ ...row, expanded: !row.expanded });\n              }}\n            />\n          );\n        }\n      },\n      { key: 'id', name: 'ID', width: 35 },\n      { key: 'department', name: 'Department' }\n    ];\n  }, [direction]);\n  const [rows, setRows] = useState(createDepartments);\n\n  function onRowsChange(rows: DepartmentRow[], { indexes }: RowsChangeData<DepartmentRow>) {\n    const row = rows[indexes[0]];\n    if (row.type === 'MASTER') {\n      if (row.expanded) {\n        rows.splice(indexes[0] + 1, 0, {\n          type: 'DETAIL',\n          id: row.id + 100,\n          parentId: row.id\n        });\n      } else {\n        rows.splice(indexes[0] + 1, 1);\n      }\n      setRows(rows);\n    }\n  }\n\n  return (\n    <DataGrid\n      aria-label=\"Master Detail Example\"\n      rowKeyGetter={rowKeyGetter}\n      columns={columns}\n      rows={rows}\n      onRowsChange={onRowsChange}\n      headerRowHeight={45}\n      rowHeight={(row) => (row.type === 'DETAIL' ? 300 : 45)}\n      className=\"fill-grid\"\n      enableVirtualization={false}\n      direction={direction}\n      onCellKeyDown={(_, event) => {\n        if (event.isDefaultPrevented()) {\n          // skip parent grid keyboard navigation if nested grid handled it\n          event.preventGridDefault();\n        }\n      }}\n    />\n  );\n}\n\nfunction ProductGrid({ parentId, direction }: { parentId: number; direction: Direction }) {\n  const products = getProducts(parentId);\n\n  return (\n    <DataGrid\n      rows={products}\n      columns={productColumns}\n      rowKeyGetter={rowKeyGetter}\n      style={{ blockSize: 250 }}\n      direction={direction}\n    />\n  );\n}\n\nfunction rowKeyGetter(row: DepartmentRow | ProductRow) {\n  return row.id;\n}\n"],"mappings":"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"}