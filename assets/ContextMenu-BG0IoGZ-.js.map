{"version":3,"file":"ContextMenu-BG0IoGZ-.js","names":["useLayoutEffect","useReducer","useRef","useState","createPortal","faker","css","DataGrid","Column","useDirection","Route","contextMenuClassname","Row","id","product","price","createRows","rows","i","push","commerce","productName","columns","key","name","rowKeyGetter","row","ContextMenuDemo","direction","setRows","nextId","setNextId","length","contextMenuProps","setContextMenuProps","rowIdx","top","left","menuRef","HTMLMenuElement","isContextMenuOpen","onMouseDown","event","MouseEvent","target","Node","current","contains","addEventListener","removeEventListener","insertRow","insertRowIdx","newRow","toSpliced","preventGridDefault","preventDefault","indexOf","clientY","clientX","document","body","component"],"sources":["../../website/routes/ContextMenu.wyw-in-js.css","../../website/routes/ContextMenu.tsx?tsr-split=component"],"sourcesContent":[".c1wfxb71 {\n  position: absolute;\n  background-color: #ffffff;\n  border: 1px solid black;\n  padding: 16px;\n  list-style: none;\n\n  > li {\n    padding: 8px;\n  }\n}\n\n","import { useLayoutEffect, useReducer, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { faker } from '@faker-js/faker';\nimport { css } from '@linaria/core';\n\nimport { DataGrid } from '../../src';\nimport type { Column } from '../../src';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: ContextMenuDemo\n});\n\nconst contextMenuClassname = css`\n  position: absolute;\n  background-color: #ffffff;\n  border: 1px solid black;\n  padding: 16px;\n  list-style: none;\n\n  > li {\n    padding: 8px;\n  }\n`;\n\ninterface Row {\n  id: number;\n  product: string;\n  price: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 1000; i++) {\n    rows.push({\n      id: i,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  { key: 'id', name: 'ID' },\n  { key: 'product', name: 'Product' },\n  { key: 'price', name: 'Price' }\n];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfunction ContextMenuDemo() {\n  const direction = useDirection();\n  const [rows, setRows] = useState(createRows);\n  const [nextId, setNextId] = useReducer((id: number) => id + 1, rows[rows.length - 1].id + 1);\n  const [contextMenuProps, setContextMenuProps] = useState<{\n    rowIdx: number;\n    top: number;\n    left: number;\n  } | null>(null);\n  const menuRef = useRef<HTMLMenuElement>(null);\n  const isContextMenuOpen = contextMenuProps !== null;\n\n  useLayoutEffect(() => {\n    if (!isContextMenuOpen) return;\n\n    function onMouseDown(event: MouseEvent) {\n      if (event.target instanceof Node && menuRef.current?.contains(event.target)) {\n        return;\n      }\n      setContextMenuProps(null);\n    }\n\n    addEventListener('mousedown', onMouseDown);\n\n    return () => {\n      removeEventListener('mousedown', onMouseDown);\n    };\n  }, [isContextMenuOpen]);\n\n  function insertRow(insertRowIdx: number) {\n    const newRow: Row = {\n      id: nextId,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    };\n\n    setRows(rows.toSpliced(insertRowIdx, 0, newRow));\n    setNextId();\n  }\n\n  return (\n    <>\n      <DataGrid\n        aria-label=\"Context Menu Example\"\n        rowKeyGetter={rowKeyGetter}\n        columns={columns}\n        rows={rows}\n        className=\"fill-grid\"\n        direction={direction}\n        onCellContextMenu={({ row }, event) => {\n          event.preventGridDefault();\n          // Do not show the default context menu\n          event.preventDefault();\n          setContextMenuProps({\n            rowIdx: rows.indexOf(row),\n            top: event.clientY,\n            left: event.clientX\n          });\n        }}\n      />\n      {isContextMenuOpen &&\n        createPortal(\n          <menu\n            ref={menuRef}\n            className={contextMenuClassname}\n            style={{\n              top: contextMenuProps.top,\n              left: contextMenuProps.left\n            }}\n          >\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setRows(rows.toSpliced(contextMenuProps.rowIdx, 1));\n                  setContextMenuProps(null);\n                }}\n              >\n                Delete Row\n              </button>\n            </li>\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const { rowIdx } = contextMenuProps;\n                  insertRow(rowIdx);\n                  setContextMenuProps(null);\n                }}\n              >\n                Insert Row Above\n              </button>\n            </li>\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const { rowIdx } = contextMenuProps;\n                  insertRow(rowIdx + 1);\n                  setContextMenuProps(null);\n                }}\n              >\n                Insert Row Below\n              </button>\n            </li>\n          </menu>,\n          document.body\n        )}\n    </>\n  );\n}\n"],"mappings":"qJCaMW,EAAAA,WAkBN,SAASK,GAA6B,CACpC,IAAMC,EAAc,EAAE,CAEtB,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAMA,IACxBD,EAAKE,KAAK,CACRN,GAAIK,EACJJ,QAAST,EAAMe,SAASC,aAAa,CACrCN,MAAOV,EAAMe,SAASL,OAAAA,CACvB,CAAC,CAGJ,OAAOE,EAGT,IAAMK,EAAkC,CACtC,CAAEC,IAAK,KAAMC,KAAM,KAAM,CACzB,CAAED,IAAK,UAAWC,KAAM,UAAW,CACnC,CAAED,IAAK,QAASC,KAAM,QAAS,CAChC,CAED,SAASC,EAAaC,EAAU,CAC9B,OAAOA,EAAIb,GAGb,SAASc,GAAkB,CACzB,IAAMC,EAAYnB,GAAc,CAC1B,CAACQ,EAAMY,IAAAA,EAAAA,EAAAA,UAAoBb,EAAW,CACtC,CAACc,EAAQC,IAAAA,EAAAA,EAAAA,YAAyBlB,GAAeA,EAAK,EAAGI,EAAKA,EAAKe,OAAS,GAAGnB,GAAK,EAAE,CACtF,CAACoB,EAAkBC,IAAAA,EAAAA,EAAAA,UAIf,KAAK,CACTI,GAAAA,EAAAA,EAAAA,QAAkC,KAAK,CACvCE,EAAoBP,IAAqB,MAE/CjC,EAAAA,EAAAA,qBAAsB,CACpB,GAAI,CAACwC,EAAmB,OAExB,SAASC,EAAYC,EAAmB,CAClCA,EAAME,kBAAkBC,MAAQP,EAAQQ,SAASC,SAASL,EAAME,OAAO,EAG3EV,EAAoB,KAAK,CAK3B,OAFAc,iBAAiB,YAAaP,EAAY,KAE7B,CACXQ,oBAAoB,YAAaR,EAAY,GAE9C,CAACD,EAAkB,CAAC,CAEvB,SAASU,EAAUC,EAAsB,CACvC,IAAMC,EAAc,CAClBvC,GAAIiB,EACJhB,QAAST,EAAMe,SAASC,aAAa,CACrCN,MAAOV,EAAMe,SAASL,OAAAA,CACvB,CAEDc,EAAQZ,EAAKoC,UAAUF,EAAc,EAAGC,EAAO,CAAC,CAChDrB,GAAW,CAGb,OACE,EAAA,EAAA,MAAA,EAAA,SAAA,CAAA,SAAA,EACE,EAAA,EAAA,KAAC,EAAA,CACC,aAAW,uBACGN,eACLH,UACHL,OACN,UAAU,YACCW,YACX,mBAAoB,CAAEF,OAAOgB,IAAU,CACrCA,EAAMY,oBAAoB,CAE1BZ,EAAMa,gBAAgB,CACtBrB,EAAoB,CAClBC,OAAQlB,EAAKuC,QAAQ9B,EAAI,CACzBU,IAAKM,EAAMe,QACXpB,KAAMK,EAAMgB,QACb,CAAC,GACF,CAEHlB,IAAAA,EAAAA,EAAAA,eAEG,EAAA,EAAA,MAAC,OAAA,CACC,IAAKF,EACL,UAAW3B,EACX,MAAO,CACLyB,IAAKH,EAAiBG,IACtBC,KAAMJ,EAAiBI,KACxB,YAED,EAAA,EAAA,KAAC,KAAA,CAAA,UACC,EAAA,EAAA,KAAC,SAAA,CACC,KAAK,SACL,YAAe,CACbR,EAAQZ,EAAKoC,UAAUpB,EAAiBE,OAAQ,EAAE,CAAC,CACnDD,EAAoB,KAAK,WACzB,eAGI,CACN,EACJ,EAAA,EAAA,KAAC,KAAA,CAAA,UACC,EAAA,EAAA,KAAC,SAAA,CACC,KAAK,SACL,YAAe,CACb,GAAM,CAAEC,UAAWF,EACnBiB,EAAUf,EAAO,CACjBD,EAAoB,KAAK,WACzB,qBAGI,CACN,EACJ,EAAA,EAAA,KAAC,KAAA,CAAA,UACC,EAAA,EAAA,KAAC,SAAA,CACC,KAAK,SACL,YAAe,CACb,GAAM,CAAEC,UAAWF,EACnBiB,EAAUf,EAAS,EAAE,CACrBD,EAAoB,KAAK,WACzB,qBAGI,CACN,CAAA,EACC,CACPyB,SAASC,KACV,CAAA,CAAA,CACF"}