const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-BALfrA7y.js","assets/index-C6hkc_8C.js","assets/index-B8l4d-uO.css","assets/jspdf.plugin.autotable-D34vg7QU.js","assets/_commonjsHelpers-BosuxZz1.js"])))=>i.map(i=>d[i]);
import{_ as w,c as T,u as F,r as c,j as a,a as d,f as i}from"./index-C6hkc_8C.js";import{t as u,a as _}from"./textEditor-5wjZrgA5.js";import{D as A,l as D,m as M}from"./DataGrid-Cmzv6BAB.js";function P(t,n){const{head:e,body:r,foot:o}=x(t),s=[...e,...r,...o].map(m=>m.map(L).join(",")).join(`
`);I(n,new Blob([s],{type:"text/csv;charset=utf-8;"}))}async function z(t,n){const{head:e,body:r,foot:o}=x(t),[{jsPDF:s},{default:m}]=await Promise.all([w(()=>import("./jspdf.es.min-BALfrA7y.js").then(l=>l.j),__vite__mapDeps([0,1,2])),w(()=>import("./jspdf.plugin.autotable-D34vg7QU.js").then(l=>l.j),__vite__mapDeps([3,4,0,1,2]))]),p=new s({orientation:"l",unit:"px"});m(p,{head:e,body:r,foot:o,horizontalPageBreak:!0,styles:{cellPadding:1.5,fontSize:8,cellWidth:"wrap"},tableWidth:"wrap"}),p.save(n)}function x(t){return{head:n(".rdg-header-row"),body:n(".rdg-row:not(.rdg-summary-row)"),foot:n(".rdg-summary-row")};function n(e){return Array.from(t.querySelectorAll(e)).map(r=>Array.from(r.querySelectorAll(".rdg-cell")).map(o=>o.innerText))}}function L(t){if(typeof t=="string"){const n=t.replace(/"/g,'""');return n.includes(",")?`"${n}"`:n}return t}function I(t,n){const e=document.createElement("a");e.download=t;const r=URL.createObjectURL(n);e.href=r,e.click(),URL.revokeObjectURL(r)}const Q=T("/CommonFeatures")({component:K}),N="t1sn5bov",V="d53963l",b=new Intl.DateTimeFormat(navigator.language),O=new Intl.NumberFormat(navigator.language,{style:"currency",currency:"eur"});function $(t,n){return[D,{key:"id",name:"ID",frozen:!0,resizable:!1,renderSummaryCell(){return a.jsx("strong",{children:"Total"})}},{key:"title",name:"Task",frozen:!0,renderEditCell:u,renderSummaryCell({row:e}){return`${e.totalCount} records`}},{key:"client",name:"Client",width:"max-content",draggable:!0,renderEditCell:u},{key:"area",name:"Area",renderEditCell:u},{key:"country",name:"Country",renderEditCell:e=>a.jsx("select",{autoFocus:!0,className:_,value:e.row.country,onChange:r=>e.onRowChange({...e.row,country:r.target.value},!0),children:t.map(r=>a.jsx("option",{children:r},r))})},{key:"contact",name:"Contact",renderEditCell:u},{key:"assignee",name:"Assignee",renderEditCell:u},{key:"progress",name:"Completion",renderCell(e){const r=e.row.progress;return a.jsxs(a.Fragment,{children:[a.jsx("progress",{max:100,value:r,style:{inlineSize:50}})," ",Math.round(r),"%"]})},renderEditCell({row:e,onRowChange:r,onClose:o}){return d.createPortal(a.jsx("div",{dir:n,className:V,onKeyDown:s=>{s.key==="Escape"&&o()},children:a.jsxs("dialog",{open:!0,children:[a.jsx("input",{autoFocus:!0,type:"range",min:"0",max:"100",value:e.progress,onChange:s=>r({...e,progress:s.target.valueAsNumber})}),a.jsxs("menu",{children:[a.jsx("button",{type:"button",onClick:()=>o(),children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>o(!0),children:"Save"})]})]})}),document.body)},editorOptions:{displayCellContent:!0}},{key:"startTimestamp",name:"Start date",renderCell(e){return b.format(e.row.startTimestamp)}},{key:"endTimestamp",name:"Deadline",renderCell(e){return b.format(e.row.endTimestamp)}},{key:"budget",name:"Budget",renderCell(e){return O.format(e.row.budget)}},{key:"transaction",name:"Transaction type"},{key:"account",name:"Account"},{key:"version",name:"Version",renderEditCell:u},{key:"available",name:"Available",renderCell({row:e,onRowChange:r,tabIndex:o}){return a.jsx(M,{value:e.available,onChange:()=>{r({...e,available:!e.available})},tabIndex:o})},renderSummaryCell({row:{yesCount:e,totalCount:r}}){return`${Math.floor(100*e/r)}% ✔️`}}]}function U(t){return t.id}let S=[];function B(){const t=Date.now(),n=[],e=new Set;for(let r=0;r<1e3;r++){const o=i.location.country();e.add(o),n.push({id:r,title:`Task #${r+1}`,client:i.company.name(),area:i.person.jobArea(),country:o,contact:i.internet.exampleEmail(),assignee:i.person.fullName(),progress:Math.random()*100,startTimestamp:t-Math.round(Math.random()*1e10),endTimestamp:t+Math.round(Math.random()*1e10),budget:500+Math.random()*10500,transaction:i.finance.transactionType(),account:i.finance.iban(),version:i.system.semver(),available:Math.random()>.5})}return S=[...e].sort(new Intl.Collator().compare),n}function G(t){switch(t){case"assignee":case"title":case"client":case"area":case"country":case"contact":case"transaction":case"account":case"version":return(n,e)=>n[t].localeCompare(e[t]);case"available":return(n,e)=>n[t]===e[t]?0:n[t]?1:-1;case"id":case"progress":case"startTimestamp":case"endTimestamp":case"budget":return(n,e)=>n[t]-e[t];default:throw new Error(`unsupported sortColumn: "${t}"`)}}function K(){const t=F(),[n,e]=c.useState(B),[r,o]=c.useState([]),[s,m]=c.useState(()=>new Set),[p,l]=c.useState(!1),y=c.useRef(null),v=c.useMemo(()=>$(S,t),[t]),h=c.useMemo(()=>[{id:"total_0",totalCount:n.length,yesCount:n.filter(f=>f.available).length}],[n]),j=c.useMemo(()=>r.length===0?n:[...n].sort((f,R)=>{for(const C of r){const g=G(C.columnKey)(f,R);if(g!==0)return C.direction==="ASC"?g:-g}return 0}),[n,r]);function E(){d.flushSync(()=>{l(!0)}),P(y.current.element,"CommonFeatures.csv"),d.flushSync(()=>{l(!1)})}async function k(){d.flushSync(()=>{l(!0)}),await z(y.current.element,"CommonFeatures.pdf"),d.flushSync(()=>{l(!1)})}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:N,children:[a.jsx("button",{type:"button",onClick:E,children:"Export to CSV"}),a.jsx("button",{type:"button",onClick:k,children:"Export to PDF"})]}),a.jsx(A,{ref:y,rowKeyGetter:U,columns:v,rows:j,defaultColumnOptions:{sortable:!0,resizable:!0},selectedRows:s,onSelectedRowsChange:m,onRowsChange:e,sortColumns:r,onSortColumnsChange:o,topSummaryRows:h,bottomSummaryRows:h,className:"fill-grid",direction:t,enableVirtualization:!p})]})}export{Q as Route};
//# sourceMappingURL=CommonFeatures.lazy-BkJ3Wvqq.js.map
