{"version":3,"file":"InfiniteScrolling-CJFRjlZA.js","names":["useState","faker","css","DataGrid","useDirection","loadMoreRowsClassname","Row","id","email","title","firstName","lastName","rowKeyGetter","row","columns","Column","key","name","createFakeRowObjectData","index","internet","person","prefix","createRows","numberOfRows","rows","i","isAtBottom","currentTarget","React","UIEvent","HTMLDivElement","scrollTop","scrollHeight","clientHeight","loadMoreRows","newRowsCount","length","Promise","resolve","newRows","setTimeout","InfiniteScrolling","direction","setRows","isLoading","setIsLoading","handleScroll","event","component"],"sources":["../../website/routes/InfiniteScrolling.tsx?tsr-split=component"],"sourcesContent":["import { useState } from 'react';\nimport { faker } from '@faker-js/faker';\nimport { css } from 'ecij';\n\nimport { DataGrid, type Column } from '../../src';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: InfiniteScrolling\n});\n\nconst loadMoreRowsClassname = css`\n  inline-size: 180px;\n  padding-block: 8px;\n  padding-inline: 16px;\n  position: absolute;\n  inset-block-end: 8px;\n  inset-inline-end: 8px;\n  color: white;\n  line-height: 35px;\n  background: rgb(0 0 0 / 0.6);\n`;\n\ninterface Row {\n  id: string;\n  email: string;\n  title: string;\n  firstName: string;\n  lastName: string;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID'\n  },\n  {\n    key: 'title',\n    name: 'Title'\n  },\n  {\n    key: 'firstName',\n    name: 'First Name'\n  },\n  {\n    key: 'lastName',\n    name: 'Last Name'\n  },\n  {\n    key: 'email',\n    name: 'Email'\n  }\n];\n\nfunction createFakeRowObjectData(index: number): Row {\n  return {\n    id: `id_${index}`,\n    email: faker.internet.email(),\n    title: faker.person.prefix(),\n    firstName: faker.person.firstName(),\n    lastName: faker.person.lastName()\n  };\n}\n\nfunction createRows(numberOfRows: number): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 0; i < numberOfRows; i++) {\n    rows[i] = createFakeRowObjectData(i);\n  }\n\n  return rows;\n}\n\nfunction isAtBottom({ currentTarget }: React.UIEvent<HTMLDivElement>): boolean {\n  return currentTarget.scrollTop + 10 >= currentTarget.scrollHeight - currentTarget.clientHeight;\n}\n\nfunction loadMoreRows(newRowsCount: number, length: number): Promise<Row[]> {\n  return new Promise((resolve) => {\n    const newRows: Row[] = [];\n\n    for (let i = 0; i < newRowsCount; i++) {\n      newRows[i] = createFakeRowObjectData(i + length);\n    }\n\n    setTimeout(() => resolve(newRows), 1000);\n  });\n}\n\nfunction InfiniteScrolling() {\n  const direction = useDirection();\n  const [rows, setRows] = useState(() => createRows(50));\n  const [isLoading, setIsLoading] = useState(false);\n\n  async function handleScroll(event: React.UIEvent<HTMLDivElement>) {\n    if (isLoading || !isAtBottom(event)) return;\n\n    setIsLoading(true);\n\n    const newRows = await loadMoreRows(50, rows.length);\n\n    setRows([...rows, ...newRows]);\n    setIsLoading(false);\n  }\n\n  return (\n    <>\n      <DataGrid\n        aria-label=\"Infinite Scrolling Example\"\n        columns={columns}\n        rows={rows}\n        rowKeyGetter={rowKeyGetter}\n        onRowsChange={setRows}\n        rowHeight={30}\n        onScroll={handleScroll}\n        className=\"fill-grid\"\n        direction={direction}\n      />\n      {isLoading && <div className={loadMoreRowsClassname}>Loading more rows...</div>}\n    </>\n  );\n}\n"],"mappings":"6QA+BA,IAAA,QACE,KAAOa,SAGT,CACE,IAAA,YACEG,KAAK,aACLC,EAEF,IAAA,WACED,KAAK,YACLC,EAEF,IAAA,QACED,KAAK,QACLC,WAEF,EAAA,EAAA,OACO,CACLA,GAAAA,MAAM,IACP,MAAA,EAAA,SAAA,OAAA,CACD,MAAA,EAAA,OAAA,QAAA,CACED,UAAK,EAAA,OAAA,WAAA,CACLC,SAAM,EAAA,OAAA,UAAA,EAIV,SAASC,EAAAA,EAAwBC,CAC/B,IAAA,EAAO,EAAA,KACD,IAAA,EAAMA,EAAAA,EAAAA,EAAAA,IACVX,EAAAA,GAAOP,EAAsB,EAAA,QAE7BS,WAED,EAAA,CAAA,iBAAA,+DAIKe,EAAgB,EAAA,EAAA,CAEtB,OAAK,IAAIC,QAAWF,GAAAA,CAClBC,IAAKC,EAAKR,EAAAA,qBAGZ,EAAOO,GAAAA,EAAAA,EAAAA,EAAAA,CAGT,eAASE,EAAaC,EAAAA,CAAAA,IAAyD,EAC7E,CAGF,SAASO,GAAaC,CACpB,IAAA,EAAWE,GAAqB,CAC9B,CAAME,EAAAA,IAAAA,EAAAA,EAAAA,cAAmB,EAAA,GAAA,CAAA,CAEpB,CAAA,EAAWd,IAAAA,EAAAA,EAAAA,UAAuB,GAAA,CACrCc,eAAatB,EAAAA,EAAAA,oBAGfuB,EAAAA,GAAiBF,KACjB,EAAA,MAAA,EAAA,GAAA,EAAA,OAAA,gBAGJ,EAASG,GAAAA,CAEP,OAAaE,EAAAA,EAAAA,MAAW5C,EAAAA,SAAeuB,CAAAA,SAAW,EAAI,EAAA,EAAA,KAAA,EAAA,CACtD,aAAOsB,6BAEP,UACE,OAEAC,eAEA,aAAMN,EAENI,UAAS,GACTE,SAAAA,wBAGF,YAGM,CAAA,CAAA,IAAW,EAAA,EAAA,KAAA,MAAA,CACFhC,UAAAA,EACHW,SAAAA,uBACQb,CAAAA,CAAAA,CAAAA,CAAAA"}