const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-Ch3v5KKw.js","assets/index-BpoX4Tte.js","assets/index-BFwDrf-G.css","assets/typeof-BBh6139A.js"])))=>i.map(i=>d[i]);
import{DataGrid as e,SelectCellFormatter as t,SelectColumn as n}from"./DataGrid-DeyN1_mD.js";import{textEditor as r,textEditorClassname as i}from"./textEditor-Eiqy3SDE.js";import{__toESM as a,__vitePreload as o,f as s,require_jsx_runtime as c,require_react as l,require_react_dom as u,useDirection as d}from"./index-BpoX4Tte.js";function f(e,t){let{head:n,body:r,foot:i}=m(e),a=[...n,...r,...i].map(e=>e.map(h).join(`,`)).join(`
`);g(t,new Blob([a],{type:`text/csv;charset=utf-8;`}))}async function p(e,t){let{head:n,body:r,foot:i}=m(e),[{jsPDF:a},{default:s}]=await Promise.all([o(()=>import(`./jspdf.es.min-Ch3v5KKw.js`),__vite__mapDeps([0,1,2,3])),o(()=>import(`./jspdf.plugin.autotable-CBu0BP6t.js`),[])]),c=new a({orientation:`l`,unit:`px`});s(c,{head:n,body:r,foot:i,horizontalPageBreak:!0,styles:{cellPadding:1.5,fontSize:8,cellWidth:`wrap`},tableWidth:`wrap`}),c.save(t)}function m(e){return{head:t(`.rdg-header-row`),body:t(`.rdg-row:not(.rdg-summary-row)`),foot:t(`.rdg-summary-row`)};function t(t){return Array.from(e.querySelectorAll(t)).map(e=>Array.from(e.querySelectorAll(`.rdg-cell`)).map(e=>e.innerText))}}function h(e){if(typeof e==`string`){let t=e.replace(/"/g,`""`);return t.includes(`,`)?`"${t}"`:t}return e}function g(e,t){let n=document.createElement(`a`);n.download=e;let r=URL.createObjectURL(t);n.href=r,n.click(),URL.revokeObjectURL(r)}var _=a(l()),v=a(u()),y=a(c());const b=`t7hd9f8`,x=`dhwnept`,S=new Intl.DateTimeFormat(navigator.language),C=new Intl.NumberFormat(navigator.language,{style:`currency`,currency:`eur`});function w(e,a){return[n,{key:`id`,name:`ID`,frozen:!0,resizable:!1,renderSummaryCell(){return(0,y.jsx)(`strong`,{children:`Total`})}},{key:`title`,name:`Task`,frozen:!0,renderEditCell:r,renderSummaryCell({row:e}){return`${e.totalCount} records`}},{key:`client`,name:`Client`,width:`max-content`,draggable:!0,renderEditCell:r},{key:`area`,name:`Area`,renderEditCell:r},{key:`country`,name:`Country`,renderEditCell:t=>(0,y.jsx)(`select`,{autoFocus:!0,className:i,value:t.row.country,onChange:e=>t.onRowChange({...t.row,country:e.target.value},!0),children:e.map(e=>(0,y.jsx)(`option`,{children:e},e))})},{key:`contact`,name:`Contact`,renderEditCell:r},{key:`assignee`,name:`Assignee`,renderEditCell:r},{key:`progress`,name:`Completion`,renderCell(e){let t=e.row.progress;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(`progress`,{max:100,value:t,style:{inlineSize:50}}),` `,Math.round(t),`%`]})},renderEditCell({row:e,onRowChange:t,onClose:n}){return(0,v.createPortal)((0,y.jsx)(`div`,{dir:a,className:x,onKeyDown:e=>{e.key===`Escape`&&n()},children:(0,y.jsxs)(`dialog`,{open:!0,children:[(0,y.jsx)(`input`,{autoFocus:!0,type:`range`,min:`0`,max:`100`,value:e.progress,onChange:n=>t({...e,progress:n.target.valueAsNumber})}),(0,y.jsxs)(`menu`,{children:[(0,y.jsx)(`button`,{type:`button`,onClick:()=>n(),children:`Cancel`}),(0,y.jsx)(`button`,{type:`button`,onClick:()=>n(!0),children:`Save`})]})]})}),document.body)},editorOptions:{displayCellContent:!0}},{key:`startTimestamp`,name:`Start date`,renderCell(e){return S.format(e.row.startTimestamp)}},{key:`endTimestamp`,name:`Deadline`,renderCell(e){return S.format(e.row.endTimestamp)}},{key:`budget`,name:`Budget`,renderCell(e){return C.format(e.row.budget)}},{key:`transaction`,name:`Transaction type`},{key:`account`,name:`Account`},{key:`version`,name:`Version`,renderEditCell:r},{key:`available`,name:`Available`,renderCell({row:e,onRowChange:n,tabIndex:r}){return(0,y.jsx)(t,{value:e.available,onChange:()=>{n({...e,available:!e.available})},tabIndex:r})},renderSummaryCell({row:{yesCount:e,totalCount:t}}){return`${Math.floor(100*e/t)}% ✔️`}}]}function T(e){return e.id}let E=[];function D(){let e=Date.now(),t=[],n=new Set;for(let r=0;r<1e3;r++){let i=s.location.country();n.add(i),t.push({id:r,title:`Task #${r+1}`,client:s.company.name(),area:s.person.jobArea(),country:i,contact:s.internet.exampleEmail(),assignee:s.person.fullName(),progress:Math.random()*100,startTimestamp:e-Math.round(Math.random()*1e10),endTimestamp:e+Math.round(Math.random()*1e10),budget:500+Math.random()*10500,transaction:s.finance.transactionType(),account:s.finance.iban(),version:s.system.semver(),available:Math.random()>.5})}return E=[...n].sort(new Intl.Collator().compare),t}function O(e){switch(e){case`assignee`:case`title`:case`client`:case`area`:case`country`:case`contact`:case`transaction`:case`account`:case`version`:return(t,n)=>t[e].localeCompare(n[e]);case`available`:return(t,n)=>t[e]===n[e]?0:t[e]?1:-1;case`id`:case`progress`:case`startTimestamp`:case`endTimestamp`:case`budget`:return(t,n)=>t[e]-n[e];default:throw Error(`unsupported sortColumn: "${e}"`)}}const k=function(){let t=d(),[n,r]=(0,_.useState)(D),[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(()=>new Set),[c,l]=(0,_.useState)(!1),u=(0,_.useRef)(null),m=(0,_.useMemo)(()=>w(E,t),[t]),h=(0,_.useMemo)(()=>[{id:`total_0`,totalCount:n.length,yesCount:n.filter(e=>e.available).length}],[n]),g=(0,_.useMemo)(()=>i.length===0?n:n.toSorted((e,t)=>{for(let n of i){let r=O(n.columnKey),i=r(e,t);if(i!==0)return n.direction===`ASC`?i:-i}return 0}),[n,i]);function x(){(0,v.flushSync)(()=>{l(!0)}),f(u.current.element,`CommonFeatures.csv`),(0,v.flushSync)(()=>{l(!1)})}async function S(){(0,v.flushSync)(()=>{l(!0)}),await p(u.current.element,`CommonFeatures.pdf`),(0,v.flushSync)(()=>{l(!1)})}return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(`div`,{className:b,children:[(0,y.jsx)(`button`,{type:`button`,onClick:x,children:`Export to CSV`}),(0,y.jsx)(`button`,{type:`button`,onClick:S,children:`Export to PDF`})]}),(0,y.jsx)(e,{ref:u,"aria-label":`Common Features Example`,rowKeyGetter:T,columns:m,rows:g,defaultColumnOptions:{sortable:!0,resizable:!0},selectedRows:o,onSelectedRowsChange:s,onRowsChange:r,sortColumns:i,onSortColumnsChange:a,topSummaryRows:h,bottomSummaryRows:h,className:`fill-grid`,direction:t,enableVirtualization:!c})]})};export{k as component};
//# sourceMappingURL=CommonFeatures-_BOASwOe.js.map