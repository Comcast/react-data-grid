{"version":3,"file":"ContextMenu-DUyrhpWe.js","names":["useLayoutEffect","useReducer","useRef","useState","createPortal","faker","css","DataGrid","useDirection","contextMenuClassname","Row","id","product","price","createRows","rows","i","push","commerce","productName","columns","Column","key","name","rowKeyGetter","row","ContextMenuDemo","direction","setRows","nextId","setNextId","length","contextMenuProps","setContextMenuProps","rowIdx","top","left","menuRef","HTMLMenuElement","isContextMenuOpen","onMouseDown","event","MouseEvent","target","Node","current","contains","addEventListener","removeEventListener","insertRow","insertRowIdx","newRow","toSpliced","preventGridDefault","preventDefault","indexOf","clientY","clientX","document","body","component"],"sources":["../../website/routes/ContextMenu.tsx?tsr-split=component"],"sourcesContent":["import { useLayoutEffect, useReducer, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { faker } from '@faker-js/faker';\nimport { css } from 'ecij';\n\nimport { DataGrid, type Column } from '../../src';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: ContextMenuDemo\n});\n\nconst contextMenuClassname = css`\n  position: absolute;\n  background-color: #ffffff;\n  border: 1px solid black;\n  padding: 16px;\n  list-style: none;\n\n  > li {\n    padding: 8px;\n  }\n`;\n\ninterface Row {\n  id: number;\n  product: string;\n  price: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 1000; i++) {\n    rows.push({\n      id: i,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  { key: 'id', name: 'ID' },\n  { key: 'product', name: 'Product' },\n  { key: 'price', name: 'Price' }\n];\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nfunction ContextMenuDemo() {\n  const direction = useDirection();\n  const [rows, setRows] = useState(createRows);\n  const [nextId, setNextId] = useReducer((id: number) => id + 1, rows[rows.length - 1].id + 1);\n  const [contextMenuProps, setContextMenuProps] = useState<{\n    rowIdx: number;\n    top: number;\n    left: number;\n  } | null>(null);\n  const menuRef = useRef<HTMLMenuElement>(null);\n  const isContextMenuOpen = contextMenuProps !== null;\n\n  useLayoutEffect(() => {\n    if (!isContextMenuOpen) return;\n\n    function onMouseDown(event: MouseEvent) {\n      if (event.target instanceof Node && menuRef.current?.contains(event.target)) {\n        return;\n      }\n      setContextMenuProps(null);\n    }\n\n    addEventListener('mousedown', onMouseDown);\n\n    return () => {\n      removeEventListener('mousedown', onMouseDown);\n    };\n  }, [isContextMenuOpen]);\n\n  function insertRow(insertRowIdx: number) {\n    const newRow: Row = {\n      id: nextId,\n      product: faker.commerce.productName(),\n      price: faker.commerce.price()\n    };\n\n    setRows(rows.toSpliced(insertRowIdx, 0, newRow));\n    setNextId();\n  }\n\n  return (\n    <>\n      <DataGrid\n        aria-label=\"Context Menu Example\"\n        rowKeyGetter={rowKeyGetter}\n        columns={columns}\n        rows={rows}\n        className=\"fill-grid\"\n        direction={direction}\n        onCellContextMenu={({ row }, event) => {\n          event.preventGridDefault();\n          // Do not show the default context menu\n          event.preventDefault();\n          setContextMenuProps({\n            rowIdx: rows.indexOf(row),\n            top: event.clientY,\n            left: event.clientX\n          });\n        }}\n      />\n      {isContextMenuOpen &&\n        createPortal(\n          <menu\n            ref={menuRef}\n            className={contextMenuClassname}\n            style={{\n              top: contextMenuProps.top,\n              left: contextMenuProps.left\n            }}\n          >\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setRows(rows.toSpliced(contextMenuProps.rowIdx, 1));\n                  setContextMenuProps(null);\n                }}\n              >\n                Delete Row\n              </button>\n            </li>\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const { rowIdx } = contextMenuProps;\n                  insertRow(rowIdx);\n                  setContextMenuProps(null);\n                }}\n              >\n                Insert Row Above\n              </button>\n            </li>\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const { rowIdx } = contextMenuProps;\n                  insertRow(rowIdx + 1);\n                  setContextMenuProps(null);\n                }}\n              >\n                Insert Row Below\n              </button>\n            </li>\n          </menu>,\n          document.body\n        )}\n    </>\n  );\n}\n"],"mappings":"qRA8BA,OAAA,EAGE,IAAK,EAAQ,CACXe,KACMC,UACJJ,qBAKJ,KAAOG,WAGT,CACE,IAAA,QAAEO,KAAK,QAAMC,WACb,EAAA,EAAA,QAAO,EAAA,YAA4B,GAAA,CACnC,IAAA,EAAA,GAAA,CAAO,CAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,CAASA,CAAM,EAAA,IAAA,EAAA,EAAA,YAAA,GAAA,EAAA,EAAA,EAAA,EAAA,OAAA,GAAA,GAAA,EAAA,4BACvB,GAAA,EAAA,EAAA,QAAA,KAAA,CAED,EAAgC,IAAA,MAC9B,EAAA,EAAA,qBAAWZ,cAGb,SAASe,EAAAA,EAAkB,CACnBC,EAAAA,kBAAYnB,MAAc,EAAA,SAAA,SAAA,EAAA,OAAA,EAGhC,EAAOwB,KAAkBC,CAQzBjC,OAFA,iBAAMuC,YAAoBP,EAAAA,KAE1BhC,CACE,oBAAKuC,YAAmB,EAAA,GAGtB,CAAA,EAAUI,CAAAA,CACR,SAAA,EAAA,EAAA,QAEFV,GAAAA,mCAGFc,MAAAA,EAAAA,SAAiB,OAAaP,CAE9B,CACEQ,EAAAA,EAAAA,UAAoB,EAAaR,EAAAA,EAAY,CAAA,KAIjD,OAAmBU,EAAAA,EAAAA,MAAAA,EAAAA,SAAsB,CAAA,SAAA,EAAA,EAAA,EAAA,KAAA,EAAA,CACvC,aAAMC,iEAIL,YAEDvB,YACAE,mBAAW,CAAA,OAAA,IAAA,wBAGb,EACE,gBAAA,CAEI,EAAW,CACGN,OAAAA,EAAAA,QAAAA,EAAAA,CACLJ,IAAAA,EAAAA,QACHL,KAAAA,EAAAA,QACN,CAAA,EAEA,CAAA,CAAA,IAAA,EAAA,EAAA,eAAuC,EAAA,EAAA,MAAA,OAAA,CACrC0B,IAAAA,EAEAA,UAAMa,EACNrB,MAAAA,KACEC,EAAqBT,SAChBgB,EAAMe,eAEX,8CACF,KAEHjB,SAGK,YAAKF,CACL,EAAW5B,EAAAA,UAAAA,EAAAA,OAAAA,EAAAA,CAAAA,CACX,EAAO,KAAA,EAEL2B,SAAMJ,aACP,CAAA,CAAA,CAAA,8CAED,KAAA,SAEI,YAAK,CACL,GAAA,CAAA,UAAe,EACbJ,EAAQb,EAAKqC,CACbnB,EAAoB,KAAK,WACzB,oBAGI,CAAA,CACN,EACJ,EAAA,EAAA,KAAC,KAAA,CAAA,UACC,EAAA,EAAA,KAAC,SAAA,CACC,KAAK,SACL,YAAe,CACb,GAAM,CAAEC,UAAWF,EACnBiB,EAAUf,EAAO,EAAA,CACjBD,EAAoB,KAAK,WACzB,oBAGI,CAAA,CACN,CACJ,GAEI,SAAK,KAAA,CAAA,CAAA,CAAA"}