{"version":3,"file":"ColumnsReordering-BRVBfBXp.js","names":["useCallback","useMemo","useState","DataGrid","startViewTransition","useDirection","Row","id","task","complete","priority","issueType","createRows","rows","i","push","Math","min","round","random","columns","Column","key","name","width","resizable","sortable","draggable","initialColumnsOrder","map","_","index","ColumnsReordering","direction","columnsOrder","setColumnsOrder","sortColumns","setSortColumns","SortColumn","onSortColumnsChange","slice","columnWidths","setColumnWidths","ColumnWidths","Map","reorderedColumns","sortedRows","length","columnKey","sort","a","b","localeCompare","reverse","onColumnsReorder","sourceKey","targetKey","reorderColumns","sourceColumnOrderIndex","findIndex","targetColumnOrderIndex","sourceColumnOrder","newColumnsOrder","toSpliced","splice","resetOrderAndWidths","marginBottom","component"],"sources":["../../website/routes/ColumnsReordering.tsx?tsr-split=component"],"sourcesContent":["import { useCallback, useMemo, useState } from 'react';\n\nimport { DataGrid, type Column, type ColumnWidths, type SortColumn } from '../../src';\nimport { startViewTransition } from '../utils';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: ColumnsReordering\n});\n\ninterface Row {\n  readonly id: number;\n  readonly task: string;\n  readonly complete: number;\n  readonly priority: string;\n  readonly issueType: string;\n}\n\nfunction createRows(): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: Column<Row>[] = [\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    resizable: true,\n    sortable: true,\n    draggable: true\n  },\n  {\n    key: 'priority',\n    name: 'Priority',\n    resizable: true,\n    sortable: true,\n    draggable: true\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type',\n    resizable: true,\n    sortable: true,\n    draggable: true\n  },\n  {\n    key: 'complete',\n    name: '% Complete',\n    resizable: true,\n    sortable: true,\n    draggable: true\n  }\n];\n\nconst initialColumnsOrder: readonly number[] = columns.map((_, index) => index);\n\nfunction ColumnsReordering() {\n  const direction = useDirection();\n  const [rows] = useState(createRows);\n  const [columnsOrder, setColumnsOrder] = useState(initialColumnsOrder);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const onSortColumnsChange = useCallback((sortColumns: SortColumn[]) => {\n    setSortColumns(sortColumns.slice(-1));\n  }, []);\n  const [columnWidths, setColumnWidths] = useState((): ColumnWidths => new Map());\n\n  const reorderedColumns = useMemo(() => {\n    return columnsOrder.map((index) => columns[index]);\n  }, [columnsOrder]);\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n    const { columnKey, direction } = sortColumns[0];\n\n    let sortedRows: Row[] = [...rows];\n\n    switch (columnKey) {\n      case 'task':\n      case 'priority':\n      case 'issueType':\n        sortedRows = sortedRows.sort((a, b) => a[columnKey].localeCompare(b[columnKey]));\n        break;\n      case 'complete':\n        sortedRows = sortedRows.sort((a, b) => a[columnKey] - b[columnKey]);\n        break;\n      default:\n    }\n    return direction === 'DESC' ? sortedRows.reverse() : sortedRows;\n  }, [rows, sortColumns]);\n\n  function onColumnsReorder(sourceKey: string, targetKey: string) {\n    function reorderColumns() {\n      setColumnsOrder((columnsOrder) => {\n        const sourceColumnOrderIndex = columnsOrder.findIndex(\n          (index) => columns[index].key === sourceKey\n        );\n        const targetColumnOrderIndex = columnsOrder.findIndex(\n          (index) => columns[index].key === targetKey\n        );\n        const sourceColumnOrder = columnsOrder[sourceColumnOrderIndex];\n        const newColumnsOrder = columnsOrder.toSpliced(sourceColumnOrderIndex, 1);\n        newColumnsOrder.splice(targetColumnOrderIndex, 0, sourceColumnOrder);\n        return newColumnsOrder;\n      });\n    }\n\n    startViewTransition(reorderColumns);\n  }\n\n  function resetOrderAndWidths() {\n    setColumnsOrder(initialColumnsOrder);\n    setColumnWidths(new Map());\n  }\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        onClick={resetOrderAndWidths}\n        style={{\n          width: 150,\n          marginBottom: 16\n        }}\n      >\n        Reset Columns\n      </button>\n      <DataGrid\n        aria-label=\"Columns Reordering Example\"\n        columns={reorderedColumns}\n        rows={sortedRows}\n        sortColumns={sortColumns}\n        onSortColumnsChange={onSortColumnsChange}\n        direction={direction}\n        defaultColumnOptions={{ width: '1fr' }}\n        onColumnsReorder={onColumnsReorder}\n        columnWidths={columnWidths}\n        onColumnWidthsChange={setColumnWidths}\n      />\n    </>\n  );\n}\n"],"mappings":"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"}