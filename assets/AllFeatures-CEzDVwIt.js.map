{"version":3,"file":"AllFeatures-CEzDVwIt.js","names":["useState","css","clsx","DataGrid","SelectColumn","textEditor","CalculatedColumn","CellCopyArgs","CellPasteArgs","Column","FillEvent","textEditorClassname","useDirection","Route","highlightClassname","copiedRowClassname","Row","id","avatar","email","title","firstName","lastName","street","zipCode","date","bs","catchPhrase","companyName","words","sentence","rowKeyGetter","row","avatarClassname","titles","const","columns","key","name","width","resizable","frozen","renderCell","backgroundImage","renderEditCell","onRowChange","event","target","value","map","SplitComponent","AllFeatures","direction","initialRows","useLoaderData","rows","setRows","selectedRows","setSelectedRows","ReadonlySet","Set","copiedCell","setCopiedCell","column","handleFill","columnKey","sourceRow","targetRow","handleCellPaste","React","ClipboardEvent","HTMLDivElement","targetColumnKey","sourceColumnKey","incompatibleColumns","includes","copiedText","clipboardData","getData","handleCellCopy","window","getSelection","isCollapsed","setData","preventDefault","idx","index","args","preventGridDefault","selectCell","_","component"],"sources":["../../website/routes/AllFeatures.tsx?tsr-split=component"],"sourcesContent":["import { useState } from 'react';\nimport { faker } from '@faker-js/faker';\nimport { css } from '@linaria/core';\nimport clsx from 'clsx';\n\nimport { DataGrid, SelectColumn, textEditor } from '../../src';\nimport type { CalculatedColumn, CellCopyArgs, CellPasteArgs, Column, FillEvent } from '../../src';\nimport { textEditorClassname } from '../../src/editors/textEditor';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: AllFeatures,\n  loader() {\n    rows ??= createRows();\n    return rows;\n  }\n});\n\nlet rows: readonly Row[] | undefined;\n\nfunction createRows(): Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 0; i < 2000; i++) {\n    rows.push({\n      id: `id_${i}`,\n      avatar: faker.image.avatar(),\n      email: faker.internet.email(),\n      title: faker.person.prefix(),\n      firstName: faker.person.firstName(),\n      lastName: faker.person.lastName(),\n      street: faker.location.street(),\n      zipCode: faker.location.zipCode(),\n      date: faker.date.past().toLocaleDateString(),\n      bs: faker.company.buzzPhrase(),\n      catchPhrase: faker.company.catchPhrase(),\n      companyName: faker.company.name(),\n      words: faker.lorem.words(),\n      sentence: faker.lorem.sentence()\n    });\n  }\n\n  return rows;\n}\n\nconst highlightClassname = css`\n  .rdg-cell {\n    background-color: #9370db;\n    color: white;\n  }\n\n  &:hover .rdg-cell {\n    background-color: #800080;\n  }\n`;\n\nconst copiedRowClassname = css``;\n\nexport interface Row {\n  id: string;\n  avatar: string;\n  email: string;\n  title: string;\n  firstName: string;\n  lastName: string;\n  street: string;\n  zipCode: string;\n  date: string;\n  bs: string;\n  catchPhrase: string;\n  companyName: string;\n  words: string;\n  sentence: string;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\nconst avatarClassname = css`\n  margin: auto;\n  background-size: 100%;\n  block-size: 28px;\n  inline-size: 28px;\n`;\n\nconst titles = ['Dr.', 'Mr.', 'Mrs.', 'Miss', 'Ms.'] as const;\n\nconst columns: readonly Column<Row>[] = [\n  SelectColumn,\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80,\n    resizable: true,\n    frozen: true\n  },\n  {\n    key: 'avatar',\n    name: 'Avatar',\n    width: 40,\n    resizable: true,\n    renderCell({ row }) {\n      return <div className={avatarClassname} style={{ backgroundImage: `url(${row.avatar})` }} />;\n    }\n  },\n  {\n    key: 'title',\n    name: 'Title',\n    width: 200,\n    resizable: true,\n    renderEditCell({ row, onRowChange }) {\n      return (\n        <select\n          className={textEditorClassname}\n          value={row.title}\n          onChange={(event) => onRowChange({ ...row, title: event.target.value }, true)}\n          autoFocus\n        >\n          {titles.map((title) => (\n            <option key={title} value={title}>\n              {title}\n            </option>\n          ))}\n        </select>\n      );\n    }\n  },\n  {\n    key: 'firstName',\n    name: 'First Name',\n    width: 200,\n    resizable: true,\n    frozen: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'lastName',\n    name: 'Last Name',\n    width: 200,\n    resizable: true,\n    frozen: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'email',\n    name: 'Email',\n    width: 'max-content',\n    resizable: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'street',\n    name: 'Street',\n    width: 200,\n    resizable: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'zipCode',\n    name: 'ZipCode',\n    width: 200,\n    resizable: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'date',\n    name: 'Date',\n    width: 200,\n    resizable: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'bs',\n    name: 'bs',\n    width: 200,\n    resizable: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'catchPhrase',\n    name: 'Catch Phrase',\n    width: 'max-content',\n    resizable: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'companyName',\n    name: 'Company Name',\n    width: 200,\n    resizable: true,\n    renderEditCell: textEditor\n  },\n  {\n    key: 'sentence',\n    name: 'Sentence',\n    width: 'max-content',\n    resizable: true,\n    renderEditCell: textEditor\n  }\n];\n\nfunction AllFeatures() {\n  const direction = useDirection();\n  const initialRows = Route.useLoaderData();\n  const [rows, setRows] = useState(initialRows);\n  const [selectedRows, setSelectedRows] = useState((): ReadonlySet<string> => new Set());\n  const [copiedCell, setCopiedCell] = useState<{\n    readonly row: Row;\n    readonly column: CalculatedColumn<Row>;\n  } | null>(null);\n\n  function handleFill({ columnKey, sourceRow, targetRow }: FillEvent<Row>): Row {\n    return { ...targetRow, [columnKey]: sourceRow[columnKey as keyof Row] };\n  }\n\n  function handleCellPaste(\n    { row, column }: CellCopyArgs<Row>,\n    event: React.ClipboardEvent<HTMLDivElement>\n  ): Row {\n    const targetColumnKey = column.key;\n\n    if (copiedCell !== null) {\n      const sourceColumnKey = copiedCell.column.key;\n      const sourceRow = copiedCell.row;\n\n      const incompatibleColumns = ['email', 'zipCode', 'date'];\n      if (\n        sourceColumnKey === 'avatar' ||\n        ['id', 'avatar'].includes(targetColumnKey) ||\n        ((incompatibleColumns.includes(targetColumnKey) ||\n          incompatibleColumns.includes(sourceColumnKey)) &&\n          sourceColumnKey !== targetColumnKey)\n      ) {\n        return row;\n      }\n\n      return { ...row, [targetColumnKey]: sourceRow[sourceColumnKey as keyof Row] };\n    }\n\n    const copiedText = event.clipboardData.getData('text/plain');\n    if (copiedText !== '') {\n      return { ...row, [targetColumnKey]: copiedText };\n    }\n\n    return row;\n  }\n\n  function handleCellCopy(\n    { row, column }: CellPasteArgs<Row>,\n    event: React.ClipboardEvent<HTMLDivElement>\n  ): void {\n    // copy highlighted text only\n    if (window.getSelection()?.isCollapsed === false) {\n      setCopiedCell(null);\n      return;\n    }\n\n    setCopiedCell({ row, column });\n    event.clipboardData.setData('text/plain', row[column.key as keyof Row]);\n    event.preventDefault();\n  }\n\n  return (\n    <>\n      {copiedCell && (\n        <style>\n          {`\n          .${copiedRowClassname} > [aria-colindex=\"${copiedCell.column.idx + 1}\"] {\n            background-color: #ccccff;\n            &.rdg-cell-dragged-over {\n              background-color: #9999ff;\n            }\n          }\n       `}\n        </style>\n      )}\n      <DataGrid\n        aria-label=\"All Features Example\"\n        columns={columns}\n        rows={rows}\n        rowKeyGetter={rowKeyGetter}\n        onRowsChange={setRows}\n        onFill={handleFill}\n        onCellCopy={handleCellCopy}\n        onCellPaste={handleCellPaste}\n        rowHeight={30}\n        selectedRows={selectedRows}\n        isRowSelectionDisabled={(row) => row.id === 'id_2'}\n        onSelectedRowsChange={setSelectedRows}\n        className=\"fill-grid\"\n        rowClass={(row, index) => {\n          return clsx({\n            [highlightClassname]: row.id.includes('7') || index === 0,\n            [copiedRowClassname]: copiedCell?.row === row\n          });\n        }}\n        direction={direction}\n        onCellClick={(args, event) => {\n          if (args.column.key === 'title') {\n            event.preventGridDefault();\n            args.selectCell(true);\n          }\n        }}\n        onCellKeyDown={(_, event) => {\n          if (event.key === 'Escape') {\n            setCopiedCell(null);\n          }\n        }}\n      />\n    </>\n  );\n}\n"],"mappings":"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"}