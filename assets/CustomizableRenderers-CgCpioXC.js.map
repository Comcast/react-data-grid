{"version":3,"file":"CustomizableRenderers-CgCpioXC.js","names":["useMemo","useState","css","Row","BaseRow","Cell","DataGrid","renderTextEditor","SelectColumn","CellRendererProps","Column","RenderCheckboxProps","RenderRowProps","RenderSortStatusProps","SortColumn","useDirection","selectCellClassname","sortPriorityClassname","id","task","complete","priority","issueType","createRows","rows","i","push","Math","min","round","random","columns","headerCellClass","cellClass","key","name","width","renderEditCell","sortable","CustomizableRenderers","direction","setRows","sortColumns","setSortColumns","selectedRows","setSelectedRows","ReadonlySet","Set","sortedRows","length","toSorted","a","b","sort","comparator","getComparator","columnKey","compResult","rowKeyGetter","renderSortStatus","renderCheckbox","renderCell","renderRow","onChange","indeterminate","props","handleChange","e","React","ChangeEvent","HTMLInputElement","target","checked","nativeEvent","MouseEvent","shiftKey","el","sortDirection","undefined","cellStyle","CSSProperties","color","Key","style","column","row","rowStyle","Comparator","sortColumn","localeCompare","Error","component"],"sources":["../../website/routes/CustomizableRenderers.tsx?tsr-split=component"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { css } from 'ecij';\n\nimport { Row as BaseRow, Cell, DataGrid, renderTextEditor, SelectColumn } from '../../src';\nimport type {\n  CellRendererProps,\n  Column,\n  RenderCheckboxProps,\n  RenderRowProps,\n  RenderSortStatusProps,\n  SortColumn\n} from '../../src';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createFileRoute({\n  component: CustomizableRenderers\n});\n\nconst selectCellClassname = css`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > input {\n    margin: 0;\n  }\n`;\n\nconst sortPriorityClassname = css`\n  color: grey;\n  margin-left: 2px;\n`;\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    ...SelectColumn,\n    headerCellClass: selectCellClassname,\n    cellClass: selectCellClassname\n  },\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    renderEditCell: renderTextEditor,\n    sortable: true\n  },\n  {\n    key: 'priority',\n    name: 'Priority',\n    sortable: true\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type',\n    sortable: true\n  },\n  {\n    key: 'complete',\n    name: '% Complete',\n    sortable: true\n  }\n];\n\nfunction CustomizableRenderers() {\n  const direction = useDirection();\n  const [rows, setRows] = useState(createRows);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const [selectedRows, setSelectedRows] = useState((): ReadonlySet<number> => new Set());\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n\n    return rows.toSorted((a, b) => {\n      for (const sort of sortColumns) {\n        const comparator = getComparator(sort.columnKey);\n        const compResult = comparator(a, b);\n        if (compResult !== 0) {\n          return sort.direction === 'ASC' ? compResult : -compResult;\n        }\n      }\n      return 0;\n    });\n  }, [rows, sortColumns]);\n\n  return (\n    <DataGrid\n      aria-label=\"Customizable Renderers Example\"\n      className=\"fill-grid\"\n      columns={columns}\n      rows={sortedRows}\n      rowKeyGetter={rowKeyGetter}\n      onRowsChange={setRows}\n      sortColumns={sortColumns}\n      onSortColumnsChange={setSortColumns}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      renderers={{ renderSortStatus, renderCheckbox, renderCell, renderRow }}\n      direction={direction}\n    />\n  );\n}\n\nfunction renderCheckbox({ onChange, indeterminate, ...props }: RenderCheckboxProps) {\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    onChange(e.target.checked, (e.nativeEvent as MouseEvent).shiftKey);\n  }\n\n  return (\n    <input\n      ref={(el) => {\n        if (el) {\n          el.indeterminate = indeterminate === true;\n        }\n      }}\n      type=\"checkbox\"\n      {...props}\n      onChange={handleChange}\n    />\n  );\n}\n\nfunction renderSortStatus({ sortDirection, priority }: RenderSortStatusProps) {\n  return (\n    <>\n      {sortDirection !== undefined ? (sortDirection === 'ASC' ? '\\u2B9D' : '\\u2B9F') : null}\n      <span className={sortPriorityClassname}>{priority}</span>\n    </>\n  );\n}\n\nconst cellStyle: React.CSSProperties = { color: 'red' };\n\nfunction renderCell(key: React.Key, props: CellRendererProps<Row, unknown>) {\n  const style =\n    props.column.key === 'priority' && props.row.priority === 'Critical' ? cellStyle : undefined;\n\n  return <Cell key={key} {...props} style={style} />;\n}\n\nconst rowStyle: React.CSSProperties = { color: 'green' };\n\nfunction renderRow(key: React.Key, props: RenderRowProps<Row>) {\n  const style = props.row.complete === 100 ? rowStyle : undefined;\n\n  return <BaseRow key={key} {...props} style={style} />;\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\ntype Comparator = (a: Row, b: Row) => number;\n\nfunction getComparator(sortColumn: string): Comparator {\n  switch (sortColumn) {\n    case 'task':\n    case 'priority':\n    case 'issueType':\n      return (a, b) => {\n        return a[sortColumn].localeCompare(b[sortColumn]);\n      };\n    case 'complete':\n      return (a, b) => {\n        return a[sortColumn] - b[sortColumn];\n      };\n    default:\n      throw new Error(`unsupported sortColumn: \"${sortColumn}\"`);\n  }\n}\n"],"mappings":"+SA4BA,SAAMiB,KAAAA,IAAAA,IAAAA,KAAwBf,MAAG,KAAA,QAAA,CAAA,IAAA,CAAA,6BAajC,SACE,MAEA,CAAA,KAASuB,MAAI,KAAO,QAAKA,CAAK,EAAA,EAC5BD,UAAU,CACRN,MACAC,cACAC,OACAC,QAAW,CAAA,KAAA,MAAA,KAAA,QAAA,CAAA,EAAA,GAAY,QAAkB,MACzCC,EAAW,KAAQ,kBAAe,YAAQ,aAI9C,KAAOE,cAGT,CACE,CACE,IAAGhB,OACHwB,KAAAA,QACAC,eAAWjB,EACZ,SAAA,GACD,EAEEmB,IAAAA,WACAC,KAAAA,WACD,SAAA,GACD,EAEED,IAAAA,YACAE,KAAAA,aACAC,SAAU,GACX,CACD,CACEJ,IAAK,WACLC,KAAM,aACNG,SAAU,GACX,CACD,UACO,GAAA,KACLH,EAAM,GAAA,CACNG,CAAAA,EAAU,IAAA,EAAA,EAAA,UAAA,EAAA,CACX,CAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,CAAA,CACD,CAAA,EAAA,IAAA,EAAA,EAAA,cAAA,IAAA,IAAA,CACO,GAAA,EAAA,EAAA,aACLH,EAAM,SAAA,EAAA,EACNG,EAAU,UAAA,EAAA,IAAA,iBAId,IAASC,EAFR,EAAA,EAAA,UAAA,CAEgC,EAAA,EAAA,CAC/B,GAAMC,IAAYzB,EAClB,OAAOS,EAAMiB,YAAWxC,MAASsB,EAAW,CAAA,EAI5C,MAAMyB,IACJ,CAEA,CAAA,EAAOxB,EAAK0B,CAAUC,CACpB,OAAmBT,EAAAA,EAAAA,KAAAA,EAAa,cACxBY,2CACAG,YACN,UACE,KAAA,gCAGJ,kCACA,iBAGJ,qBACE,EACE,UAAA,CACA,mBACS1B,iBACT,aACc2B,YACd,CACahB,YACb,CAAA,UAEA,EAAsBG,CAAAA,WAAAA,gBAAAA,GAAAA,GAAAA,UACtB,EAAW,EAAA,GAAEc,EAAAA,OAAAA,QAAAA,EAAAA,YAAAA,SAAAA,QAAkCE,EAAAA,EAAAA,KAAAA,QAAAA,KAAYC,GAAAA,CAAW,IAC3DtB,EAAAA,cAAAA,IAAAA,KAKjB,KAAA,WACE,GAAA,EACEuB,SAASI,aAKDS,EAAO,CAAA,gBAAA,YAAA,CACX,OAAQ,EAAA,EAAA,MAAA,EAAA,SAAA,CAAA,SAAA,CAAA,IAAA,IAAA,GAAA,KAAA,IAAA,MAAA,IAAA,KAAA,EAAA,EAAA,KAAA,OAAA,CACNA,UAAGZ,sBAIHC,EAAAA,CAAAA,MAAAA,MAAAA,UACJ,EAAUC,EAAAA,EAAAA,KACV,EAAA,EAAA,OAAA,MAAA,YAAA,EAAA,IAAA,WAAA,WAAA,EAAA,IAAA,sBAIN,GAAA,EACE,QAGU,CAAA,EAAA,KAAkD,EACvD,CAAA,MAAA,QAAA,iBAIP,IAAMa,EAAAA,EAAmCE,IAAAA,WAAc,IAAA,EAAA,IAAA,GAEvD,OAAoB/C,EAAAA,EAAAA,KAAgB+B,EAAwC,CAC1E,GAAA,EAGA,QAAuB,CAAA,EAAIA,UAAuB,EAAA,EAAA,aAKpD,SAASH,EAAU5B,EAA4C,CAC7D,OAAMiD,EAAN,CAEA,IAAA,OAA0B,IAAIlB,WAAckB,IAAAA,YAAAA,OAAAA,EAAAA,IAAS,EAAA,GAAA,cAAA,EAAA,GAAA,CAGvD,IAAA,WAASzB,OAAuB,EAAA,IACvB2B,EAAInE,GAAAA,EAAAA,GAKb,QAASqC,MAAAA,MAAciC,4BAAgC,EAAA,GAAA"}